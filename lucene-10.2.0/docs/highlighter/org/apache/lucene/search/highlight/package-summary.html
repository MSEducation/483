<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) on Fri Apr 04 15:37:34 CEST 2025 -->
<title>org.apache.lucene.search.highlight (Lucene 10.2.0 highlighter API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-04-04">
<meta name="description" content="declaration: package: org.apache.lucene.search.highlight">
<meta name="generator" content="javadoc/PackageWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="package-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#package">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Package:</p>
<ul>
<li><a href="#package-description">Description</a></li>
<li>Related Packages</li>
<li><a href="#class-summary">Classes and Interfaces</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Package:&nbsp;</li>
<li><a href="#package-description">Description</a>&nbsp;|&nbsp;</li>
<li>Related Packages&nbsp;|&nbsp;</li>
<li><a href="#class-summary">Classes and Interfaces</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<div class="header">
<h1 title="Package org.apache.lucene.search.highlight" class="title">Package org.apache.lucene.search.highlight</h1>
</div>
<hr>
<div class="package-signature">package <span class="element-name">org.apache.lucene.search.highlight</span></div>
<section class="package-description" id="package-description">
<div class="block">Highlighting search terms.

 <p>The highlight package contains classes to provide "keyword in context" features typically used
 to highlight search terms in the text of results pages. The Highlighter class is the central
 component and can be used to extract the most interesting sections of a piece of text and
 highlight them, with the help of Fragmenter, fragment Scorer, and Formatter classes.

 <h2 id="example-usage-heading">Example Usage</h2>

 <pre class="prettyprint">
 //... Above, create documents with two fields, one with term vectors (tv) and one without (notv)
 IndexSearcher searcher = new IndexSearcher(directory);
 QueryParser parser = new QueryParser("notv", analyzer);
 Query query = parser.parse("million");

   TopDocs hits = searcher.search(query, 10);

   SimpleHTMLFormatter htmlFormatter = new SimpleHTMLFormatter();
   Highlighter highlighter = new Highlighter(htmlFormatter, new QueryScorer(query));
   for (int i = 0; i &lt; 10; i++) {
     int id = hits.scoreDocs[i].doc;
     Document doc = searcher.doc(id);
     String text = doc.get("notv");
     TokenStream tokenStream = TokenSources.getAnyTokenStream(searcher.getIndexReader(), id, "notv", analyzer);
     TextFragment[] frag = highlighter.getBestTextFragments(tokenStream, text, false, 10);//highlighter.getBestFragments(tokenStream, text, 3, "...");
     for (int j = 0; j &lt; frag.length; j++) {
       if ((frag[j] != null) &amp;&amp; (frag[j].getScore() &gt; 0)) {
         System.out.println((frag[j].toString()));
       }
     }
     //Term vector
     text = doc.get("tv");
     tokenStream = TokenSources.getAnyTokenStream(searcher.getIndexReader(), hits.scoreDocs[i].doc, "tv", analyzer);
     frag = highlighter.getBestTextFragments(tokenStream, text, false, 10);
     for (int j = 0; j &lt; frag.length; j++) {
       if ((frag[j] != null) &amp;&amp; (frag[j].getScore() &gt; 0)) {
         System.out.println((frag[j].toString()));
       }
     }
     System.out.println("-------------");
   }
 </pre>

 <h2 id="new-features-06-02-2005-heading">New features 06/02/2005</h2>

 This release adds options for encoding (thanks to Nicko Cadell). An "Encoder" implementation such
 as the new SimpleHTMLEncoder class can be passed to the highlighter to encode all those non-xhtml
 standard characters such as &amp; into legal values. This simple class may not suffice for some
 languages - Commons Lang has an implementation that could be used: escapeHtml(String) in
 http://svn.apache.org/viewcvs.cgi/jakarta/commons/proper/lang/trunk/src/java/org/apache/commons/lang/StringEscapeUtils.java?rev=137958&amp;view=markup

 <h2 id="new-features-22-12-2004-heading">New features 22/12/2004</h2>

 This release adds some new capabilities:

 <ol>
   <li>Faster highlighting using Term vector support
   <li>New formatting options to use color intensity to show informational value
   <li>Options for better summarization by using term IDF scores to influence fragment selection
 </ol>

 <p>The highlighter takes a TokenStream as input. Until now these streams have typically been
 produced using an Analyzer but the new class TokenSources provides helper methods for obtaining
 TokenStreams from the new TermVector position support (see latest CVS version).

 <p>The new class GradientFormatter can use a scale of colors to highlight terms according to
 their score. A subtle use of color can help emphasise the reasons for matching (useful when doing
 "MoreLikeThis" queries and you want to see what the basis of the similarities are).

 <p>The QueryScorer class has constructors that use an IndexReader to derive the IDF (inverse
 document frequency) for each term in order to influence the score. This is useful for helping to
 extracting the most significant sections of a document and in supplying scores used by the new
 GradientFormatter to color significant words more strongly. The QueryScorer.getMaxTermWeight
 method is useful when passed to the GradientFormatter constructor to define the top score which
 is associated with the top color.</div>
</section>
<section class="summary">
<ul class="summary-list">
<li>
<div id="class-summary">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="class-summary-tab0" role="tab" aria-selected="true" aria-controls="class-summary.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary', 2)" class="active-table-tab">All Classes and Interfaces</button><button id="class-summary-tab1" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab1', 2)" class="table-tab">Interfaces</button><button id="class-summary-tab2" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab2', 2)" class="table-tab">Classes</button><button id="class-summary-tab5" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab5', 2)" class="table-tab">Exception Classes</button></div>
<div id="class-summary.tabpanel" role="tabpanel">
<div class="summary-table two-column-summary" aria-labelledby="class-summary-tab0">
<div class="table-header col-first">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="DefaultEncoder.html" title="class in org.apache.lucene.search.highlight">DefaultEncoder</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Simple <a href="Encoder.html" title="interface in org.apache.lucene.search.highlight"><code>Encoder</code></a> implementation that does not modify the output</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="Encoder.html" title="interface in org.apache.lucene.search.highlight">Encoder</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Encodes original text.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="Formatter.html" title="interface in org.apache.lucene.search.highlight">Formatter</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Processes terms found in the original text, typically by applying some form of mark-up to
 highlight terms in HTML search results pages.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="Fragmenter.html" title="interface in org.apache.lucene.search.highlight">Fragmenter</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Implements the policy for breaking text into multiple fragments for consideration by the <a href="Highlighter.html" title="class in org.apache.lucene.search.highlight"><code>Highlighter</code></a> class.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="GradientFormatter.html" title="class in org.apache.lucene.search.highlight">GradientFormatter</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Formats text with different color intensity depending on the score of the term.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="Highlighter.html" title="class in org.apache.lucene.search.highlight">Highlighter</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Marks up highlighted terms found in the best sections of text, using configurable <a href="Fragmenter.html" title="interface in org.apache.lucene.search.highlight"><code>Fragmenter</code></a>, <a href="Scorer.html" title="interface in org.apache.lucene.search.highlight"><code>Scorer</code></a>, <a href="Formatter.html" title="interface in org.apache.lucene.search.highlight"><code>Formatter</code></a>, <a href="Encoder.html" title="interface in org.apache.lucene.search.highlight"><code>Encoder</code></a> and tokenizers.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab5"><a href="InvalidTokenOffsetsException.html" title="class in org.apache.lucene.search.highlight">InvalidTokenOffsetsException</a></div>
<div class="col-last even-row-color class-summary class-summary-tab5">
<div class="block">Exception thrown if TokenStream Tokens are incompatible with provided text</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="NullFragmenter.html" title="class in org.apache.lucene.search.highlight">NullFragmenter</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block"><a href="Fragmenter.html" title="interface in org.apache.lucene.search.highlight"><code>Fragmenter</code></a> implementation which does not fragment the text.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="OffsetLimitTokenFilter.html" title="class in org.apache.lucene.search.highlight">OffsetLimitTokenFilter</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">This TokenFilter limits the number of tokens while indexing by adding up the current offset.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="PositionSpan.html" title="class in org.apache.lucene.search.highlight">PositionSpan</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Utility class to record Positions Spans</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="QueryScorer.html" title="class in org.apache.lucene.search.highlight">QueryScorer</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block"><a href="Scorer.html" title="interface in org.apache.lucene.search.highlight"><code>Scorer</code></a> implementation which scores text fragments by the number of unique query terms
 found.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="QueryTermExtractor.html" title="class in org.apache.lucene.search.highlight">QueryTermExtractor</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Utility class used to extract the terms used in a query, plus any weights.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="QueryTermScorer.html" title="class in org.apache.lucene.search.highlight">QueryTermScorer</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block"><a href="Scorer.html" title="interface in org.apache.lucene.search.highlight"><code>Scorer</code></a> implementation which scores text fragments by the number of unique query terms
 found.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="Scorer.html" title="interface in org.apache.lucene.search.highlight">Scorer</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">A Scorer is responsible for scoring a stream of tokens.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="SimpleFragmenter.html" title="class in org.apache.lucene.search.highlight">SimpleFragmenter</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block"><a href="Fragmenter.html" title="interface in org.apache.lucene.search.highlight"><code>Fragmenter</code></a> implementation which breaks text up into same-size fragments with no concerns
 over spotting sentence boundaries.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="SimpleHTMLEncoder.html" title="class in org.apache.lucene.search.highlight">SimpleHTMLEncoder</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Simple <a href="Encoder.html" title="interface in org.apache.lucene.search.highlight"><code>Encoder</code></a> implementation to escape text for HTML output</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="SimpleHTMLFormatter.html" title="class in org.apache.lucene.search.highlight">SimpleHTMLFormatter</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Simple <a href="Formatter.html" title="interface in org.apache.lucene.search.highlight"><code>Formatter</code></a> implementation to highlight terms with a pre and post tag.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="SimpleSpanFragmenter.html" title="class in org.apache.lucene.search.highlight">SimpleSpanFragmenter</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block"><a href="Fragmenter.html" title="interface in org.apache.lucene.search.highlight"><code>Fragmenter</code></a> implementation which breaks text up into same-size fragments but does not
 split up <a href="../../../../../../queries/org/apache/lucene/queries/spans/Spans.html" title="class or interface in org.apache.lucene.queries.spans" class="external-link"><code>Spans</code></a>.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="SpanGradientFormatter.html" title="class in org.apache.lucene.search.highlight">SpanGradientFormatter</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Formats text with different color intensity depending on the score of the term using the span
 tag.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="TermVectorLeafReader.html" title="class in org.apache.lucene.search.highlight">TermVectorLeafReader</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Wraps a Terms with a <a href="../../../../../../core/org/apache/lucene/index/LeafReader.html" title="class or interface in org.apache.lucene.index" class="external-link"><code>LeafReader</code></a>, typically from term vectors.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="TextFragment.html" title="class in org.apache.lucene.search.highlight">TextFragment</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Low-level class used to record information about a section of a document with a score.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="TokenGroup.html" title="class in org.apache.lucene.search.highlight">TokenGroup</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">One, or several overlapping tokens, along with the score(s) and the scope of the original text.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="TokenSources.html" title="class in org.apache.lucene.search.highlight">TokenSources</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Convenience methods for obtaining a <a href="../../../../../../core/org/apache/lucene/analysis/TokenStream.html" title="class or interface in org.apache.lucene.analysis" class="external-link"><code>TokenStream</code></a> for use with the <a href="Highlighter.html" title="class in org.apache.lucene.search.highlight"><code>Highlighter</code></a> -
 can obtain from term vectors with offsets and positions or from an Analyzer re-parsing the stored
 content.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="TokenStreamFromTermVector.html" title="class in org.apache.lucene.search.highlight">TokenStreamFromTermVector</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">TokenStream created from a term vector field.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="WeightedSpanTerm.html" title="class in org.apache.lucene.search.highlight">WeightedSpanTerm</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Lightweight class to hold term, weight, and positions used for scoring this term.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="WeightedSpanTermExtractor.html" title="class in org.apache.lucene.search.highlight">WeightedSpanTermExtractor</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Class used to extract <a href="WeightedSpanTerm.html" title="class in org.apache.lucene.search.highlight"><code>WeightedSpanTerm</code></a>s from a <a href="../../../../../../core/org/apache/lucene/search/Query.html" title="class or interface in org.apache.lucene.search" class="external-link"><code>Query</code></a> based on whether <a href="../../../../../../core/org/apache/lucene/index/Term.html" title="class or interface in org.apache.lucene.index" class="external-link"><code>Term</code></a>s from the <a href="../../../../../../core/org/apache/lucene/search/Query.html" title="class or interface in org.apache.lucene.search" class="external-link"><code>Query</code></a> are contained in a supplied <a href="../../../../../../core/org/apache/lucene/analysis/TokenStream.html" title="class or interface in org.apache.lucene.analysis" class="external-link"><code>TokenStream</code></a>.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="WeightedSpanTermExtractor.PositionCheckingMap.html" title="class in org.apache.lucene.search.highlight">WeightedSpanTermExtractor.PositionCheckingMap</a>&lt;K&gt;</div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">This class makes sure that if both position sensitive and insensitive versions of the same term
 are added, the position insensitive one wins.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="WeightedTerm.html" title="class in org.apache.lucene.search.highlight">WeightedTerm</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Lightweight class to hold term and a weight value used for scoring this term</div>
</div>
</div>
</div>
</div>
</li>
</ul>
</section>
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><i>Copyright &copy; 2000-2025 Apache Software Foundation. All Rights Reserved.</i></small></p>
</footer>
</div>
</div>
</body>
</html>
