<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) on Fri Apr 04 15:37:45 CEST 2025 -->
<title>BPIndexReorderer (Lucene 10.2.0 misc API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-04-04">
<meta name="description" content="declaration: package: org.apache.lucene.misc.index, class: BPIndexReorderer">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/BPIndexReorderer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li><a href="#nested-class-summary">Nested</a></li>
<li><a href="#field-summary">Field</a></li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li><a href="#field-detail">Field</a></li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.lucene.misc.index</a></div>
<h1 title="Class BPIndexReorderer" class="title">Class BPIndexReorderer</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.lucene.misc.index.BPIndexReorderer</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public final class </span><span class="element-name type-name-label">BPIndexReorderer</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">Implementation of "recursive graph bisection", also called "bipartite graph partitioning" and
 often abbreviated BP, an approach to doc ID assignment that aims at reducing the sum of the log
 gap between consecutive postings. While originally targeted at reducing the size of postings,
 this algorithm has been observed to also speed up queries significantly by clustering documents
 that have similar sets of terms together.

 <p>This algorithm was initially described by Dhulipala et al. in "Compressing graphs and inverted
 indexes with recursive graph bisection". This implementation takes advantage of some
 optimizations suggested by Mackenzie et al. in "Tradeoff Options for Bipartite Graph
 Partitioning".

 <p>Typical usage would look like this:

 <pre class="prettyprint">
 LeafReader reader; // reader to reorder
 Directory targetDir; // Directory where to write the reordered index

 Directory targetDir = FSDirectory.open(targetPath);
 BPIndexReorderer reorderer = new BPIndexReorderer();
 ForkJoinPool pool = new ForkJoinPool(Runtime.getRuntime().availableProcessors(),
     p -&gt; new ForkJoinWorkerThread(p) {}, null, false);
 reorderer.setForkJoinPool(pool);
 reorderer.setFields(Collections.singleton("body"));
 CodecReader reorderedReaderView = reorderer.reorder(SlowCodecReaderWrapper.wrap(reader), targetDir);
 try (IndexWriter w = new IndexWriter(targetDir, new IndexWriterConfig().setOpenMode(OpenMode.CREATE))) {
   w.addIndexes(reorderedReaderView);
 }
 DirectoryReader reorderedReader = DirectoryReader.open(targetDir);
 </pre>

 <p>Note: This is a slow operation that consumes O(maxDoc + numTerms * numThreads) memory.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static class&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="BPIndexReorderer.NotEnoughRAMException.html" class="type-name-link" title="class in org.apache.lucene.misc.index">BPIndexReorderer.NotEnoughRAMException</a></code></div>
<div class="col-last even-row-color">
<div class="block">Exception that is thrown when not enough RAM is available.</div>
</div>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final int</code></div>
<div class="col-second even-row-color"><code><a href="#DEFAULT_MAX_ITERS" class="member-name-link">DEFAULT_MAX_ITERS</a></code></div>
<div class="col-last even-row-color">
<div class="block">Default maximum number of iterations per recursion level: 20.</div>
</div>
<div class="col-first odd-row-color"><code>static final int</code></div>
<div class="col-second odd-row-color"><code><a href="#DEFAULT_MIN_DOC_FREQ" class="member-name-link">DEFAULT_MIN_DOC_FREQ</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Minimum required document frequency for terms to be considered: 4,096.</div>
</div>
<div class="col-first even-row-color"><code>static final int</code></div>
<div class="col-second even-row-color"><code><a href="#DEFAULT_MIN_PARTITION_SIZE" class="member-name-link">DEFAULT_MIN_PARTITION_SIZE</a></code></div>
<div class="col-last even-row-color">
<div class="block">Minimum size of partitions.</div>
</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">BPIndexReorderer</a>()</code></div>
<div class="col-last even-row-color">
<div class="block">Constructor.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../../../../../core/org/apache/lucene/index/Sorter.DocMap.html" title="class or interface in org.apache.lucene.index" class="external-link">Sorter.DocMap</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#computeDocMap(org.apache.lucene.index.CodecReader,org.apache.lucene.store.Directory,java.util.concurrent.Executor)" class="member-name-link">computeDocMap</a><wbr>(<a href="../../../../../../core/org/apache/lucene/index/CodecReader.html" title="class or interface in org.apache.lucene.index" class="external-link">CodecReader</a>&nbsp;reader,
 <a href="../../../../../../core/org/apache/lucene/store/Directory.html" title="class or interface in org.apache.lucene.store" class="external-link">Directory</a>&nbsp;tempDir,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Executor.html" title="class or interface in java.util.concurrent" class="external-link">Executor</a>&nbsp;executor)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Expert: Compute the <a href="../../../../../../core/org/apache/lucene/index/Sorter.DocMap.html" title="class or interface in org.apache.lucene.index" class="external-link"><code>Sorter.DocMap</code></a> that holds the new doc ID numbering.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../../../../../core/org/apache/lucene/index/CodecReader.html" title="class or interface in org.apache.lucene.index" class="external-link">CodecReader</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#reorder(org.apache.lucene.index.CodecReader,org.apache.lucene.store.Directory,java.util.concurrent.Executor)" class="member-name-link">reorder</a><wbr>(<a href="../../../../../../core/org/apache/lucene/index/CodecReader.html" title="class or interface in org.apache.lucene.index" class="external-link">CodecReader</a>&nbsp;reader,
 <a href="../../../../../../core/org/apache/lucene/store/Directory.html" title="class or interface in org.apache.lucene.store" class="external-link">Directory</a>&nbsp;tempDir,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Executor.html" title="class or interface in java.util.concurrent" class="external-link">Executor</a>&nbsp;executor)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Reorder the given <a href="../../../../../../core/org/apache/lucene/index/CodecReader.html" title="class or interface in org.apache.lucene.index" class="external-link"><code>CodecReader</code></a> into a reader that tries to minimize the log gap between
 consecutive documents in postings, which usually helps improve space efficiency and query
 evaluation efficiency.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setFields(java.util.Set)" class="member-name-link">setFields</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;fields)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sets the fields to use to perform partitioning.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setMaxDocFreq(float)" class="member-name-link">setMaxDocFreq</a><wbr>(float&nbsp;maxDocFreq)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the maximum document frequency for terms to be considered, as a ratio of <code>maxDoc</code>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setMaxIters(int)" class="member-name-link">setMaxIters</a><wbr>(int&nbsp;maxIters)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the maximum number of iterations on each recursion level, 20 by default.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setMinDocFreq(int)" class="member-name-link">setMinDocFreq</a><wbr>(int&nbsp;minDocFreq)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the minimum document frequency for terms to be considered, 4096 by default.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setMinPartitionSize(int)" class="member-name-link">setMinPartitionSize</a><wbr>(int&nbsp;minPartitionSize)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the minimum partition size, when the algorithm stops recursing, 32 by default.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setRAMBudgetMB(double)" class="member-name-link">setRAMBudgetMB</a><wbr>(double&nbsp;ramBudgetMB)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the amount of RAM that graph partitioning is allowed to use.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone--" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals-java.lang.Object-" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize--" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass--" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode--" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify--" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll--" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString--" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait--" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait-long-" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait-long-int-" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="DEFAULT_MIN_DOC_FREQ">
<h3>DEFAULT_MIN_DOC_FREQ</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">DEFAULT_MIN_DOC_FREQ</span></div>
<div class="block">Minimum required document frequency for terms to be considered: 4,096.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../../constant-values.html#org.apache.lucene.misc.index.BPIndexReorderer.DEFAULT_MIN_DOC_FREQ">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="DEFAULT_MIN_PARTITION_SIZE">
<h3>DEFAULT_MIN_PARTITION_SIZE</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">DEFAULT_MIN_PARTITION_SIZE</span></div>
<div class="block">Minimum size of partitions. The algorithm will stop recursing when reaching partitions below
 this number of documents: 32.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../../constant-values.html#org.apache.lucene.misc.index.BPIndexReorderer.DEFAULT_MIN_PARTITION_SIZE">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="DEFAULT_MAX_ITERS">
<h3>DEFAULT_MAX_ITERS</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">DEFAULT_MAX_ITERS</span></div>
<div class="block">Default maximum number of iterations per recursion level: 20. Higher numbers of iterations
 typically don't help significantly.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../../constant-values.html#org.apache.lucene.misc.index.BPIndexReorderer.DEFAULT_MAX_ITERS">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>BPIndexReorderer</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">BPIndexReorderer</span>()</div>
<div class="block">Constructor.</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="setMinDocFreq(int)">
<h3>setMinDocFreq</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setMinDocFreq</span><wbr><span class="parameters">(int&nbsp;minDocFreq)</span></div>
<div class="block">Set the minimum document frequency for terms to be considered, 4096 by default.</div>
</section>
</li>
<li>
<section class="detail" id="setMaxDocFreq(float)">
<h3>setMaxDocFreq</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setMaxDocFreq</span><wbr><span class="parameters">(float&nbsp;maxDocFreq)</span></div>
<div class="block">Set the maximum document frequency for terms to be considered, as a ratio of <code>maxDoc</code>.
 This is useful because very frequent terms (stop words) add significant overhead to the
 reordering logic while not being very relevant for ordering. This value must be in (0, 1].
 Default value is 1.</div>
</section>
</li>
<li>
<section class="detail" id="setMinPartitionSize(int)">
<h3>setMinPartitionSize</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setMinPartitionSize</span><wbr><span class="parameters">(int&nbsp;minPartitionSize)</span></div>
<div class="block">Set the minimum partition size, when the algorithm stops recursing, 32 by default.</div>
</section>
</li>
<li>
<section class="detail" id="setMaxIters(int)">
<h3>setMaxIters</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setMaxIters</span><wbr><span class="parameters">(int&nbsp;maxIters)</span></div>
<div class="block">Set the maximum number of iterations on each recursion level, 20 by default. Experiments
 suggests that values above 20 do not help much. However, values below 20 can be used to trade
 effectiveness for faster reordering.</div>
</section>
</li>
<li>
<section class="detail" id="setRAMBudgetMB(double)">
<h3>setRAMBudgetMB</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setRAMBudgetMB</span><wbr><span class="parameters">(double&nbsp;ramBudgetMB)</span></div>
<div class="block">Set the amount of RAM that graph partitioning is allowed to use. More RAM allows running
 faster. If not enough RAM is provided, a <a href="BPIndexReorderer.NotEnoughRAMException.html" title="class in org.apache.lucene.misc.index"><code>BPIndexReorderer.NotEnoughRAMException</code></a> will be thrown. This is
 10% of the total heap size by default.</div>
</section>
</li>
<li>
<section class="detail" id="setFields(java.util.Set)">
<h3>setFields</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setFields</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;fields)</span></div>
<div class="block">Sets the fields to use to perform partitioning. A <code>null</code> value indicates that all indexed
 fields should be used.</div>
</section>
</li>
<li>
<section class="detail" id="computeDocMap(org.apache.lucene.index.CodecReader,org.apache.lucene.store.Directory,java.util.concurrent.Executor)">
<h3>computeDocMap</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../../../../../core/org/apache/lucene/index/Sorter.DocMap.html" title="class or interface in org.apache.lucene.index" class="external-link">Sorter.DocMap</a></span>&nbsp;<span class="element-name">computeDocMap</span><wbr><span class="parameters">(<a href="../../../../../../core/org/apache/lucene/index/CodecReader.html" title="class or interface in org.apache.lucene.index" class="external-link">CodecReader</a>&nbsp;reader,
 <a href="../../../../../../core/org/apache/lucene/store/Directory.html" title="class or interface in org.apache.lucene.store" class="external-link">Directory</a>&nbsp;tempDir,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Executor.html" title="class or interface in java.util.concurrent" class="external-link">Executor</a>&nbsp;executor)</span>
                            throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Expert: Compute the <a href="../../../../../../core/org/apache/lucene/index/Sorter.DocMap.html" title="class or interface in org.apache.lucene.index" class="external-link"><code>Sorter.DocMap</code></a> that holds the new doc ID numbering. This is exposed to
 enable integration into <a href="BPReorderingMergePolicy.html" title="class in org.apache.lucene.misc.index"><code>BPReorderingMergePolicy</code></a>, <a href="#reorder(org.apache.lucene.index.CodecReader,org.apache.lucene.store.Directory,java.util.concurrent.Executor)"><code>reorder(CodecReader, Directory, Executor)</code></a> should be preferred in general.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="reorder(org.apache.lucene.index.CodecReader,org.apache.lucene.store.Directory,java.util.concurrent.Executor)">
<h3>reorder</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../../../../../core/org/apache/lucene/index/CodecReader.html" title="class or interface in org.apache.lucene.index" class="external-link">CodecReader</a></span>&nbsp;<span class="element-name">reorder</span><wbr><span class="parameters">(<a href="../../../../../../core/org/apache/lucene/index/CodecReader.html" title="class or interface in org.apache.lucene.index" class="external-link">CodecReader</a>&nbsp;reader,
 <a href="../../../../../../core/org/apache/lucene/store/Directory.html" title="class or interface in org.apache.lucene.store" class="external-link">Directory</a>&nbsp;tempDir,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Executor.html" title="class or interface in java.util.concurrent" class="external-link">Executor</a>&nbsp;executor)</span>
                    throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Reorder the given <a href="../../../../../../core/org/apache/lucene/index/CodecReader.html" title="class or interface in org.apache.lucene.index" class="external-link"><code>CodecReader</code></a> into a reader that tries to minimize the log gap between
 consecutive documents in postings, which usually helps improve space efficiency and query
 evaluation efficiency. Note that the returned <a href="../../../../../../core/org/apache/lucene/index/CodecReader.html" title="class or interface in org.apache.lucene.index" class="external-link"><code>CodecReader</code></a> is slow and should typically
 be used in a call to <a href="../../../../../../core/org/apache/lucene/index/IndexWriter.html#addIndexes(org.apache.lucene.index.CodecReader...)" title="class or interface in org.apache.lucene.index" class="external-link"><code>IndexWriter.addIndexes(CodecReader...)</code></a>.

 <p>The provided <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Executor.html" title="class or interface in java.util.concurrent" class="external-link"><code>Executor</code></a> can be used to perform reordering concurrently. A value of
 <code>null</code> indicates that reordering should be performed in the current thread.

 <p><b>NOTE</b>: The provided <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Executor.html" title="class or interface in java.util.concurrent" class="external-link"><code>Executor</code></a> must not reject tasks.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="BPIndexReorderer.NotEnoughRAMException.html" title="class in org.apache.lucene.misc.index">BPIndexReorderer.NotEnoughRAMException</a></code> - if not enough RAM is provided</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><i>Copyright &copy; 2000-2025 Apache Software Foundation. All Rights Reserved.</i></small></p>
</footer>
</div>
</div>
</body>
</html>
