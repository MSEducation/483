<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) on Fri Apr 04 15:37:21 CEST 2025 -->
<title>IndexWriter (Lucene 10.2.0 core API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-04-04">
<meta name="description" content="declaration: package: org.apache.lucene.index, class: IndexWriter">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/IndexWriter.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li><a href="#nested-class-summary">Nested</a></li>
<li><a href="#field-summary">Field</a></li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li><a href="#field-detail">Field</a></li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.lucene.index</a></div>
<h1 title="Class IndexWriter" class="title">Class IndexWriter</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.lucene.index.IndexWriter</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/Closeable.html" title="class or interface in java.io" class="external-link">Closeable</a></code>, <code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/AutoCloseable.html" title="class or interface in java.lang" class="external-link">AutoCloseable</a></code>, <code><a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a></code>, <code><a href="TwoPhaseCommit.html" title="interface in org.apache.lucene.index">TwoPhaseCommit</a></code>, <code><a href="../util/Accountable.html" title="interface in org.apache.lucene.util">Accountable</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">IndexWriter</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/Closeable.html" title="class or interface in java.io" class="external-link">Closeable</a>, <a href="TwoPhaseCommit.html" title="interface in org.apache.lucene.index">TwoPhaseCommit</a>, <a href="../util/Accountable.html" title="interface in org.apache.lucene.util">Accountable</a>, <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a></span></div>
<div class="block">An <code>IndexWriter</code> creates and maintains an index.

 <p>The <a href="IndexWriterConfig.OpenMode.html" title="enum class in org.apache.lucene.index"><code>IndexWriterConfig.OpenMode</code></a> option on <a href="IndexWriterConfig.html#setOpenMode(org.apache.lucene.index.IndexWriterConfig.OpenMode)"><code>IndexWriterConfig.setOpenMode(OpenMode)</code></a> determines
 whether a new index is created, or whether an existing index is opened. Note that you can open an
 index with <a href="IndexWriterConfig.OpenMode.html#CREATE"><code>IndexWriterConfig.OpenMode.CREATE</code></a> even while readers are using the index. The old readers will
 continue to search the "point in time" snapshot they had opened, and won't see the newly created
 index until they re-open. If <a href="IndexWriterConfig.OpenMode.html#CREATE_OR_APPEND"><code>IndexWriterConfig.OpenMode.CREATE_OR_APPEND</code></a> is used IndexWriter will create a
 new index if there is not already an index at the provided path and otherwise open the existing
 index.

 <p>In either case, documents are added with <a href="#addDocument(java.lang.Iterable)"><code>addDocument</code></a> and
 removed with <a href="#deleteDocuments(org.apache.lucene.index.Term...)"><code>deleteDocuments(Term...)</code></a> or <a href="#deleteDocuments(org.apache.lucene.search.Query...)"><code>deleteDocuments(Query...)</code></a>. A document
 can be updated with <a href="#updateDocument(org.apache.lucene.index.Term,java.lang.Iterable)"><code>updateDocument</code></a> (which just deletes
 and then adds the entire document). When finished adding, deleting and updating documents, <a href="#close()"><code>close</code></a> should be called. <a id="sequence_numbers"></a>

 <p>Each method that changes the index returns a <code>long</code> sequence number, which expresses the
 effective order in which each change was applied. <a href="#commit()"><code>commit()</code></a> also returns a sequence number,
 describing which changes are in the commit point and which are not. Sequence numbers are
 transient (not saved into the index in any way) and only valid within a single <code>
 IndexWriter</code> instance. <a id="flush"></a>

 <p>These changes are buffered in memory and periodically flushed to the <a href="../store/Directory.html" title="class in org.apache.lucene.store"><code>Directory</code></a> (during
 the above method calls). A flush is triggered when there are enough added documents since the
 last flush. Flushing is triggered either by RAM usage of the documents (see <a href="IndexWriterConfig.html#setRAMBufferSizeMB(double)"><code>IndexWriterConfig.setRAMBufferSizeMB(double)</code></a>) or the number of added documents (see <a href="IndexWriterConfig.html#setMaxBufferedDocs(int)"><code>IndexWriterConfig.setMaxBufferedDocs(int)</code></a>). The default is to flush when RAM usage hits <a href="IndexWriterConfig.html#DEFAULT_RAM_BUFFER_SIZE_MB"><code>IndexWriterConfig.DEFAULT_RAM_BUFFER_SIZE_MB</code></a> MB. For best indexing speed you should flush by RAM
 usage with a large RAM buffer. In contrast to the other flush options <a href="IndexWriterConfig.html#setRAMBufferSizeMB(double)"><code>IndexWriterConfig.setRAMBufferSizeMB(double)</code></a> and <a href="IndexWriterConfig.html#setMaxBufferedDocs(int)"><code>IndexWriterConfig.setMaxBufferedDocs(int)</code></a>,
 deleted terms won't trigger a segment flush. Note that flushing just moves the internal buffered
 state in IndexWriter into the index, but these changes are not visible to IndexReader until
 either <a href="#commit()"><code>commit()</code></a> or <a href="#close()"><code>close()</code></a> is called. A flush may also trigger one or more
 segment merges which by default run with a background thread so as not to block the addDocument
 calls (see <a href="#mergePolicy">below</a> for changing the <a href="MergeScheduler.html" title="class in org.apache.lucene.index"><code>MergeScheduler</code></a>).

 <p>Opening an <code>IndexWriter</code> creates a lock file for the directory in use. Trying to
 open another <code>IndexWriter</code> on the same directory will lead to a <a href="../store/LockObtainFailedException.html" title="class in org.apache.lucene.store"><code>LockObtainFailedException</code></a>. <a id="deletionPolicy"></a>

 <p>Expert: <code>IndexWriter</code> allows an optional <a href="IndexDeletionPolicy.html" title="class in org.apache.lucene.index"><code>IndexDeletionPolicy</code></a> implementation
 to be specified. You can use this to control when prior commits are deleted from the index. The
 default policy is <a href="KeepOnlyLastCommitDeletionPolicy.html" title="class in org.apache.lucene.index"><code>KeepOnlyLastCommitDeletionPolicy</code></a> which removes all prior commits as
 soon as a new commit is done. Creating your own policy can allow you to explicitly keep previous
 "point in time" commits alive in the index for some time, either because this is useful for your
 application, or to give readers enough time to refresh to the new commit without having the old
 commit deleted out from under them. The latter is necessary when multiple computers take turns
 opening their own <code>IndexWriter</code> and <code>IndexReader</code>s against a single shared index
 mounted via remote filesystems like NFS which do not support "delete on last close" semantics. A
 single computer accessing an index via NFS is fine with the default deletion policy since NFS
 clients emulate "delete on last close" locally. That said, accessing an index via NFS will likely
 result in poor performance compared to a local IO device. <a id="mergePolicy"></a>

 <p>Expert: <code>IndexWriter</code> allows you to separately change the <a href="MergePolicy.html" title="class in org.apache.lucene.index"><code>MergePolicy</code></a> and
 the <a href="MergeScheduler.html" title="class in org.apache.lucene.index"><code>MergeScheduler</code></a>. The <a href="MergePolicy.html" title="class in org.apache.lucene.index"><code>MergePolicy</code></a> is invoked whenever there are changes to the
 segments in the index. Its role is to select which merges to do, if any, and return a <a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index"><code>MergePolicy.MergeSpecification</code></a> describing the merges. The default is <a href="LogByteSizeMergePolicy.html" title="class in org.apache.lucene.index"><code>LogByteSizeMergePolicy</code></a>. Then, the <a href="MergeScheduler.html" title="class in org.apache.lucene.index"><code>MergeScheduler</code></a> is invoked with the requested merges
 and it decides when and how to run the merges. The default is <a href="ConcurrentMergeScheduler.html" title="class in org.apache.lucene.index"><code>ConcurrentMergeScheduler</code></a>.
 <a id="OOME"></a>

 <p><b>NOTE</b>: if you hit an Error, or disaster strikes during a checkpoint then IndexWriter
 will close itself. This is a defensive measure in case any internal state (buffered documents,
 deletions, reference counts) were corrupted. Any subsequent calls will throw an
 AlreadyClosedException. <a id="thread-safety"></a>

 <p><b>NOTE</b>: <a href="IndexWriter.html" title="class in org.apache.lucene.index"><code>IndexWriter</code></a> instances are completely thread safe, meaning multiple
 threads can call any of its methods, concurrently. If your application requires external
 synchronization, you should <b>not</b> synchronize on the <code>IndexWriter</code> instance as
 this may cause deadlock; use your own (non-Lucene) objects instead.

 <p><b>NOTE</b>: If you call <code>Thread.interrupt()</code> on a thread that's within
 IndexWriter, IndexWriter will try to catch this (eg, if it's in a wait() or Thread.sleep()), and
 will then throw the unchecked exception <a href="../util/ThreadInterruptedException.html" title="class in org.apache.lucene.util"><code>ThreadInterruptedException</code></a> and <b>clear</b> the
 interrupt status on the thread.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final class&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="IndexWriter.DocStats.html" class="type-name-link" title="class in org.apache.lucene.index">IndexWriter.DocStats</a></code></div>
<div class="col-last even-row-color">
<div class="block">DocStats for this index</div>
</div>
<div class="col-first odd-row-color"><code>static interface&nbsp;</code></div>
<div class="col-second odd-row-color"><code><a href="IndexWriter.IndexReaderWarmer.html" class="type-name-link" title="interface in org.apache.lucene.index">IndexWriter.IndexReaderWarmer</a></code></div>
<div class="col-last odd-row-color">
<div class="block">If <a href="DirectoryReader.html#open(org.apache.lucene.index.IndexWriter)"><code>DirectoryReader.open(IndexWriter)</code></a> has been called (ie, this writer is in near
 real-time mode), then after a merge completes, this class can be invoked to warm the reader on
 the newly merged segment, before the merge commits.</div>
</div>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final int</code></div>
<div class="col-second even-row-color"><code><a href="#MAX_DOCS" class="member-name-link">MAX_DOCS</a></code></div>
<div class="col-last even-row-color">
<div class="block">Hard limit on maximum number of documents that may be added to the index.</div>
</div>
<div class="col-first odd-row-color"><code>static final int</code></div>
<div class="col-second odd-row-color"><code><a href="#MAX_POSITION" class="member-name-link">MAX_POSITION</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Maximum value of the token position in an indexed field.</div>
</div>
<div class="col-first even-row-color"><code>static final int</code></div>
<div class="col-second even-row-color"><code><a href="#MAX_STORED_STRING_LENGTH" class="member-name-link">MAX_STORED_STRING_LENGTH</a></code></div>
<div class="col-last even-row-color">
<div class="block">Maximum length string for a stored field.</div>
</div>
<div class="col-first odd-row-color"><code>static final int</code></div>
<div class="col-second odd-row-color"><code><a href="#MAX_TERM_LENGTH" class="member-name-link">MAX_TERM_LENGTH</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Absolute hard maximum length for a term, in bytes once encoded as UTF8.</div>
</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#SOURCE" class="member-name-link">SOURCE</a></code></div>
<div class="col-last even-row-color">
<div class="block">Key for the source of a segment in the <a href="SegmentInfo.html#getDiagnostics()"><code>diagnostics</code></a>.</div>
</div>
<div class="col-first odd-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#SOURCE_ADDINDEXES_READERS" class="member-name-link">SOURCE_ADDINDEXES_READERS</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Source of a segment which results from a call to <a href="#addIndexes(org.apache.lucene.index.CodecReader...)"><code>addIndexes(CodecReader...)</code></a>.</div>
</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#SOURCE_FLUSH" class="member-name-link">SOURCE_FLUSH</a></code></div>
<div class="col-last even-row-color">
<div class="block">Source of a segment which results from a flush.</div>
</div>
<div class="col-first odd-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#SOURCE_MERGE" class="member-name-link">SOURCE_MERGE</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Source of a segment which results from a merge of other segments.</div>
</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#WRITE_LOCK_NAME" class="member-name-link">WRITE_LOCK_NAME</a></code></div>
<div class="col-last even-row-color">
<div class="block">Name of the write lock in the index.</div>
</div>
</div>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-org.apache.lucene.util.Accountable">Fields inherited from interface&nbsp;org.apache.lucene.util.<a href="../util/Accountable.html" title="interface in org.apache.lucene.util">Accountable</a></h3>
<code><a href="../util/Accountable.html#NULL_ACCOUNTABLE">NULL_ACCOUNTABLE</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(org.apache.lucene.store.Directory,org.apache.lucene.index.IndexWriterConfig)" class="member-name-link">IndexWriter</a><wbr>(<a href="../store/Directory.html" title="class in org.apache.lucene.store">Directory</a>&nbsp;d,
 <a href="IndexWriterConfig.html" title="class in org.apache.lucene.index">IndexWriterConfig</a>&nbsp;conf)</code></div>
<div class="col-last even-row-color">
<div class="block">Constructs a new IndexWriter per the settings given in <code>conf</code>.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addDocument(java.lang.Iterable)" class="member-name-link">addDocument</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;? extends <a href="IndexableField.html" title="interface in org.apache.lucene.index">IndexableField</a>&gt;&nbsp;doc)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Adds a document to this index.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addDocuments(java.lang.Iterable)" class="member-name-link">addDocuments</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;? extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;? extends <a href="IndexableField.html" title="interface in org.apache.lucene.index">IndexableField</a>&gt;&gt;&nbsp;docs)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Atomically adds a block of documents with sequentially assigned document IDs, such that an
 external reader will see all or none of the documents.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addIndexes(org.apache.lucene.index.CodecReader...)" class="member-name-link">addIndexes</a><wbr>(<a href="CodecReader.html" title="class in org.apache.lucene.index">CodecReader</a>...&nbsp;readers)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Merges the provided indexes into this index.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addIndexes(org.apache.lucene.store.Directory...)" class="member-name-link">addIndexes</a><wbr>(<a href="../store/Directory.html" title="class in org.apache.lucene.store">Directory</a>...&nbsp;dirs)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Adds all segments from an array of indexes into this index.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addIndexesReaderMerge(org.apache.lucene.index.MergePolicy.OneMerge)" class="member-name-link">addIndexesReaderMerge</a><wbr>(<a href="MergePolicy.OneMerge.html" title="class in org.apache.lucene.index">MergePolicy.OneMerge</a>&nbsp;merge)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Runs a single merge operation for <a href="#addIndexes(org.apache.lucene.index.CodecReader...)"><code>addIndexes(CodecReader...)</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#advanceSegmentInfosVersion(long)" class="member-name-link">advanceSegmentInfosVersion</a><wbr>(long&nbsp;newVersion)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">If <a href="SegmentInfos.html#getVersion()"><code>SegmentInfos.getVersion()</code></a> is below <code>newVersion</code> then update it to this value.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#close()" class="member-name-link">close</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Closes all open resources and releases the write lock.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#commit()" class="member-name-link">commit</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Commits all pending changes (added and deleted documents, segment merges, added indexes, etc.)
 to the index, and syncs all referenced index files, such that a reader will see the changes and
 the index updates will survive an OS or machine crash or power loss.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#decRefDeleter(org.apache.lucene.index.SegmentInfos)" class="member-name-link">decRefDeleter</a><wbr>(<a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;segmentInfos)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Record that the files referenced by this <a href="SegmentInfos.html" title="class in org.apache.lucene.index"><code>SegmentInfos</code></a> are no longer in use.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#deleteAll()" class="member-name-link">deleteAll</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Delete all documents in the index.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#deleteDocuments(org.apache.lucene.index.Term...)" class="member-name-link">deleteDocuments</a><wbr>(<a href="Term.html" title="class in org.apache.lucene.index">Term</a>...&nbsp;terms)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Deletes the document(s) containing any of the terms.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#deleteDocuments(org.apache.lucene.search.Query...)" class="member-name-link">deleteDocuments</a><wbr>(<a href="../search/Query.html" title="class in org.apache.lucene.search">Query</a>...&nbsp;queries)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Deletes the document(s) matching any of the provided queries.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#deleteUnusedFiles()" class="member-name-link">deleteUnusedFiles</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Expert: remove any index files that are no longer used.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doAfterFlush()" class="member-name-link">doAfterFlush</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">A hook for extending classes to execute operations after pending added and deleted documents
 have been flushed to the Directory but before the change is committed (new segments_N file
 written).</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doBeforeFlush()" class="member-name-link">doBeforeFlush</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">A hook for extending classes to execute operations before pending added and deleted documents
 are flushed to the Directory.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected final void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#ensureOpen()" class="member-name-link">ensureOpen</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Used internally to throw an <a href="../store/AlreadyClosedException.html" title="class in org.apache.lucene.store"><code>AlreadyClosedException</code></a> if this IndexWriter has been closed
 (<code>closed=true</code>) or is in the process of closing (<code>closing=true</code>).</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected final void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#ensureOpen(boolean)" class="member-name-link">ensureOpen</a><wbr>(boolean&nbsp;failIfClosing)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Used internally to throw an <a href="../store/AlreadyClosedException.html" title="class in org.apache.lucene.store"><code>AlreadyClosedException</code></a> if this IndexWriter has been closed
 or is in the process of closing.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#flush()" class="member-name-link">flush</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Moves all in-memory segments to the <a href="../store/Directory.html" title="class in org.apache.lucene.store"><code>Directory</code></a>, but does not commit (fsync) them (call
 <a href="#commit()"><code>commit()</code></a> for that).</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#flushNextBuffer()" class="member-name-link">flushNextBuffer</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Expert: Flushes the next pending writer per thread buffer if available or the largest active
 non-pending writer per thread buffer in the calling thread.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#forceMerge(int)" class="member-name-link">forceMerge</a><wbr>(int&nbsp;maxNumSegments)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Forces merge policy to merge segments until there are <code>&lt;= maxNumSegments</code>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#forceMerge(int,boolean)" class="member-name-link">forceMerge</a><wbr>(int&nbsp;maxNumSegments,
 boolean&nbsp;doWait)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Just like <a href="#forceMerge(int)"><code>forceMerge(int)</code></a>, except you can specify whether the call should block until
 all merging completes.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#forceMergeDeletes()" class="member-name-link">forceMergeDeletes</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Forces merging of all segments that have deleted documents.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#forceMergeDeletes(boolean)" class="member-name-link">forceMergeDeletes</a><wbr>(boolean&nbsp;doWait)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Just like <a href="#forceMergeDeletes()"><code>forceMergeDeletes()</code></a>, except you can specify whether the call should block
 until the operation completes.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../analysis/Analyzer.html" title="class in org.apache.lucene.analysis">Analyzer</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getAnalyzer()" class="member-name-link">getAnalyzer</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the analyzer used by this index.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="LiveIndexWriterConfig.html" title="class in org.apache.lucene.index">LiveIndexWriterConfig</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getConfig()" class="member-name-link">getConfig</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a <a href="LiveIndexWriterConfig.html" title="class in org.apache.lucene.index"><code>LiveIndexWriterConfig</code></a>, which can be used to query the IndexWriter current
 settings, as well as modify "live" ones.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../store/Directory.html" title="class in org.apache.lucene.store">Directory</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getDirectory()" class="member-name-link">getDirectory</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the Directory used by this index.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="IndexWriter.DocStats.html" title="class in org.apache.lucene.index">IndexWriter.DocStats</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getDocStats()" class="member-name-link">getDocStats</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns accurate <a href="IndexWriter.DocStats.html" title="class in org.apache.lucene.index"><code>IndexWriter.DocStats</code></a> for this writer.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a><wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getFieldNames()" class="member-name-link">getFieldNames</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return an unmodifiable set of all field names as visible from this IndexWriter, across all
 segments of the index.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getFlushingBytes()" class="member-name-link">getFlushingBytes</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the number of bytes currently being flushed</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../util/InfoStream.html" title="class in org.apache.lucene.util">InfoStream</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getInfoStream()" class="member-name-link">getInfoStream</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the info stream that can be used to log messages</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a><wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.Entry.html" title="class or interface in java.util" class="external-link">Map.Entry</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLiveCommitData()" class="member-name-link">getLiveCommitData</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the commit user data iterable previously set with <a href="#setLiveCommitData(java.lang.Iterable)"><code>setLiveCommitData(Iterable)</code></a>,
 or null if nothing has been set yet.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getMaxCompletedSequenceNumber()" class="member-name-link">getMaxCompletedSequenceNumber</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the highest <a href="#sequence_number">sequence number</a> across all completed
 operations, or 0 if no operations have finished yet.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a><wbr>&lt;<a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getMergingSegments()" class="member-name-link">getMergingSegments</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Expert: to be used by a <a href="MergePolicy.html" title="class in org.apache.lucene.index"><code>MergePolicy</code></a> to avoid selecting merges for segments already
 being merged.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getPendingNumDocs()" class="member-name-link">getPendingNumDocs</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the number of documents in the index including documents are being added (i.e.,
 reserved).</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getTragicException()" class="member-name-link">getTragicException</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">If this <code>IndexWriter</code> was closed as a side-effect of a tragic exception, e.g.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#hasDeletions()" class="member-name-link">hasDeletions</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns true if this index has deletions (including buffered deletions).</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#hasPendingMerges()" class="member-name-link">hasPendingMerges</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Expert: returns true if there are merges waiting to be scheduled.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#hasUncommittedChanges()" class="member-name-link">hasUncommittedChanges</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns true if there may be changes that have not been committed.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#incRefDeleter(org.apache.lucene.index.SegmentInfos)" class="member-name-link">incRefDeleter</a><wbr>(<a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;segmentInfos)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Record that the files referenced by this <a href="SegmentInfos.html" title="class in org.apache.lucene.index"><code>SegmentInfos</code></a> are still in use.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isEnableTestPoints()" class="member-name-link">isEnableTestPoints</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Tests should override this to enable test points.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isOpen()" class="member-name-link">isOpen</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns <code>true</code> if this <code>IndexWriter</code> is still open.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#maybeMerge()" class="member-name-link">maybeMerge</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Expert: asks the mergePolicy whether any merges are necessary now and if so, runs the requested
 merges and then iterate (test again if merges are needed) until no more merges are returned by
 the mergePolicy.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#merge(org.apache.lucene.index.MergePolicy.OneMerge)" class="member-name-link">merge</a><wbr>(<a href="MergePolicy.OneMerge.html" title="class in org.apache.lucene.index">MergePolicy.OneMerge</a>&nbsp;merge)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Merges the indicated segments, replacing them in the stack with a single segment.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#mergeSuccess(org.apache.lucene.index.MergePolicy.OneMerge)" class="member-name-link">mergeSuccess</a><wbr>(<a href="MergePolicy.OneMerge.html" title="class in org.apache.lucene.index">MergePolicy.OneMerge</a>&nbsp;merge)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Hook that's called when the specified merge is complete.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#numDeletedDocs(org.apache.lucene.index.SegmentCommitInfo)" class="member-name-link">numDeletedDocs</a><wbr>(<a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>&nbsp;info)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Obtain the number of deleted docs for a pooled reader.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#numDeletesToMerge(org.apache.lucene.index.SegmentCommitInfo)" class="member-name-link">numDeletesToMerge</a><wbr>(<a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>&nbsp;info)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the number of deletes a merge would claim back if the given segment is merged.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#numRamDocs()" class="member-name-link">numRamDocs</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Expert: Return the number of documents currently buffered in RAM.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#onTragicEvent(java.lang.Throwable,java.lang.String)" class="member-name-link">onTragicEvent</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&nbsp;tragedy,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;location)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method should be called on a tragic event ie.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#prepareCommit()" class="member-name-link">prepareCommit</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Expert: prepare for commit.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#ramBytesUsed()" class="member-name-link">ramBytesUsed</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return the memory usage of this object in bytes.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#rollback()" class="member-name-link">rollback</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Close the <code>IndexWriter</code> without committing any changes that have occurred since the
 last commit (or since it was opened, if commit hasn't been called).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setLiveCommitData(java.lang.Iterable)" class="member-name-link">setLiveCommitData</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.Entry.html" title="class or interface in java.util" class="external-link">Map.Entry</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&gt;&nbsp;commitUserData)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sets the iterator to provide the commit user data map at commit time.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setLiveCommitData(java.lang.Iterable,boolean)" class="member-name-link">setLiveCommitData</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.Entry.html" title="class or interface in java.util" class="external-link">Map.Entry</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&gt;&nbsp;commitUserData,
 boolean&nbsp;doIncrementVersion)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sets the commit user data iterator, controlling whether to advance the <a href="SegmentInfos.html#getVersion()"><code>SegmentInfos.getVersion()</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#softUpdateDocument(org.apache.lucene.index.Term,java.lang.Iterable,org.apache.lucene.document.Field...)" class="member-name-link">softUpdateDocument</a><wbr>(<a href="Term.html" title="class in org.apache.lucene.index">Term</a>&nbsp;term,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;? extends <a href="IndexableField.html" title="interface in org.apache.lucene.index">IndexableField</a>&gt;&nbsp;doc,
 <a href="../document/Field.html" title="class in org.apache.lucene.document">Field</a>...&nbsp;softDeletes)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Expert: Updates a document by first updating the document(s) containing <code>term</code> with
 the given doc-values fields and then adding the new document.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#softUpdateDocuments(org.apache.lucene.index.Term,java.lang.Iterable,org.apache.lucene.document.Field...)" class="member-name-link">softUpdateDocuments</a><wbr>(<a href="Term.html" title="class in org.apache.lucene.index">Term</a>&nbsp;term,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;? extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;? extends <a href="IndexableField.html" title="interface in org.apache.lucene.index">IndexableField</a>&gt;&gt;&nbsp;docs,
 <a href="../document/Field.html" title="class in org.apache.lucene.document">Field</a>...&nbsp;softDeletes)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Expert: Atomically updates documents matching the provided term with the given doc-values
 fields and adds a block of documents with sequentially assigned document IDs, such that an
 external reader will see all or none of the documents.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tryDeleteDocument(org.apache.lucene.index.IndexReader,int)" class="member-name-link">tryDeleteDocument</a><wbr>(<a href="IndexReader.html" title="class in org.apache.lucene.index">IndexReader</a>&nbsp;readerIn,
 int&nbsp;docID)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Expert: attempts to delete by document ID, as long as the provided reader is a near-real-time
 reader (from <a href="DirectoryReader.html#open(org.apache.lucene.index.IndexWriter)"><code>DirectoryReader.open(IndexWriter)</code></a>).</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tryUpdateDocValue(org.apache.lucene.index.IndexReader,int,org.apache.lucene.document.Field...)" class="member-name-link">tryUpdateDocValue</a><wbr>(<a href="IndexReader.html" title="class in org.apache.lucene.index">IndexReader</a>&nbsp;readerIn,
 int&nbsp;docID,
 <a href="../document/Field.html" title="class in org.apache.lucene.document">Field</a>...&nbsp;fields)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Expert: attempts to update doc values by document ID, as long as the provided reader is a
 near-real-time reader (from <a href="DirectoryReader.html#open(org.apache.lucene.index.IndexWriter)"><code>DirectoryReader.open(IndexWriter)</code></a>).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateBinaryDocValue(org.apache.lucene.index.Term,java.lang.String,org.apache.lucene.util.BytesRef)" class="member-name-link">updateBinaryDocValue</a><wbr>(<a href="Term.html" title="class in org.apache.lucene.index">Term</a>&nbsp;term,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;field,
 <a href="../util/BytesRef.html" title="class in org.apache.lucene.util">BytesRef</a>&nbsp;value)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Updates a document's <a href="BinaryDocValues.html" title="class in org.apache.lucene.index"><code>BinaryDocValues</code></a> for <code>field</code> to the given <code>value
 </code>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateDocument(org.apache.lucene.index.Term,java.lang.Iterable)" class="member-name-link">updateDocument</a><wbr>(<a href="Term.html" title="class in org.apache.lucene.index">Term</a>&nbsp;term,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;? extends <a href="IndexableField.html" title="interface in org.apache.lucene.index">IndexableField</a>&gt;&nbsp;doc)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Updates a document by first deleting the document(s) containing <code>term</code> and then
 adding the new document.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateDocuments(org.apache.lucene.index.Term,java.lang.Iterable)" class="member-name-link">updateDocuments</a><wbr>(<a href="Term.html" title="class in org.apache.lucene.index">Term</a>&nbsp;delTerm,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;? extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;? extends <a href="IndexableField.html" title="interface in org.apache.lucene.index">IndexableField</a>&gt;&gt;&nbsp;docs)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Atomically deletes documents matching the provided delTerm and adds a block of documents with
 sequentially assigned document IDs, such that an external reader will see all or none of the
 documents.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateDocuments(org.apache.lucene.search.Query,java.lang.Iterable)" class="member-name-link">updateDocuments</a><wbr>(<a href="../search/Query.html" title="class in org.apache.lucene.search">Query</a>&nbsp;delQuery,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;? extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;? extends <a href="IndexableField.html" title="interface in org.apache.lucene.index">IndexableField</a>&gt;&gt;&nbsp;docs)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Similar to <a href="#updateDocuments(org.apache.lucene.index.Term,java.lang.Iterable)"><code>updateDocuments(Term, Iterable)</code></a>, but take a query instead of a term to
 identify the documents to be updated</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateDocValues(org.apache.lucene.index.Term,org.apache.lucene.document.Field...)" class="member-name-link">updateDocValues</a><wbr>(<a href="Term.html" title="class in org.apache.lucene.index">Term</a>&nbsp;term,
 <a href="../document/Field.html" title="class in org.apache.lucene.document">Field</a>...&nbsp;updates)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Updates documents' DocValues fields to the given values.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateNumericDocValue(org.apache.lucene.index.Term,java.lang.String,long)" class="member-name-link">updateNumericDocValue</a><wbr>(<a href="Term.html" title="class in org.apache.lucene.index">Term</a>&nbsp;term,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;field,
 long&nbsp;value)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Updates a document's <a href="NumericDocValues.html" title="class in org.apache.lucene.index"><code>NumericDocValues</code></a> for <code>field</code> to the given <code>value
 </code>.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone--" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals-java.lang.Object-" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize--" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass--" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode--" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify--" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll--" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString--" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait--" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait-long-" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait-long-int-" title="class or interface in java.lang" class="external-link">wait</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.apache.lucene.util.Accountable">Methods inherited from interface&nbsp;org.apache.lucene.util.<a href="../util/Accountable.html" title="interface in org.apache.lucene.util">Accountable</a></h3>
<code><a href="../util/Accountable.html#getChildResources()">getChildResources</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="MAX_DOCS">
<h3>MAX_DOCS</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">MAX_DOCS</span></div>
<div class="block">Hard limit on maximum number of documents that may be added to the index. If you try to add
 more than this you'll hit <code>IllegalArgumentException</code>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../constant-values.html#org.apache.lucene.index.IndexWriter.MAX_DOCS">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="MAX_POSITION">
<h3>MAX_POSITION</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">MAX_POSITION</span></div>
<div class="block">Maximum value of the token position in an indexed field.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../constant-values.html#org.apache.lucene.index.IndexWriter.MAX_POSITION">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="WRITE_LOCK_NAME">
<h3>WRITE_LOCK_NAME</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">WRITE_LOCK_NAME</span></div>
<div class="block">Name of the write lock in the index.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../constant-values.html#org.apache.lucene.index.IndexWriter.WRITE_LOCK_NAME">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="SOURCE">
<h3>SOURCE</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">SOURCE</span></div>
<div class="block">Key for the source of a segment in the <a href="SegmentInfo.html#getDiagnostics()"><code>diagnostics</code></a>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../constant-values.html#org.apache.lucene.index.IndexWriter.SOURCE">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="SOURCE_MERGE">
<h3>SOURCE_MERGE</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">SOURCE_MERGE</span></div>
<div class="block">Source of a segment which results from a merge of other segments.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../constant-values.html#org.apache.lucene.index.IndexWriter.SOURCE_MERGE">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="SOURCE_FLUSH">
<h3>SOURCE_FLUSH</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">SOURCE_FLUSH</span></div>
<div class="block">Source of a segment which results from a flush.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../constant-values.html#org.apache.lucene.index.IndexWriter.SOURCE_FLUSH">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="SOURCE_ADDINDEXES_READERS">
<h3>SOURCE_ADDINDEXES_READERS</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">SOURCE_ADDINDEXES_READERS</span></div>
<div class="block">Source of a segment which results from a call to <a href="#addIndexes(org.apache.lucene.index.CodecReader...)"><code>addIndexes(CodecReader...)</code></a>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../constant-values.html#org.apache.lucene.index.IndexWriter.SOURCE_ADDINDEXES_READERS">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="MAX_TERM_LENGTH">
<h3>MAX_TERM_LENGTH</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">MAX_TERM_LENGTH</span></div>
<div class="block">Absolute hard maximum length for a term, in bytes once encoded as UTF8. If a term arrives from
 the analyzer longer than this length, an <code>IllegalArgumentException</code> is thrown and a
 message is printed to infoStream, if set (see <a href="IndexWriterConfig.html#setInfoStream(org.apache.lucene.util.InfoStream)"><code>IndexWriterConfig.setInfoStream(InfoStream)</code></a>).</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../constant-values.html#org.apache.lucene.index.IndexWriter.MAX_TERM_LENGTH">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="MAX_STORED_STRING_LENGTH">
<h3>MAX_STORED_STRING_LENGTH</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">MAX_STORED_STRING_LENGTH</span></div>
<div class="block">Maximum length string for a stored field.</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(org.apache.lucene.store.Directory,org.apache.lucene.index.IndexWriterConfig)">
<h3>IndexWriter</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">IndexWriter</span><wbr><span class="parameters">(<a href="../store/Directory.html" title="class in org.apache.lucene.store">Directory</a>&nbsp;d,
 <a href="IndexWriterConfig.html" title="class in org.apache.lucene.index">IndexWriterConfig</a>&nbsp;conf)</span>
            throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Constructs a new IndexWriter per the settings given in <code>conf</code>. If you want to make
 "live" changes to this writer instance, use <a href="#getConfig()"><code>getConfig()</code></a>.

 <p><b>NOTE:</b> after ths writer is created, the given configuration instance cannot be passed
 to another writer.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>d</code> - the index directory. The index is either created or appended according <code>
     conf.getOpenMode()</code>.</dd>
<dd><code>conf</code> - the configuration settings according to which IndexWriter should be initialized.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if the directory cannot be read/written to, or if it does not exist and
     <code>conf.getOpenMode()</code> is <code>OpenMode.APPEND</code> or if there is any other
     low-level IO error</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="ramBytesUsed()">
<h3>ramBytesUsed</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">ramBytesUsed</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="../util/Accountable.html#ramBytesUsed()">Accountable</a></code></span></div>
<div class="block">Return the memory usage of this object in bytes. Negative values are illegal.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../util/Accountable.html#ramBytesUsed()">ramBytesUsed</a></code>&nbsp;in interface&nbsp;<code><a href="../util/Accountable.html" title="interface in org.apache.lucene.util">Accountable</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getFlushingBytes()">
<h3>getFlushingBytes</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getFlushingBytes</span>()</div>
<div class="block">Returns the number of bytes currently being flushed</div>
</section>
</li>
<li>
<section class="detail" id="numDeletedDocs(org.apache.lucene.index.SegmentCommitInfo)">
<h3>numDeletedDocs</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">numDeletedDocs</span><wbr><span class="parameters">(<a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>&nbsp;info)</span></div>
<div class="block">Obtain the number of deleted docs for a pooled reader. If the reader isn't being pooled, the
 segmentInfo's delCount is returned.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="MergePolicy.MergeContext.html#numDeletedDocs(org.apache.lucene.index.SegmentCommitInfo)">numDeletedDocs</a></code>&nbsp;in interface&nbsp;<code><a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="ensureOpen(boolean)">
<h3>ensureOpen</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">ensureOpen</span><wbr><span class="parameters">(boolean&nbsp;failIfClosing)</span>
                         throws <span class="exceptions"><a href="../store/AlreadyClosedException.html" title="class in org.apache.lucene.store">AlreadyClosedException</a></span></div>
<div class="block">Used internally to throw an <a href="../store/AlreadyClosedException.html" title="class in org.apache.lucene.store"><code>AlreadyClosedException</code></a> if this IndexWriter has been closed
 or is in the process of closing.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>failIfClosing</code> - if true, also fail when <code>IndexWriter</code> is in the process of closing
     (<code>closing=true</code>) but not yet done closing ( <code>closed=false</code>)</dd>
<dt>Throws:</dt>
<dd><code><a href="../store/AlreadyClosedException.html" title="class in org.apache.lucene.store">AlreadyClosedException</a></code> - if this IndexWriter is closed or in the process of closing</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="ensureOpen()">
<h3>ensureOpen</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">ensureOpen</span>()
                         throws <span class="exceptions"><a href="../store/AlreadyClosedException.html" title="class in org.apache.lucene.store">AlreadyClosedException</a></span></div>
<div class="block">Used internally to throw an <a href="../store/AlreadyClosedException.html" title="class in org.apache.lucene.store"><code>AlreadyClosedException</code></a> if this IndexWriter has been closed
 (<code>closed=true</code>) or is in the process of closing (<code>closing=true</code>).

 <p>Calls <a href="#ensureOpen(boolean)"><code>ensureOpen(true)</code></a>.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="../store/AlreadyClosedException.html" title="class in org.apache.lucene.store">AlreadyClosedException</a></code> - if this IndexWriter is closed</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getConfig()">
<h3>getConfig</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="LiveIndexWriterConfig.html" title="class in org.apache.lucene.index">LiveIndexWriterConfig</a></span>&nbsp;<span class="element-name">getConfig</span>()</div>
<div class="block">Returns a <a href="LiveIndexWriterConfig.html" title="class in org.apache.lucene.index"><code>LiveIndexWriterConfig</code></a>, which can be used to query the IndexWriter current
 settings, as well as modify "live" ones.</div>
</section>
</li>
<li>
<section class="detail" id="close()">
<h3>close</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">close</span>()
           throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Closes all open resources and releases the write lock.

 <p>If <a href="LiveIndexWriterConfig.html#commitOnClose"><code>LiveIndexWriterConfig.commitOnClose</code></a> is <code>true</code>, this will attempt to
 gracefully shut down by writing any changes, waiting for any running merges, committing, and
 closing. In this case, note that:

 <ul>
   <li>If you called prepareCommit but failed to call commit, this method will throw <code>
       IllegalStateException</code> and the <code>IndexWriter</code> will not be closed.
   <li>If this method throws any other exception, the <code>IndexWriter</code> will be closed, but
       changes may have been lost.
 </ul>

 <p>Note that this may be a costly operation, so, try to re-use a single writer instead of
 closing and opening a new one. See <a href="#commit()"><code>commit()</code></a> for caveats about write caching done by
 some IO devices.

 <p><b>NOTE</b>: You must ensure no other threads are still making changes at the same time that
 this method is invoked.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/AutoCloseable.html#close--" title="class or interface in java.lang" class="external-link">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/AutoCloseable.html" title="class or interface in java.lang" class="external-link">AutoCloseable</a></code></dd>
<dt>Specified by:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/Closeable.html#close--" title="class or interface in java.io" class="external-link">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/Closeable.html" title="class or interface in java.io" class="external-link">Closeable</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getDirectory()">
<h3>getDirectory</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../store/Directory.html" title="class in org.apache.lucene.store">Directory</a></span>&nbsp;<span class="element-name">getDirectory</span>()</div>
<div class="block">Returns the Directory used by this index.</div>
</section>
</li>
<li>
<section class="detail" id="getInfoStream()">
<h3>getInfoStream</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../util/InfoStream.html" title="class in org.apache.lucene.util">InfoStream</a></span>&nbsp;<span class="element-name">getInfoStream</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="MergePolicy.MergeContext.html#getInfoStream()">MergePolicy.MergeContext</a></code></span></div>
<div class="block">Returns the info stream that can be used to log messages</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="MergePolicy.MergeContext.html#getInfoStream()">getInfoStream</a></code>&nbsp;in interface&nbsp;<code><a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAnalyzer()">
<h3>getAnalyzer</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../analysis/Analyzer.html" title="class in org.apache.lucene.analysis">Analyzer</a></span>&nbsp;<span class="element-name">getAnalyzer</span>()</div>
<div class="block">Returns the analyzer used by this index.</div>
</section>
</li>
<li>
<section class="detail" id="advanceSegmentInfosVersion(long)">
<h3>advanceSegmentInfosVersion</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">advanceSegmentInfosVersion</span><wbr><span class="parameters">(long&nbsp;newVersion)</span></div>
<div class="block">If <a href="SegmentInfos.html#getVersion()"><code>SegmentInfos.getVersion()</code></a> is below <code>newVersion</code> then update it to this value.</div>
<dl class="notes">
<dt>NOTE: This API is for internal purposes only and might change in incompatible ways in the next release.</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="hasDeletions()">
<h3>hasDeletions</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">hasDeletions</span>()</div>
<div class="block">Returns true if this index has deletions (including buffered deletions). Note that this will
 return true if there are buffered Term/Query deletions, even if it turns out those buffered
 deletions don't match any documents.</div>
</section>
</li>
<li>
<section class="detail" id="addDocument(java.lang.Iterable)">
<h3>addDocument</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">addDocument</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;? extends <a href="IndexableField.html" title="interface in org.apache.lucene.index">IndexableField</a>&gt;&nbsp;doc)</span>
                 throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Adds a document to this index.

 <p>Note that if an Exception is hit (for example disk full) then the index will be consistent,
 but this document may not have been added. Furthermore, it's possible the index will have one
 segment in non-compound format even when using compound files (when a merge has partially
 succeeded).

 <p>This method periodically flushes pending documents to the Directory (see <a href="#flush">above</a>), and also periodically triggers segment merges in the index according
 to the <a href="MergePolicy.html" title="class in org.apache.lucene.index"><code>MergePolicy</code></a> in use.

 <p>Merges temporarily consume space in the directory. The amount of space required is up to 1X
 the size of all segments being merged, when no readers/searchers are open against the index,
 and up to 2X the size of all segments being merged when readers/searchers are open against the
 index (see <a href="#forceMerge(int)"><code>forceMerge(int)</code></a> for details). The sequence of primitive merge operations
 performed is governed by the merge policy.

 <p>Note that each term in the document can be no longer than <a href="#MAX_TERM_LENGTH"><code>MAX_TERM_LENGTH</code></a> in bytes,
 otherwise an IllegalArgumentException will be thrown.

 <p>Note that it's possible to create an invalid Unicode string in java if a UTF16 surrogate
 pair is malformed. In this case, the invalid characters are silently replaced with the Unicode
 replacement character U+FFFD.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The <a href="#sequence_number">sequence number</a> for this operation</dd>
<dt>Throws:</dt>
<dd><code><a href="CorruptIndexException.html" title="class in org.apache.lucene.index">CorruptIndexException</a></code> - if the index is corrupt</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if there is a low-level IO error</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addDocuments(java.lang.Iterable)">
<h3>addDocuments</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">addDocuments</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;? extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;? extends <a href="IndexableField.html" title="interface in org.apache.lucene.index">IndexableField</a>&gt;&gt;&nbsp;docs)</span>
                  throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Atomically adds a block of documents with sequentially assigned document IDs, such that an
 external reader will see all or none of the documents.

 <p><b>WARNING</b>: the index does not currently record which documents were added as a block.
 Today this is fine, because merging will preserve a block. The order of documents within a
 segment will be preserved, even when child documents within a block are deleted. Most search
 features (like result grouping and block joining) require you to mark documents; when these
 documents are deleted these search features will not work as expected. Obviously adding
 documents to an existing block will require you the reindex the entire block.

 <p>However it's possible that in the future Lucene may merge more aggressively re-order
 documents (for example, perhaps to obtain better index compression), in which case you may need
 to fully re-index your documents at that time.

 <p>See <a href="#addDocument(java.lang.Iterable)"><code>addDocument(Iterable)</code></a> for details on index and IndexWriter state after an
 Exception, and flushing/merging temporary free space requirements.

 <p><b>NOTE</b>: tools that do offline splitting of an index (for example, IndexSplitter in
 contrib) or re-sorting of documents (for example, IndexSorter in contrib) are not aware of
 these atomically added documents and will likely break them up. Use such tools at your own
 risk!</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The <a href="#sequence_number">sequence number</a> for this operation</dd>
<dt>Throws:</dt>
<dd><code><a href="CorruptIndexException.html" title="class in org.apache.lucene.index">CorruptIndexException</a></code> - if the index is corrupt</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if there is a low-level IO error</dd>
<dt>WARNING: This API is experimental and might change in incompatible ways in the next release.</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateDocuments(org.apache.lucene.index.Term,java.lang.Iterable)">
<h3>updateDocuments</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">updateDocuments</span><wbr><span class="parameters">(<a href="Term.html" title="class in org.apache.lucene.index">Term</a>&nbsp;delTerm,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;? extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;? extends <a href="IndexableField.html" title="interface in org.apache.lucene.index">IndexableField</a>&gt;&gt;&nbsp;docs)</span>
                     throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Atomically deletes documents matching the provided delTerm and adds a block of documents with
 sequentially assigned document IDs, such that an external reader will see all or none of the
 documents.

 <p>See <a href="#addDocuments(java.lang.Iterable)"><code>addDocuments(Iterable)</code></a>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The <a href="#sequence_number">sequence number</a> for this operation</dd>
<dt>Throws:</dt>
<dd><code><a href="CorruptIndexException.html" title="class in org.apache.lucene.index">CorruptIndexException</a></code> - if the index is corrupt</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if there is a low-level IO error</dd>
<dt>WARNING: This API is experimental and might change in incompatible ways in the next release.</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateDocuments(org.apache.lucene.search.Query,java.lang.Iterable)">
<h3>updateDocuments</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">updateDocuments</span><wbr><span class="parameters">(<a href="../search/Query.html" title="class in org.apache.lucene.search">Query</a>&nbsp;delQuery,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;? extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;? extends <a href="IndexableField.html" title="interface in org.apache.lucene.index">IndexableField</a>&gt;&gt;&nbsp;docs)</span>
                     throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Similar to <a href="#updateDocuments(org.apache.lucene.index.Term,java.lang.Iterable)"><code>updateDocuments(Term, Iterable)</code></a>, but take a query instead of a term to
 identify the documents to be updated</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
<dt>WARNING: This API is experimental and might change in incompatible ways in the next release.</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="softUpdateDocuments(org.apache.lucene.index.Term,java.lang.Iterable,org.apache.lucene.document.Field...)">
<h3>softUpdateDocuments</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">softUpdateDocuments</span><wbr><span class="parameters">(<a href="Term.html" title="class in org.apache.lucene.index">Term</a>&nbsp;term,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;? extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;? extends <a href="IndexableField.html" title="interface in org.apache.lucene.index">IndexableField</a>&gt;&gt;&nbsp;docs,
 <a href="../document/Field.html" title="class in org.apache.lucene.document">Field</a>...&nbsp;softDeletes)</span>
                         throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Expert: Atomically updates documents matching the provided term with the given doc-values
 fields and adds a block of documents with sequentially assigned document IDs, such that an
 external reader will see all or none of the documents.

 <p>One use of this API is to retain older versions of documents instead of replacing them. The
 existing documents can be updated to reflect they are no longer current while atomically adding
 new documents at the same time.

 <p>In contrast to <a href="#updateDocuments(org.apache.lucene.index.Term,java.lang.Iterable)"><code>updateDocuments(Term, Iterable)</code></a> this method will not delete
 documents in the index matching the given term but instead update them with the given
 doc-values fields which can be used as a soft-delete mechanism.

 <p>See <a href="#addDocuments(java.lang.Iterable)"><code>addDocuments(Iterable)</code></a> and <a href="#updateDocuments(org.apache.lucene.index.Term,java.lang.Iterable)"><code>updateDocuments(Term, Iterable)</code></a>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The <a href="#sequence_number">sequence number</a> for this operation</dd>
<dt>Throws:</dt>
<dd><code><a href="CorruptIndexException.html" title="class in org.apache.lucene.index">CorruptIndexException</a></code> - if the index is corrupt</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if there is a low-level IO error</dd>
<dt>WARNING: This API is experimental and might change in incompatible ways in the next release.</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="tryDeleteDocument(org.apache.lucene.index.IndexReader,int)">
<h3>tryDeleteDocument</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">tryDeleteDocument</span><wbr><span class="parameters">(<a href="IndexReader.html" title="class in org.apache.lucene.index">IndexReader</a>&nbsp;readerIn,
 int&nbsp;docID)</span>
                       throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Expert: attempts to delete by document ID, as long as the provided reader is a near-real-time
 reader (from <a href="DirectoryReader.html#open(org.apache.lucene.index.IndexWriter)"><code>DirectoryReader.open(IndexWriter)</code></a>). If the provided reader is an NRT
 reader obtained from this writer, and its segment has not been merged away, then the delete
 succeeds and this method returns a valid (&gt; 0) sequence number; else, it returns -1 and the
 caller must then separately delete by Term or Query.

 <p><b>NOTE</b>: this method can only delete documents visible to the currently open NRT reader.
 If you need to delete documents indexed after opening the NRT reader you must use <a href="#deleteDocuments(org.apache.lucene.index.Term...)"><code>deleteDocuments(Term...)</code></a>).</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="tryUpdateDocValue(org.apache.lucene.index.IndexReader,int,org.apache.lucene.document.Field...)">
<h3>tryUpdateDocValue</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">tryUpdateDocValue</span><wbr><span class="parameters">(<a href="IndexReader.html" title="class in org.apache.lucene.index">IndexReader</a>&nbsp;readerIn,
 int&nbsp;docID,
 <a href="../document/Field.html" title="class in org.apache.lucene.document">Field</a>...&nbsp;fields)</span>
                       throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Expert: attempts to update doc values by document ID, as long as the provided reader is a
 near-real-time reader (from <a href="DirectoryReader.html#open(org.apache.lucene.index.IndexWriter)"><code>DirectoryReader.open(IndexWriter)</code></a>). If the provided reader
 is an NRT reader obtained from this writer, and its segment has not been merged away, then the
 update succeeds and this method returns a valid (&gt; 0) sequence number; else, it returns -1
 and the caller must then either retry the update and resolve the document again. If a doc
 values fields data is <code>null</code> the existing value is removed from all documents
 matching the term. This can be used to un-delete a soft-deleted document since this method will
 apply the field update even if the document is marked as deleted.

 <p><b>NOTE</b>: this method can only updates documents visible to the currently open NRT
 reader. If you need to update documents indexed after opening the NRT reader you must use
 <a href="#updateDocValues(org.apache.lucene.index.Term,org.apache.lucene.document.Field...)"><code>updateDocValues(Term, Field...)</code></a>.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="deleteDocuments(org.apache.lucene.index.Term...)">
<h3>deleteDocuments</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">deleteDocuments</span><wbr><span class="parameters">(<a href="Term.html" title="class in org.apache.lucene.index">Term</a>...&nbsp;terms)</span>
                     throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Deletes the document(s) containing any of the terms. All given deletes are applied and flushed
 atomically at the same time.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>terms</code> - array of terms to identify the documents to be deleted</dd>
<dt>Returns:</dt>
<dd>The <a href="#sequence_number">sequence number</a> for this operation</dd>
<dt>Throws:</dt>
<dd><code><a href="CorruptIndexException.html" title="class in org.apache.lucene.index">CorruptIndexException</a></code> - if the index is corrupt</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if there is a low-level IO error</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="deleteDocuments(org.apache.lucene.search.Query...)">
<h3>deleteDocuments</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">deleteDocuments</span><wbr><span class="parameters">(<a href="../search/Query.html" title="class in org.apache.lucene.search">Query</a>...&nbsp;queries)</span>
                     throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Deletes the document(s) matching any of the provided queries. All given deletes are applied and
 flushed atomically at the same time.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>queries</code> - array of queries to identify the documents to be deleted</dd>
<dt>Returns:</dt>
<dd>The <a href="#sequence_number">sequence number</a> for this operation</dd>
<dt>Throws:</dt>
<dd><code><a href="CorruptIndexException.html" title="class in org.apache.lucene.index">CorruptIndexException</a></code> - if the index is corrupt</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if there is a low-level IO error</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateDocument(org.apache.lucene.index.Term,java.lang.Iterable)">
<h3>updateDocument</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">updateDocument</span><wbr><span class="parameters">(<a href="Term.html" title="class in org.apache.lucene.index">Term</a>&nbsp;term,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;? extends <a href="IndexableField.html" title="interface in org.apache.lucene.index">IndexableField</a>&gt;&nbsp;doc)</span>
                    throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Updates a document by first deleting the document(s) containing <code>term</code> and then
 adding the new document. The delete and then add are atomic as seen by a reader on the same
 index (flush may happen only after the add).</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>term</code> - the term to identify the document(s) to be deleted</dd>
<dd><code>doc</code> - the document to be added</dd>
<dt>Returns:</dt>
<dd>The <a href="#sequence_number">sequence number</a> for this operation</dd>
<dt>Throws:</dt>
<dd><code><a href="CorruptIndexException.html" title="class in org.apache.lucene.index">CorruptIndexException</a></code> - if the index is corrupt</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if there is a low-level IO error</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="softUpdateDocument(org.apache.lucene.index.Term,java.lang.Iterable,org.apache.lucene.document.Field...)">
<h3>softUpdateDocument</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">softUpdateDocument</span><wbr><span class="parameters">(<a href="Term.html" title="class in org.apache.lucene.index">Term</a>&nbsp;term,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;? extends <a href="IndexableField.html" title="interface in org.apache.lucene.index">IndexableField</a>&gt;&nbsp;doc,
 <a href="../document/Field.html" title="class in org.apache.lucene.document">Field</a>...&nbsp;softDeletes)</span>
                        throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Expert: Updates a document by first updating the document(s) containing <code>term</code> with
 the given doc-values fields and then adding the new document. The doc-values update and then
 add are atomic as seen by a reader on the same index (flush may happen only after the add).

 <p>One use of this API is to retain older versions of documents instead of replacing them. The
 existing documents can be updated to reflect they are no longer current while atomically adding
 new documents at the same time.

 <p>In contrast to <a href="#updateDocument(org.apache.lucene.index.Term,java.lang.Iterable)"><code>updateDocument(Term, Iterable)</code></a> this method will not delete documents
 in the index matching the given term but instead update them with the given doc-values fields
 which can be used as a soft-delete mechanism.

 <p>See <a href="#addDocuments(java.lang.Iterable)"><code>addDocuments(Iterable)</code></a> and <a href="#updateDocuments(org.apache.lucene.index.Term,java.lang.Iterable)"><code>updateDocuments(Term, Iterable)</code></a>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The <a href="#sequence_number">sequence number</a> for this operation</dd>
<dt>Throws:</dt>
<dd><code><a href="CorruptIndexException.html" title="class in org.apache.lucene.index">CorruptIndexException</a></code> - if the index is corrupt</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if there is a low-level IO error</dd>
<dt>WARNING: This API is experimental and might change in incompatible ways in the next release.</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateNumericDocValue(org.apache.lucene.index.Term,java.lang.String,long)">
<h3>updateNumericDocValue</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">updateNumericDocValue</span><wbr><span class="parameters">(<a href="Term.html" title="class in org.apache.lucene.index">Term</a>&nbsp;term,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;field,
 long&nbsp;value)</span>
                           throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Updates a document's <a href="NumericDocValues.html" title="class in org.apache.lucene.index"><code>NumericDocValues</code></a> for <code>field</code> to the given <code>value
 </code>. You can only update fields that already exist in the index, not add new fields through
 this method. You can only update fields that were indexed with doc values only.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>term</code> - the term to identify the document(s) to be updated</dd>
<dd><code>field</code> - field name of the <a href="NumericDocValues.html" title="class in org.apache.lucene.index"><code>NumericDocValues</code></a> field</dd>
<dd><code>value</code> - new value for the field</dd>
<dt>Returns:</dt>
<dd>The <a href="#sequence_number">sequence number</a> for this operation</dd>
<dt>Throws:</dt>
<dd><code><a href="CorruptIndexException.html" title="class in org.apache.lucene.index">CorruptIndexException</a></code> - if the index is corrupt</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if there is a low-level IO error</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateBinaryDocValue(org.apache.lucene.index.Term,java.lang.String,org.apache.lucene.util.BytesRef)">
<h3>updateBinaryDocValue</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">updateBinaryDocValue</span><wbr><span class="parameters">(<a href="Term.html" title="class in org.apache.lucene.index">Term</a>&nbsp;term,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;field,
 <a href="../util/BytesRef.html" title="class in org.apache.lucene.util">BytesRef</a>&nbsp;value)</span>
                          throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Updates a document's <a href="BinaryDocValues.html" title="class in org.apache.lucene.index"><code>BinaryDocValues</code></a> for <code>field</code> to the given <code>value
 </code>. You can only update fields that already exist in the index, not add new fields through
 this method. You can only update fields that were indexed only with doc values.

 <p><b>NOTE:</b> this method currently replaces the existing value of all affected documents
 with the new value.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>term</code> - the term to identify the document(s) to be updated</dd>
<dd><code>field</code> - field name of the <a href="BinaryDocValues.html" title="class in org.apache.lucene.index"><code>BinaryDocValues</code></a> field</dd>
<dd><code>value</code> - new value for the field</dd>
<dt>Returns:</dt>
<dd>The <a href="#sequence_number">sequence number</a> for this operation</dd>
<dt>Throws:</dt>
<dd><code><a href="CorruptIndexException.html" title="class in org.apache.lucene.index">CorruptIndexException</a></code> - if the index is corrupt</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if there is a low-level IO error</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateDocValues(org.apache.lucene.index.Term,org.apache.lucene.document.Field...)">
<h3>updateDocValues</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">updateDocValues</span><wbr><span class="parameters">(<a href="Term.html" title="class in org.apache.lucene.index">Term</a>&nbsp;term,
 <a href="../document/Field.html" title="class in org.apache.lucene.document">Field</a>...&nbsp;updates)</span>
                     throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Updates documents' DocValues fields to the given values. Each field update is applied to the
 set of documents that are associated with the <a href="Term.html" title="class in org.apache.lucene.index"><code>Term</code></a> to the same value. All updates are
 atomically applied and flushed together. If a doc values fields data is <code>null</code> the
 existing value is removed from all documents matching the term.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>updates</code> - the updates to apply</dd>
<dt>Returns:</dt>
<dd>The <a href="#sequence_number">sequence number</a> for this operation</dd>
<dt>Throws:</dt>
<dd><code><a href="CorruptIndexException.html" title="class in org.apache.lucene.index">CorruptIndexException</a></code> - if the index is corrupt</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if there is a low-level IO error</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getFieldNames()">
<h3>getFieldNames</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="element-name">getFieldNames</span>()</div>
<div class="block">Return an unmodifiable set of all field names as visible from this IndexWriter, across all
 segments of the index.</div>
<dl class="notes">
<dt>WARNING: This API is experimental and might change in incompatible ways in the next release.</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="forceMerge(int)">
<h3>forceMerge</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">forceMerge</span><wbr><span class="parameters">(int&nbsp;maxNumSegments)</span>
                throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Forces merge policy to merge segments until there are <code>&lt;= maxNumSegments</code>. The actual
 merges to be executed are determined by the <a href="MergePolicy.html" title="class in org.apache.lucene.index"><code>MergePolicy</code></a>.

 <p>This is a horribly costly operation, especially when you pass a small <code>
 maxNumSegments</code>; usually you should only call this if the index is static (will no longer be
 changed).

 <p>Note that this requires free space that is proportional to the size of the index in your
 Directory: 2X if you are not using compound file format, and 3X if you are. For example, if
 your index size is 10 MB then you need an additional 20 MB free for this to complete (30 MB if
 you're using compound file format). This is also affected by the <a href="../codecs/Codec.html" title="class in org.apache.lucene.codecs"><code>Codec</code></a> that is used to
 execute the merge, and may result in even a bigger index. Also, it's best to call <a href="#commit()"><code>commit()</code></a> afterwards, to allow IndexWriter to free up disk space.

 <p>If some but not all readers re-open while merging is underway, this will cause <code>&gt; 2X</code>
 temporary space to be consumed as those new readers will then hold open the temporary segments
 at that time. It is best not to re-open readers while merging is running.

 <p>The actual temporary usage could be much less than these figures (it depends on many
 factors).

 <p>In general, once this completes, the total size of the index will be less than the size of
 the starting index. It could be quite a bit smaller (if there were many pending deletes) or
 just slightly smaller.

 <p>If an Exception is hit, for example due to disk full, the index will not be corrupted and no
 documents will be lost. However, it may have been partially merged (some segments were merged
 but not all), and it's possible that one of the segments in the index will be in non-compound
 format even when using compound file format. This will occur when the Exception is hit during
 conversion of the segment into compound format.

 <p>This call will merge those segments present in the index when the call started. If other
 threads are still adding documents and flushing segments, those newly created segments will not
 be merged unless you call forceMerge again.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>maxNumSegments</code> - maximum number of segments left in the index after merging finishes</dd>
<dt>Throws:</dt>
<dd><code><a href="CorruptIndexException.html" title="class in org.apache.lucene.index">CorruptIndexException</a></code> - if the index is corrupt</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if there is a low-level IO error</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="MergePolicy.html#findMerges(org.apache.lucene.index.MergeTrigger,org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.MergePolicy.MergeContext)"><code>MergePolicy.findMerges(org.apache.lucene.index.MergeTrigger, org.apache.lucene.index.SegmentInfos, org.apache.lucene.index.MergePolicy.MergeContext)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="forceMerge(int,boolean)">
<h3>forceMerge</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">forceMerge</span><wbr><span class="parameters">(int&nbsp;maxNumSegments,
 boolean&nbsp;doWait)</span>
                throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Just like <a href="#forceMerge(int)"><code>forceMerge(int)</code></a>, except you can specify whether the call should block until
 all merging completes. This is only meaningful with a <a href="MergeScheduler.html" title="class in org.apache.lucene.index"><code>MergeScheduler</code></a> that is able to
 run merges in background threads.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="forceMergeDeletes(boolean)">
<h3>forceMergeDeletes</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">forceMergeDeletes</span><wbr><span class="parameters">(boolean&nbsp;doWait)</span>
                       throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Just like <a href="#forceMergeDeletes()"><code>forceMergeDeletes()</code></a>, except you can specify whether the call should block
 until the operation completes. This is only meaningful with a <a href="MergeScheduler.html" title="class in org.apache.lucene.index"><code>MergeScheduler</code></a> that is
 able to run merges in background threads.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="forceMergeDeletes()">
<h3>forceMergeDeletes</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">forceMergeDeletes</span>()
                       throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Forces merging of all segments that have deleted documents. The actual merges to be executed
 are determined by the <a href="MergePolicy.html" title="class in org.apache.lucene.index"><code>MergePolicy</code></a>. For example, the default <a href="TieredMergePolicy.html" title="class in org.apache.lucene.index"><code>TieredMergePolicy</code></a>
 will only pick a segment if the percentage of deleted docs is over 10%.

 <p>This is often a horribly costly operation; rarely is it warranted.

 <p>To see how many deletions you have pending in your index, call <a href="IndexReader.html#numDeletedDocs()"><code>IndexReader.numDeletedDocs()</code></a>.

 <p><b>NOTE</b>: this method first flushes a new segment (if there are indexed documents), and
 applies all buffered deletes.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="maybeMerge()">
<h3>maybeMerge</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">maybeMerge</span>()
                      throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Expert: asks the mergePolicy whether any merges are necessary now and if so, runs the requested
 merges and then iterate (test again if merges are needed) until no more merges are returned by
 the mergePolicy.

 <p>Explicit calls to maybeMerge() are usually not necessary. The most common case is when merge
 policy parameters have changed.

 <p>This method will call the <a href="MergePolicy.html" title="class in org.apache.lucene.index"><code>MergePolicy</code></a> with <a href="MergeTrigger.html#EXPLICIT"><code>MergeTrigger.EXPLICIT</code></a>.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMergingSegments()">
<h3>getMergingSegments</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>&gt;</span>&nbsp;<span class="element-name">getMergingSegments</span>()</div>
<div class="block">Expert: to be used by a <a href="MergePolicy.html" title="class in org.apache.lucene.index"><code>MergePolicy</code></a> to avoid selecting merges for segments already
 being merged. The returned collection is not cloned, and thus is only safe to access if you
 hold IndexWriter's lock (which you do when IndexWriter invokes the MergePolicy).

 <p>The Set is unmodifiable.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="MergePolicy.MergeContext.html#getMergingSegments()">getMergingSegments</a></code>&nbsp;in interface&nbsp;<code><a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="hasPendingMerges()">
<h3>hasPendingMerges</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">hasPendingMerges</span>()</div>
<div class="block">Expert: returns true if there are merges waiting to be scheduled.</div>
<dl class="notes">
<dt>WARNING: This API is experimental and might change in incompatible ways in the next release.</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="rollback()">
<h3>rollback</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">rollback</span>()
              throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Close the <code>IndexWriter</code> without committing any changes that have occurred since the
 last commit (or since it was opened, if commit hasn't been called). This removes any temporary
 files that had been created, after which the state of the index will be the same as it was when
 commit() was last called or when this writer was first opened. This also clears a previous call
 to <a href="#prepareCommit()"><code>prepareCommit()</code></a>.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="TwoPhaseCommit.html#rollback()">rollback</a></code>&nbsp;in interface&nbsp;<code><a href="TwoPhaseCommit.html" title="interface in org.apache.lucene.index">TwoPhaseCommit</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if there is a low-level IO error</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="deleteAll()">
<h3>deleteAll</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">deleteAll</span>()
               throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Delete all documents in the index.

 <p>This method will drop all buffered documents and will remove all segments from the index.
 This change will not be visible until a <a href="#commit()"><code>commit()</code></a> has been called. This method can be
 rolled back using <a href="#rollback()"><code>rollback()</code></a>.

 <p>NOTE: this method is much faster than using deleteDocuments( new MatchAllDocsQuery() ). Yet,
 this method also has different semantics compared to <a href="#deleteDocuments(org.apache.lucene.search.Query...)"><code>deleteDocuments(Query...)</code></a> since
 internal data-structures are cleared as well as all segment information is forcefully dropped
 anti-viral semantics like omitting norms are reset or doc value types are cleared. Essentially
 a call to <a href="#deleteAll()"><code>deleteAll()</code></a> is equivalent to creating a new <a href="IndexWriter.html" title="class in org.apache.lucene.index"><code>IndexWriter</code></a> with <a href="IndexWriterConfig.OpenMode.html#CREATE"><code>IndexWriterConfig.OpenMode.CREATE</code></a> which a delete query only marks documents as deleted.

 <p>NOTE: this method will forcefully abort all merges in progress. If other threads are running
 <a href="#forceMerge(int)"><code>forceMerge(int)</code></a>, <a href="#addIndexes(org.apache.lucene.index.CodecReader...)"><code>addIndexes(CodecReader[])</code></a> or <a href="#forceMergeDeletes(boolean)"><code>forceMergeDeletes(boolean)</code></a> methods,
 they may receive <a href="MergePolicy.MergeAbortedException.html" title="class in org.apache.lucene.index"><code>MergePolicy.MergeAbortedException</code></a>s.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The <a href="#sequence_number">sequence number</a> for this operation</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addIndexes(org.apache.lucene.store.Directory...)">
<h3>addIndexes</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">addIndexes</span><wbr><span class="parameters">(<a href="../store/Directory.html" title="class in org.apache.lucene.store">Directory</a>...&nbsp;dirs)</span>
                throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Adds all segments from an array of indexes into this index.

 <p>This may be used to parallelize batch indexing. A large document collection can be broken
 into sub-collections. Each sub-collection can be indexed in parallel, on a different thread,
 process or machine. The complete index can then be created by merging sub-collection indexes
 with this method.

 <p><b>NOTE:</b> this method acquires the write lock in each directory, to ensure that no <code>
 IndexWriter</code> is currently open or tries to open while this is running.

 <p>This method is transactional in how Exceptions are handled: it does not commit a new
 segments_N file until all indexes are added. This means if an Exception occurs (for example
 disk full), then either no indexes will have been added or they all will have been.

 <p>Note that this requires temporary free space in the <a href="../store/Directory.html" title="class in org.apache.lucene.store"><code>Directory</code></a> up to 2X the sum of
 all input indexes (including the starting index). If readers/searchers are open against the
 starting index, then temporary free space required will be higher by the size of the starting
 index (see <a href="#forceMerge(int)"><code>forceMerge(int)</code></a> for details).

 <p>This requires this index not be among those to be added.

 <p>All added indexes must have been created by the same Lucene version as this index.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The <a href="#sequence_number">sequence number</a> for this operation</dd>
<dt>Throws:</dt>
<dd><code><a href="CorruptIndexException.html" title="class in org.apache.lucene.index">CorruptIndexException</a></code> - if the index is corrupt</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if there is a low-level IO error</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if addIndexes would cause the index to exceed <a href="#MAX_DOCS"><code>MAX_DOCS</code></a>, or if the indoming index sort does not match this index's index sort</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addIndexes(org.apache.lucene.index.CodecReader...)">
<h3>addIndexes</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">addIndexes</span><wbr><span class="parameters">(<a href="CodecReader.html" title="class in org.apache.lucene.index">CodecReader</a>...&nbsp;readers)</span>
                throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Merges the provided indexes into this index.

 <p>The provided IndexReaders are not closed.

 <p>See <a href="#addIndexes(org.apache.lucene.store.Directory...)"><code>addIndexes(org.apache.lucene.store.Directory...)</code></a> for details on transactional semantics, temporary free space
 required in the Directory, and non-CFS segments on an Exception.

 <p><b>NOTE:</b> empty segments are dropped by this method and not added to this index.

 <p><b>NOTE:</b> provided <a href="LeafReader.html" title="class in org.apache.lucene.index"><code>LeafReader</code></a>s are merged as specified by the <a href="MergePolicy.html#findMerges(org.apache.lucene.index.CodecReader...)"><code>MergePolicy.findMerges(CodecReader...)</code></a> API. Default behavior is to merge all provided readers
 into a single segment. You can modify this by overriding the <code>findMerge</code> API in your
 custom merge policy.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The <a href="#sequence_number">sequence number</a> for this operation</dd>
<dt>Throws:</dt>
<dd><code><a href="CorruptIndexException.html" title="class in org.apache.lucene.index">CorruptIndexException</a></code> - if the index is corrupt</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if there is a low-level IO error</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if addIndexes would cause the index to exceed <a href="#MAX_DOCS"><code>MAX_DOCS</code></a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addIndexesReaderMerge(org.apache.lucene.index.MergePolicy.OneMerge)">
<h3>addIndexesReaderMerge</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">addIndexesReaderMerge</span><wbr><span class="parameters">(<a href="MergePolicy.OneMerge.html" title="class in org.apache.lucene.index">MergePolicy.OneMerge</a>&nbsp;merge)</span>
                           throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Runs a single merge operation for <a href="#addIndexes(org.apache.lucene.index.CodecReader...)"><code>addIndexes(CodecReader...)</code></a>.

 <p>Merges and creates a SegmentInfo, for the readers grouped together in provided OneMerge.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>merge</code> - OneMerge object initialized from readers.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if there is a low-level IO error</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="doAfterFlush()">
<h3>doAfterFlush</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">doAfterFlush</span>()
                     throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">A hook for extending classes to execute operations after pending added and deleted documents
 have been flushed to the Directory but before the change is committed (new segments_N file
 written).</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="doBeforeFlush()">
<h3>doBeforeFlush</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">doBeforeFlush</span>()
                      throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">A hook for extending classes to execute operations before pending added and deleted documents
 are flushed to the Directory.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="prepareCommit()">
<h3>prepareCommit</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">prepareCommit</span>()
                         throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Expert: prepare for commit. This does the first phase of 2-phase commit. This method does all
 steps necessary to commit changes since this writer was opened: flushes pending added and
 deleted docs, syncs the index files, writes most of next segments_N file. After calling this
 you must call either <a href="#commit()"><code>commit()</code></a> to finish the commit, or <a href="#rollback()"><code>rollback()</code></a> to revert
 the commit and undo all changes done since the writer was opened.

 <p>You can also just call <a href="#commit()"><code>commit()</code></a> directly without prepareCommit first in which case
 that method will internally call prepareCommit.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="TwoPhaseCommit.html#prepareCommit()">prepareCommit</a></code>&nbsp;in interface&nbsp;<code><a href="TwoPhaseCommit.html" title="interface in org.apache.lucene.index">TwoPhaseCommit</a></code></dd>
<dt>Returns:</dt>
<dd>The <a href="#sequence_number">sequence number</a> of the last operation in the commit.
     All sequence numbers &lt;= this value will be reflected in the commit, and all others will
     not.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="flushNextBuffer()">
<h3>flushNextBuffer</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">flushNextBuffer</span>()
                              throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Expert: Flushes the next pending writer per thread buffer if available or the largest active
 non-pending writer per thread buffer in the calling thread. This can be used to flush documents
 to disk outside of an indexing thread. In contrast to <a href="#flush()"><code>flush()</code></a> this won't mark all
 currently active indexing buffers as flush-pending.

 <p>Note: this method is best-effort and might not flush any segments to disk. If there is a
 full flush happening concurrently multiple segments might have been flushed. Users of this API
 can access the IndexWriters current memory consumption via <a href="#ramBytesUsed()"><code>ramBytesUsed()</code></a></div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>true</code> iff this method flushed at least on segment to disk.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
<dt>WARNING: This API is experimental and might change in incompatible ways in the next release.</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="setLiveCommitData(java.lang.Iterable)">
<h3>setLiveCommitData</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setLiveCommitData</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.Entry.html" title="class or interface in java.util" class="external-link">Map.Entry</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&gt;&nbsp;commitUserData)</span></div>
<div class="block">Sets the iterator to provide the commit user data map at commit time. Calling this method is
 considered a committable change and will be <a href="#commit()"><code>committed</code></a> even if there are no
 other changes this writer. Note that you must call this method before <a href="#prepareCommit()"><code>prepareCommit()</code></a>.
 Otherwise it won't be included in the follow-on <a href="#commit()"><code>commit()</code></a>.

 <p><b>NOTE:</b> the iterator is late-binding: it is only visited once all documents for the
 commit have been written to their segments, before the next segments_N file is written</div>
</section>
</li>
<li>
<section class="detail" id="setLiveCommitData(java.lang.Iterable,boolean)">
<h3>setLiveCommitData</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setLiveCommitData</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.Entry.html" title="class or interface in java.util" class="external-link">Map.Entry</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&gt;&nbsp;commitUserData,
 boolean&nbsp;doIncrementVersion)</span></div>
<div class="block">Sets the commit user data iterator, controlling whether to advance the <a href="SegmentInfos.html#getVersion()"><code>SegmentInfos.getVersion()</code></a>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#setLiveCommitData(java.lang.Iterable)"><code>setLiveCommitData(Iterable)</code></a></li>
</ul>
</dd>
<dt>NOTE: This API is for internal purposes only and might change in incompatible ways in the next release.</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="getLiveCommitData()">
<h3>getLiveCommitData</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.Entry.html" title="class or interface in java.util" class="external-link">Map.Entry</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&gt;</span>&nbsp;<span class="element-name">getLiveCommitData</span>()</div>
<div class="block">Returns the commit user data iterable previously set with <a href="#setLiveCommitData(java.lang.Iterable)"><code>setLiveCommitData(Iterable)</code></a>,
 or null if nothing has been set yet.</div>
</section>
</li>
<li>
<section class="detail" id="commit()">
<h3>commit</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">commit</span>()
                  throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Commits all pending changes (added and deleted documents, segment merges, added indexes, etc.)
 to the index, and syncs all referenced index files, such that a reader will see the changes and
 the index updates will survive an OS or machine crash or power loss. Note that this does not
 wait for any running background merges to finish. This may be a costly operation, so you should
 test the cost in your application and do it only when really necessary.

 <p>Note that this operation calls Directory.sync on the index files. That call should not
 return until the file contents and metadata are on stable storage. For FSDirectory, this calls
 the OS's fsync. But, beware: some hardware devices may in fact cache writes even during fsync,
 and return before the bits are actually on stable storage, to give the appearance of faster
 performance. If you have such a device, and it does not have a battery backup (for example)
 then on power loss it may still lose data. Lucene cannot guarantee consistency on such devices.

 <p>If nothing was committed, because there were no pending changes, this returns -1. Otherwise,
 it returns the sequence number such that all indexing operations prior to this sequence will be
 included in the commit point, and all other operations will not.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="TwoPhaseCommit.html#commit()">commit</a></code>&nbsp;in interface&nbsp;<code><a href="TwoPhaseCommit.html" title="interface in org.apache.lucene.index">TwoPhaseCommit</a></code></dd>
<dt>Returns:</dt>
<dd>The <a href="#sequence_number">sequence number</a> of the last operation in the commit.
     All sequence numbers &lt;= this value will be reflected in the commit, and all others will
     not.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#prepareCommit()"><code>prepareCommit()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="hasUncommittedChanges()">
<h3>hasUncommittedChanges</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">hasUncommittedChanges</span>()</div>
<div class="block">Returns true if there may be changes that have not been committed. There are cases where this
 may return true when there are no actual "real" changes to the index, for example if you've
 deleted by Term or Query but that Term or Query does not match any documents. Also, if a merge
 kicked off as a result of flushing a new segment during <a href="#commit()"><code>commit()</code></a>, or a concurrent merged
 finished, this method may return true right after you had just called <a href="#commit()"><code>commit()</code></a>.</div>
</section>
</li>
<li>
<section class="detail" id="flush()">
<h3>flush</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">flush</span>()
                 throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Moves all in-memory segments to the <a href="../store/Directory.html" title="class in org.apache.lucene.store"><code>Directory</code></a>, but does not commit (fsync) them (call
 <a href="#commit()"><code>commit()</code></a> for that).</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="numRamDocs()">
<h3>numRamDocs</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">numRamDocs</span>()</div>
<div class="block">Expert: Return the number of documents currently buffered in RAM.</div>
</section>
</li>
<li>
<section class="detail" id="merge(org.apache.lucene.index.MergePolicy.OneMerge)">
<h3>merge</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">merge</span><wbr><span class="parameters">(<a href="MergePolicy.OneMerge.html" title="class in org.apache.lucene.index">MergePolicy.OneMerge</a>&nbsp;merge)</span>
              throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Merges the indicated segments, replacing them in the stack with a single segment.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
<dt>WARNING: This API is experimental and might change in incompatible ways in the next release.</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="mergeSuccess(org.apache.lucene.index.MergePolicy.OneMerge)">
<h3>mergeSuccess</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">mergeSuccess</span><wbr><span class="parameters">(<a href="MergePolicy.OneMerge.html" title="class in org.apache.lucene.index">MergePolicy.OneMerge</a>&nbsp;merge)</span></div>
<div class="block">Hook that's called when the specified merge is complete.</div>
</section>
</li>
<li>
<section class="detail" id="onTragicEvent(java.lang.Throwable,java.lang.String)">
<h3>onTragicEvent</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">onTragicEvent</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&nbsp;tragedy,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;location)</span></div>
<div class="block">This method should be called on a tragic event ie. if a downstream class of the writer hits an
 unrecoverable exception. This method does not rethrow the tragic event exception.

 <p>Note: This method will not close the writer but can be called from any location without
 respecting any lock order</div>
<dl class="notes">
<dt>NOTE: This API is for internal purposes only and might change in incompatible ways in the next release.</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="getTragicException()">
<h3>getTragicException</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a></span>&nbsp;<span class="element-name">getTragicException</span>()</div>
<div class="block">If this <code>IndexWriter</code> was closed as a side-effect of a tragic exception, e.g. disk full
 while flushing a new segment, this returns the root cause exception. Otherwise (no tragic
 exception has occurred) it returns null.</div>
</section>
</li>
<li>
<section class="detail" id="isOpen()">
<h3>isOpen</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isOpen</span>()</div>
<div class="block">Returns <code>true</code> if this <code>IndexWriter</code> is still open.</div>
</section>
</li>
<li>
<section class="detail" id="deleteUnusedFiles()">
<h3>deleteUnusedFiles</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">deleteUnusedFiles</span>()
                       throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Expert: remove any index files that are no longer used.

 <p>IndexWriter normally deletes unused files itself, during indexing. However, on Windows,
 which disallows deletion of open files, if there is a reader open on the index then those files
 cannot be deleted. This is fine, because IndexWriter will periodically retry the deletion.

 <p>However, IndexWriter doesn't try that often: only on open, close, flushing a new segment,
 and finishing a merge. If you don't do any of these actions with your IndexWriter, you'll see
 the unused files linger. If that's a problem, call this method to delete them (once you've
 closed the open readers that were preventing their deletion).

 <p>In addition, you can call this method to delete unreferenced index commits. This might be
 useful if you are using an <a href="IndexDeletionPolicy.html" title="class in org.apache.lucene.index"><code>IndexDeletionPolicy</code></a> which holds onto index commits until
 some criteria are met, but those commits are no longer needed. Otherwise, those commits will be
 deleted the next time commit() is called.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="incRefDeleter(org.apache.lucene.index.SegmentInfos)">
<h3>incRefDeleter</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">incRefDeleter</span><wbr><span class="parameters">(<a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;segmentInfos)</span>
                   throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Record that the files referenced by this <a href="SegmentInfos.html" title="class in org.apache.lucene.index"><code>SegmentInfos</code></a> are still in use.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
<dt>NOTE: This API is for internal purposes only and might change in incompatible ways in the next release.</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="decRefDeleter(org.apache.lucene.index.SegmentInfos)">
<h3>decRefDeleter</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">decRefDeleter</span><wbr><span class="parameters">(<a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;segmentInfos)</span>
                   throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Record that the files referenced by this <a href="SegmentInfos.html" title="class in org.apache.lucene.index"><code>SegmentInfos</code></a> are no longer in use. Only call
 this if you are sure you previously called <a href="#incRefDeleter(org.apache.lucene.index.SegmentInfos)"><code>incRefDeleter(org.apache.lucene.index.SegmentInfos)</code></a>.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
<dt>NOTE: This API is for internal purposes only and might change in incompatible ways in the next release.</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="getPendingNumDocs()">
<h3>getPendingNumDocs</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getPendingNumDocs</span>()</div>
<div class="block">Returns the number of documents in the index including documents are being added (i.e.,
 reserved).</div>
<dl class="notes">
<dt>WARNING: This API is experimental and might change in incompatible ways in the next release.</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMaxCompletedSequenceNumber()">
<h3>getMaxCompletedSequenceNumber</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getMaxCompletedSequenceNumber</span>()</div>
<div class="block">Returns the highest <a href="#sequence_number">sequence number</a> across all completed
 operations, or 0 if no operations have finished yet. Still in-flight operations (in other
 threads) are not counted until they finish.</div>
<dl class="notes">
<dt>WARNING: This API is experimental and might change in incompatible ways in the next release.</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="numDeletesToMerge(org.apache.lucene.index.SegmentCommitInfo)">
<h3>numDeletesToMerge</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">numDeletesToMerge</span><wbr><span class="parameters">(<a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>&nbsp;info)</span>
                            throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Returns the number of deletes a merge would claim back if the given segment is merged.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="MergePolicy.MergeContext.html#numDeletesToMerge(org.apache.lucene.index.SegmentCommitInfo)">numDeletesToMerge</a></code>&nbsp;in interface&nbsp;<code><a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a></code></dd>
<dt>Parameters:</dt>
<dd><code>info</code> - the segment to get the number of deletes for</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="MergePolicy.html#numDeletesToMerge(org.apache.lucene.index.SegmentCommitInfo,int,org.apache.lucene.util.IOSupplier)"><code>MergePolicy.numDeletesToMerge(SegmentCommitInfo, int, org.apache.lucene.util.IOSupplier)</code></a></li>
</ul>
</dd>
<dt>WARNING: This API is experimental and might change in incompatible ways in the next release.</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="isEnableTestPoints()">
<h3>isEnableTestPoints</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isEnableTestPoints</span>()</div>
<div class="block">Tests should override this to enable test points. Default is <code>false</code>.</div>
</section>
</li>
<li>
<section class="detail" id="getDocStats()">
<h3>getDocStats</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="IndexWriter.DocStats.html" title="class in org.apache.lucene.index">IndexWriter.DocStats</a></span>&nbsp;<span class="element-name">getDocStats</span>()</div>
<div class="block">Returns accurate <a href="IndexWriter.DocStats.html" title="class in org.apache.lucene.index"><code>IndexWriter.DocStats</code></a> for this writer. The numDoc for instance can change after
 maxDoc is fetched that causes numDocs to be greater than maxDoc which makes it hard to get
 accurate document stats from IndexWriter.</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><i>Copyright &copy; 2000-2025 Apache Software Foundation. All Rights Reserved.</i></small></p>
</footer>
</div>
</div>
</body>
</html>
