<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) on Fri Apr 04 15:37:21 CEST 2025 -->
<title>TieredMergePolicy (Lucene 10.2.0 core API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-04-04">
<meta name="description" content="declaration: package: org.apache.lucene.index, class: TieredMergePolicy">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/TieredMergePolicy.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li><a href="#nested-class-summary">Nested</a></li>
<li><a href="#field-summary">Field</a></li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li><a href="#field-detail">Field</a></li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.lucene.index</a></div>
<h1 title="Class TieredMergePolicy" class="title">Class TieredMergePolicy</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance"><a href="MergePolicy.html" title="class in org.apache.lucene.index">org.apache.lucene.index.MergePolicy</a>
<div class="inheritance">org.apache.lucene.index.TieredMergePolicy</div>
</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">TieredMergePolicy</span>
<span class="extends-implements">extends <a href="MergePolicy.html" title="class in org.apache.lucene.index">MergePolicy</a></span></div>
<div class="block">Merges segments of approximately equal size, subject to an allowed number of segments per tier.
 This is similar to <a href="LogByteSizeMergePolicy.html" title="class in org.apache.lucene.index"><code>LogByteSizeMergePolicy</code></a>, except this merge policy is able to merge
 non-adjacent segment, and separates how many segments are merged at once (<a href="#setMaxMergeAtOnce(int)"><code>setMaxMergeAtOnce(int)</code></a>) from how many segments are allowed per tier (<a href="#setSegmentsPerTier(double)"><code>setSegmentsPerTier(double)</code></a>).
 This merge policy also does not over-merge (i.e. cascade merges).

 <p>For normal merging, this policy first computes a "budget" of how many segments are allowed to
 be in the index. If the index is over-budget, then the policy sorts segments by decreasing size
 (pro-rating by percent deletes), and then finds the least-cost merge. Merge cost is measured by a
 combination of the "skew" of the merge (size of largest segment divided by smallest segment),
 total merge size and percent deletes reclaimed, so that merges with lower skew, smaller size and
 those reclaiming more deletes, are favored.

 <p>If a merge will produce a segment that's larger than <a href="#setMaxMergedSegmentMB(double)"><code>setMaxMergedSegmentMB(double)</code></a>, then the
 policy will merge fewer segments (down to 1 at once, if that one has deletions) to keep the
 segment size under budget.

 <p><b>NOTE</b>: this policy freely merges non-adjacent segments; if this is a problem, use <a href="LogMergePolicy.html" title="class in org.apache.lucene.index"><code>LogMergePolicy</code></a>.

 <p><b>NOTE</b>: This policy always merges by byte size of the segments, always pro-rates by
 percent deletes

 <p><b>NOTE</b> Starting with Lucene 7.5, if you call <a href="IndexWriter.html#forceMerge(int)"><code>IndexWriter.forceMerge(int)</code></a> with
 this (default) merge policy, if <a href="#setMaxMergedSegmentMB(double)"><code>setMaxMergedSegmentMB(double)</code></a> is in conflict with <code>
 maxNumSegments</code> passed to <a href="IndexWriter.html#forceMerge(int)"><code>IndexWriter.forceMerge(int)</code></a> then <code>maxNumSegments</code> wins. For
 example, if your index has 50 1 GB segments, and you have <a href="#setMaxMergedSegmentMB(double)"><code>setMaxMergedSegmentMB(double)</code></a> at 1024
 (1 GB), and you call <code>forceMerge(10)</code>, the two settings are clearly in conflict. <code>
 TieredMergePolicy</code> will choose to break the <a href="#setMaxMergedSegmentMB(double)"><code>setMaxMergedSegmentMB(double)</code></a> constraint and try to
 merge down to at most ten segments, each up to 5 * 1.25 GB in size (since an extra 25% buffer
 increase in the expected segment size is targetted).

 <p>findForcedDeletesMerges should never produce segments greater than maxSegmentSize.

 <p><b>NOTE</b>: This policy returns natural merges whose size is below the <a href="#setFloorSegmentMB(double)"><code>floor segment size</code></a> for <a href="MergePolicy.html#findFullFlushMerges(org.apache.lucene.index.MergeTrigger,org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.MergePolicy.MergeContext)"><code>full-flush
 merges</code></a>.</div>
<dl class="notes">
<dt>WARNING: This API is experimental and might change in incompatible ways in the next release.</dt>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>protected static class&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="TieredMergePolicy.MergeScore.html" class="type-name-link" title="class in org.apache.lucene.index">TieredMergePolicy.MergeScore</a></code></div>
<div class="col-last even-row-color">
<div class="block">Holds score and explanation for a single candidate merge.</div>
</div>
</div>
<div class="inherited-list">
<h2 id="nested-classes-inherited-from-class-org.apache.lucene.index.MergePolicy">Nested classes/interfaces inherited from class&nbsp;org.apache.lucene.index.<a href="MergePolicy.html" title="class in org.apache.lucene.index">MergePolicy</a></h2>
<code><a href="MergePolicy.MergeAbortedException.html" title="class in org.apache.lucene.index">MergePolicy.MergeAbortedException</a>, <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>, <a href="MergePolicy.MergeException.html" title="class in org.apache.lucene.index">MergePolicy.MergeException</a>, <a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a>, <a href="MergePolicy.OneMerge.html" title="class in org.apache.lucene.index">MergePolicy.OneMerge</a>, <a href="MergePolicy.OneMergeProgress.html" title="class in org.apache.lucene.index">MergePolicy.OneMergeProgress</a></code></div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final double</code></div>
<div class="col-second even-row-color"><code><a href="#DEFAULT_NO_CFS_RATIO" class="member-name-link">DEFAULT_NO_CFS_RATIO</a></code></div>
<div class="col-last even-row-color">
<div class="block">Default noCFSRatio.</div>
</div>
</div>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-org.apache.lucene.index.MergePolicy">Fields inherited from class&nbsp;org.apache.lucene.index.<a href="MergePolicy.html" title="class in org.apache.lucene.index">MergePolicy</a></h3>
<code><a href="MergePolicy.html#DEFAULT_MAX_CFS_SEGMENT_SIZE">DEFAULT_MAX_CFS_SEGMENT_SIZE</a>, <a href="MergePolicy.html#maxCFSSegmentSize">maxCFSSegmentSize</a>, <a href="MergePolicy.html#noCFSRatio">noCFSRatio</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">TieredMergePolicy</a>()</code></div>
<div class="col-last even-row-color">
<div class="block">Sole constructor, setting all settings to their defaults.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#findForcedDeletesMerges(org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.MergePolicy.MergeContext)" class="member-name-link">findForcedDeletesMerges</a><wbr>(<a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;infos,
 <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Determine what set of merge operations is necessary in order to expunge all deletes from the
 index.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#findForcedMerges(org.apache.lucene.index.SegmentInfos,int,java.util.Map,org.apache.lucene.index.MergePolicy.MergeContext)" class="member-name-link">findForcedMerges</a><wbr>(<a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;infos,
 int&nbsp;maxSegmentCount,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&gt;&nbsp;segmentsToMerge,
 <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Determine what set of merge operations is necessary in order to merge to <code>&lt;=</code> the
 specified segment count.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#findMerges(org.apache.lucene.index.MergeTrigger,org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.MergePolicy.MergeContext)" class="member-name-link">findMerges</a><wbr>(<a href="MergeTrigger.html" title="enum class in org.apache.lucene.index">MergeTrigger</a>&nbsp;mergeTrigger,
 <a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;infos,
 <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Determine what set of merge operations are now necessary on the index.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>double</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getDeletesPctAllowed()" class="member-name-link">getDeletesPctAllowed</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the current deletesPctAllowed setting.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>double</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getFloorSegmentMB()" class="member-name-link">getFloorSegmentMB</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the current floorSegmentMB.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>double</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getForceMergeDeletesPctAllowed()" class="member-name-link">getForceMergeDeletesPctAllowed</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the current forceMergeDeletesPctAllowed setting.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getMaxMergeAtOnce()" class="member-name-link">getMaxMergeAtOnce</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the current maxMergeAtOnce setting.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>double</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getMaxMergedSegmentMB()" class="member-name-link">getMaxMergedSegmentMB</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the current maxMergedSegmentMB setting.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>double</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getSegmentsPerTier()" class="member-name-link">getSegmentsPerTier</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the current segmentsPerTier setting.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getTargetSearchConcurrency()" class="member-name-link">getTargetSearchConcurrency</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the target search concurrency.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#maxFullFlushMergeSize()" class="member-name-link">maxFullFlushMergeSize</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return the maximum size of segments to be included in full-flush merges by the default
 implementation of <a href="MergePolicy.html#findFullFlushMerges(org.apache.lucene.index.MergeTrigger,org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.MergePolicy.MergeContext)"><code>MergePolicy.findFullFlushMerges(org.apache.lucene.index.MergeTrigger, org.apache.lucene.index.SegmentInfos, org.apache.lucene.index.MergePolicy.MergeContext)</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="TieredMergePolicy.MergeScore.html" title="class in org.apache.lucene.index">TieredMergePolicy.MergeScore</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#score(java.util.List,boolean,java.util.Map)" class="member-name-link">score</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>&gt;&nbsp;candidate,
 boolean&nbsp;hitTooLarge,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>,<wbr>org.apache.lucene.index.TieredMergePolicy.SegmentSizeAndDocs&gt;&nbsp;segmentsSizes)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Expert: scores one merge; subclasses can override.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setDeletesPctAllowed(double)" class="member-name-link">setDeletesPctAllowed</a><wbr>(double&nbsp;v)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Controls the maximum percentage of deleted documents that is tolerated in the index.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setFloorSegmentMB(double)" class="member-name-link">setFloorSegmentMB</a><wbr>(double&nbsp;v)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Segments smaller than this size are merged more aggressively:

 
   They are candidates for full-flush merges, in order to reduce the number of segments in
       the index prior to opening a new point-in-time view of the index.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setForceMergeDeletesPctAllowed(double)" class="member-name-link">setForceMergeDeletesPctAllowed</a><wbr>(double&nbsp;v)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">When forceMergeDeletes is called, we only merge away a segment if its delete percentage is over
 this threshold.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setMaxMergeAtOnce(int)" class="member-name-link">setMaxMergeAtOnce</a><wbr>(int&nbsp;v)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Maximum number of segments to be merged at a time during "normal" merging.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setMaxMergedSegmentMB(double)" class="member-name-link">setMaxMergedSegmentMB</a><wbr>(double&nbsp;v)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Maximum sized segment to produce during normal merging.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setSegmentsPerTier(double)" class="member-name-link">setSegmentsPerTier</a><wbr>(double&nbsp;v)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sets the allowed number of segments per tier.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setTargetSearchConcurrency(int)" class="member-name-link">setTargetSearchConcurrency</a><wbr>(int&nbsp;targetSearchConcurrency)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sets the target search concurrency.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toString()" class="member-name-link">toString</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.apache.lucene.index.MergePolicy">Methods inherited from class&nbsp;org.apache.lucene.index.<a href="MergePolicy.html" title="class in org.apache.lucene.index">MergePolicy</a></h3>
<code><a href="MergePolicy.html#assertDelCount(int,org.apache.lucene.index.SegmentCommitInfo)">assertDelCount</a>, <a href="MergePolicy.html#findFullFlushMerges(org.apache.lucene.index.MergeTrigger,org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.MergePolicy.MergeContext)">findFullFlushMerges</a>, <a href="MergePolicy.html#findMerges(org.apache.lucene.index.CodecReader...)">findMerges</a>, <a href="MergePolicy.html#getMaxCFSSegmentSizeMB()">getMaxCFSSegmentSizeMB</a>, <a href="MergePolicy.html#getNoCFSRatio()">getNoCFSRatio</a>, <a href="MergePolicy.html#isMerged(org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.SegmentCommitInfo,org.apache.lucene.index.MergePolicy.MergeContext)">isMerged</a>, <a href="MergePolicy.html#keepFullyDeletedSegment(org.apache.lucene.util.IOSupplier)">keepFullyDeletedSegment</a>, <a href="MergePolicy.html#message(java.lang.String,org.apache.lucene.index.MergePolicy.MergeContext)">message</a>, <a href="MergePolicy.html#numDeletesToMerge(org.apache.lucene.index.SegmentCommitInfo,int,org.apache.lucene.util.IOSupplier)">numDeletesToMerge</a>, <a href="MergePolicy.html#segString(org.apache.lucene.index.MergePolicy.MergeContext,java.lang.Iterable)">segString</a>, <a href="MergePolicy.html#setMaxCFSSegmentSizeMB(double)">setMaxCFSSegmentSizeMB</a>, <a href="MergePolicy.html#setNoCFSRatio(double)">setNoCFSRatio</a>, <a href="MergePolicy.html#size(org.apache.lucene.index.SegmentCommitInfo,org.apache.lucene.index.MergePolicy.MergeContext)">size</a>, <a href="MergePolicy.html#useCompoundFile(org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.SegmentCommitInfo,org.apache.lucene.index.MergePolicy.MergeContext)">useCompoundFile</a>, <a href="MergePolicy.html#verbose(org.apache.lucene.index.MergePolicy.MergeContext)">verbose</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone--" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals-java.lang.Object-" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize--" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass--" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode--" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify--" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll--" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait--" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait-long-" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait-long-int-" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="DEFAULT_NO_CFS_RATIO">
<h3>DEFAULT_NO_CFS_RATIO</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">DEFAULT_NO_CFS_RATIO</span></div>
<div class="block">Default noCFSRatio. If a merge's size is <code>&gt;= 10%</code> of the index, then we disable compound
 file for it.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="MergePolicy.html#setNoCFSRatio(double)"><code>MergePolicy.setNoCFSRatio(double)</code></a></li>
<li><a href="../../../../constant-values.html#org.apache.lucene.index.TieredMergePolicy.DEFAULT_NO_CFS_RATIO">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>TieredMergePolicy</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">TieredMergePolicy</span>()</div>
<div class="block">Sole constructor, setting all settings to their defaults.</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="setMaxMergeAtOnce(int)">
<h3>setMaxMergeAtOnce</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a></span>&nbsp;<span class="element-name">setMaxMergeAtOnce</span><wbr><span class="parameters">(int&nbsp;v)</span></div>
<div class="block">Maximum number of segments to be merged at a time during "normal" merging. Default is 10.

 <p><b>NOTE</b>: Merges above the <a href="#setFloorSegmentMB(double)"><code>floor segment size</code></a> also
 bound the number of merged segments by <a href="#setSegmentsPerTier(double)"><code>the number of
 segments per tier</code></a>.</div>
</section>
</li>
<li>
<section class="detail" id="getMaxMergeAtOnce()">
<h3>getMaxMergeAtOnce</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getMaxMergeAtOnce</span>()</div>
<div class="block">Returns the current maxMergeAtOnce setting.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#setMaxMergeAtOnce(int)"><code>setMaxMergeAtOnce(int)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setMaxMergedSegmentMB(double)">
<h3>setMaxMergedSegmentMB</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a></span>&nbsp;<span class="element-name">setMaxMergedSegmentMB</span><wbr><span class="parameters">(double&nbsp;v)</span></div>
<div class="block">Maximum sized segment to produce during normal merging. This setting is approximate: the
 estimate of the merged segment size is made by summing sizes of to-be-merged segments
 (compensating for percent deleted docs). Default is 5 GB.</div>
</section>
</li>
<li>
<section class="detail" id="getMaxMergedSegmentMB()">
<h3>getMaxMergedSegmentMB</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">getMaxMergedSegmentMB</span>()</div>
<div class="block">Returns the current maxMergedSegmentMB setting.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#setMaxMergedSegmentMB(double)"><code>setMaxMergedSegmentMB(double)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setDeletesPctAllowed(double)">
<h3>setDeletesPctAllowed</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a></span>&nbsp;<span class="element-name">setDeletesPctAllowed</span><wbr><span class="parameters">(double&nbsp;v)</span></div>
<div class="block">Controls the maximum percentage of deleted documents that is tolerated in the index. Lower
 values make the index more space efficient at the expense of increased CPU and I/O activity.
 Values must be between 5 and 50. Default value is 20.

 <p>When the maximum delete percentage is lowered, the indexing thread will call for merges more
 often, meaning that write amplification factor will be increased. Write amplification factor
 measures the number of times each document in the index is written. A higher write
 amplification factor will lead to higher CPU and I/O activity as indicated above.</div>
</section>
</li>
<li>
<section class="detail" id="getDeletesPctAllowed()">
<h3>getDeletesPctAllowed</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">getDeletesPctAllowed</span>()</div>
<div class="block">Returns the current deletesPctAllowed setting.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#setDeletesPctAllowed(double)"><code>setDeletesPctAllowed(double)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setFloorSegmentMB(double)">
<h3>setFloorSegmentMB</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a></span>&nbsp;<span class="element-name">setFloorSegmentMB</span><wbr><span class="parameters">(double&nbsp;v)</span></div>
<div class="block">Segments smaller than this size are merged more aggressively:

 <ul>
   <li>They are candidates for full-flush merges, in order to reduce the number of segments in
       the index prior to opening a new point-in-time view of the index.
   <li>For background merges, smaller segments are "rounded up" to this size.
 </ul>

 In both cases, this helps prevent frequent flushing of tiny segments to create a long tail of
 small segments in the index. Default is 16MB.</div>
</section>
</li>
<li>
<section class="detail" id="getFloorSegmentMB()">
<h3>getFloorSegmentMB</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">getFloorSegmentMB</span>()</div>
<div class="block">Returns the current floorSegmentMB.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#setFloorSegmentMB(double)"><code>setFloorSegmentMB(double)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="maxFullFlushMergeSize()">
<h3>maxFullFlushMergeSize</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">maxFullFlushMergeSize</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from class:&nbsp;<code><a href="MergePolicy.html#maxFullFlushMergeSize()">MergePolicy</a></code></span></div>
<div class="block">Return the maximum size of segments to be included in full-flush merges by the default
 implementation of <a href="MergePolicy.html#findFullFlushMerges(org.apache.lucene.index.MergeTrigger,org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.MergePolicy.MergeContext)"><code>MergePolicy.findFullFlushMerges(org.apache.lucene.index.MergeTrigger, org.apache.lucene.index.SegmentInfos, org.apache.lucene.index.MergePolicy.MergeContext)</code></a>.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="MergePolicy.html#maxFullFlushMergeSize()">maxFullFlushMergeSize</a></code>&nbsp;in class&nbsp;<code><a href="MergePolicy.html" title="class in org.apache.lucene.index">MergePolicy</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setForceMergeDeletesPctAllowed(double)">
<h3>setForceMergeDeletesPctAllowed</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a></span>&nbsp;<span class="element-name">setForceMergeDeletesPctAllowed</span><wbr><span class="parameters">(double&nbsp;v)</span></div>
<div class="block">When forceMergeDeletes is called, we only merge away a segment if its delete percentage is over
 this threshold. Default is 10%.</div>
</section>
</li>
<li>
<section class="detail" id="getForceMergeDeletesPctAllowed()">
<h3>getForceMergeDeletesPctAllowed</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">getForceMergeDeletesPctAllowed</span>()</div>
<div class="block">Returns the current forceMergeDeletesPctAllowed setting.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="#setForceMergeDeletesPctAllowed(double)"><code>setForceMergeDeletesPctAllowed(double)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setSegmentsPerTier(double)">
<h3>setSegmentsPerTier</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a></span>&nbsp;<span class="element-name">setSegmentsPerTier</span><wbr><span class="parameters">(double&nbsp;v)</span></div>
<div class="block">Sets the allowed number of segments per tier. Smaller values mean more merging but fewer
 segments.

 <p>Default is 10.0.</div>
</section>
</li>
<li>
<section class="detail" id="getSegmentsPerTier()">
<h3>getSegmentsPerTier</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">getSegmentsPerTier</span>()</div>
<div class="block">Returns the current segmentsPerTier setting.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#setSegmentsPerTier(double)"><code>setSegmentsPerTier(double)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setTargetSearchConcurrency(int)">
<h3>setTargetSearchConcurrency</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a></span>&nbsp;<span class="element-name">setTargetSearchConcurrency</span><wbr><span class="parameters">(int&nbsp;targetSearchConcurrency)</span></div>
<div class="block">Sets the target search concurrency. This prevents creating segments that are bigger than
 maxDoc/targetSearchConcurrency, which in turn makes the work parallelizable into
 targetSearchConcurrency slices of similar doc counts. It also makes merging less aggressive, as
 higher values result in indices that do less merging and have more segments</div>
</section>
</li>
<li>
<section class="detail" id="getTargetSearchConcurrency()">
<h3>getTargetSearchConcurrency</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getTargetSearchConcurrency</span>()</div>
<div class="block">Returns the target search concurrency.</div>
</section>
</li>
<li>
<section class="detail" id="findMerges(org.apache.lucene.index.MergeTrigger,org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.MergePolicy.MergeContext)">
<h3>findMerges</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a></span>&nbsp;<span class="element-name">findMerges</span><wbr><span class="parameters">(<a href="MergeTrigger.html" title="enum class in org.apache.lucene.index">MergeTrigger</a>&nbsp;mergeTrigger,
 <a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;infos,
 <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext)</span>
                                          throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block"><span class="description-from-type-label">Description copied from class:&nbsp;<code><a href="MergePolicy.html#findMerges(org.apache.lucene.index.MergeTrigger,org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.MergePolicy.MergeContext)">MergePolicy</a></code></span></div>
<div class="block">Determine what set of merge operations are now necessary on the index. <a href="IndexWriter.html" title="class in org.apache.lucene.index"><code>IndexWriter</code></a>
 calls this whenever there is a change to the segments. This call is always synchronized on the
 <a href="IndexWriter.html" title="class in org.apache.lucene.index"><code>IndexWriter</code></a> instance so only one thread at a time will call this method.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="MergePolicy.html#findMerges(org.apache.lucene.index.MergeTrigger,org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.MergePolicy.MergeContext)">findMerges</a></code>&nbsp;in class&nbsp;<code><a href="MergePolicy.html" title="class in org.apache.lucene.index">MergePolicy</a></code></dd>
<dt>Parameters:</dt>
<dd><code>mergeTrigger</code> - the event that triggered the merge</dd>
<dd><code>infos</code> - the total set of segments in the index</dd>
<dd><code>mergeContext</code> - the IndexWriter to find the merges on</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="score(java.util.List,boolean,java.util.Map)">
<h3>score</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="TieredMergePolicy.MergeScore.html" title="class in org.apache.lucene.index">TieredMergePolicy.MergeScore</a></span>&nbsp;<span class="element-name">score</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>&gt;&nbsp;candidate,
 boolean&nbsp;hitTooLarge,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>,<wbr>org.apache.lucene.index.TieredMergePolicy.SegmentSizeAndDocs&gt;&nbsp;segmentsSizes)</span>
                                      throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Expert: scores one merge; subclasses can override.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="findForcedMerges(org.apache.lucene.index.SegmentInfos,int,java.util.Map,org.apache.lucene.index.MergePolicy.MergeContext)">
<h3>findForcedMerges</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a></span>&nbsp;<span class="element-name">findForcedMerges</span><wbr><span class="parameters">(<a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;infos,
 int&nbsp;maxSegmentCount,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&gt;&nbsp;segmentsToMerge,
 <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext)</span>
                                                throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block"><span class="description-from-type-label">Description copied from class:&nbsp;<code><a href="MergePolicy.html#findForcedMerges(org.apache.lucene.index.SegmentInfos,int,java.util.Map,org.apache.lucene.index.MergePolicy.MergeContext)">MergePolicy</a></code></span></div>
<div class="block">Determine what set of merge operations is necessary in order to merge to <code>&lt;=</code> the
 specified segment count. <a href="IndexWriter.html" title="class in org.apache.lucene.index"><code>IndexWriter</code></a> calls this when its <a href="IndexWriter.html#forceMerge(int)"><code>IndexWriter.forceMerge(int)</code></a>
 method is called. This call is always synchronized on the <a href="IndexWriter.html" title="class in org.apache.lucene.index"><code>IndexWriter</code></a> instance so only
 one thread at a time will call this method.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="MergePolicy.html#findForcedMerges(org.apache.lucene.index.SegmentInfos,int,java.util.Map,org.apache.lucene.index.MergePolicy.MergeContext)">findForcedMerges</a></code>&nbsp;in class&nbsp;<code><a href="MergePolicy.html" title="class in org.apache.lucene.index">MergePolicy</a></code></dd>
<dt>Parameters:</dt>
<dd><code>infos</code> - the total set of segments in the index</dd>
<dd><code>maxSegmentCount</code> - requested maximum number of segments in the index</dd>
<dd><code>segmentsToMerge</code> - contains the specific SegmentInfo instances that must be merged away.
     This may be a subset of all SegmentInfos. If the value is True for a given SegmentInfo,
     that means this segment was an original segment present in the to-be-merged index; else, it
     was a segment produced by a cascaded merge.</dd>
<dd><code>mergeContext</code> - the MergeContext to find the merges on</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="findForcedDeletesMerges(org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.MergePolicy.MergeContext)">
<h3>findForcedDeletesMerges</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a></span>&nbsp;<span class="element-name">findForcedDeletesMerges</span><wbr><span class="parameters">(<a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;infos,
 <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext)</span>
                                                       throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block"><span class="description-from-type-label">Description copied from class:&nbsp;<code><a href="MergePolicy.html#findForcedDeletesMerges(org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.MergePolicy.MergeContext)">MergePolicy</a></code></span></div>
<div class="block">Determine what set of merge operations is necessary in order to expunge all deletes from the
 index.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="MergePolicy.html#findForcedDeletesMerges(org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.MergePolicy.MergeContext)">findForcedDeletesMerges</a></code>&nbsp;in class&nbsp;<code><a href="MergePolicy.html" title="class in org.apache.lucene.index">MergePolicy</a></code></dd>
<dt>Parameters:</dt>
<dd><code>infos</code> - the total set of segments in the index</dd>
<dd><code>mergeContext</code> - the MergeContext to find the merges on</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="toString()">
<h3>toString</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">toString</span>()</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString--" title="class or interface in java.lang" class="external-link">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><i>Copyright &copy; 2000-2025 Apache Software Foundation. All Rights Reserved.</i></small></p>
</footer>
</div>
</div>
</body>
</html>
