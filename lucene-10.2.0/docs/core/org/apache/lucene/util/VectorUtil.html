<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) on Fri Apr 04 15:37:21 CEST 2025 -->
<title>VectorUtil (Lucene 10.2.0 core API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-04-04">
<meta name="description" content="declaration: package: org.apache.lucene.util, class: VectorUtil">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/VectorUtil.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.lucene.util</a></div>
<h1 title="Class VectorUtil" class="title">Class VectorUtil</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.lucene.util.VectorUtil</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public final class </span><span class="element-name type-name-label">VectorUtil</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">Utilities for computations with numeric arrays, especially algebraic operations like vector dot
 products. This class uses SIMD vectorization if the corresponding Java module is available and
 enabled. To enable vectorized code, pass <code>--add-modules jdk.incubator.vector</code> to Java's
 command line.

 <p>It will use CPU's <a href="https://en.wikipedia.org/wiki/Fused_multiply%E2%80%93add">FMA
 instructions</a> if it is known to perform faster than separate multiply+add. This requires at
 least Hotspot C2 enabled, which is the default for OpenJDK based JVMs.

 <p>To explicitly disable or enable FMA usage, pass the following system properties:

 <ul>
   <li><code>-Dlucene.useScalarFMA=(auto|true|false)</code> for scalar operations
   <li><code>-Dlucene.useVectorFMA=(auto|true|false)</code> for vectorized operations (with vector
       incubator module)
 </ul>

 <p>The default is <code>auto</code>, which enables this for known CPU types and JVM settings. If
 Hotspot C2 is disabled, FMA and vectorization are <strong>not</strong> used.

 <p>Vectorization and FMA is only supported for Hotspot-based JVMs; it won't work on OpenJ9-based
 JVMs unless they provide <a href="https://docs.oracle.com/en/java/javase/21/docs/api/jdk.management/com/sun/management/HotSpotDiagnosticMXBean.html" title="class or interface in com.sun.management" class="external-link"><code>HotSpotDiagnosticMXBean</code></a>. Please also make
 sure that you have the <code>jdk.management</code> module enabled in modularized applications.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#add(float%5B%5D,float%5B%5D)" class="member-name-link">add</a><wbr>(float[]&nbsp;u,
 float[]&nbsp;v)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Adds the second argument to the first</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static float[]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#checkFinite(float%5B%5D)" class="member-name-link">checkFinite</a><wbr>(float[]&nbsp;v)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Checks if a float vector only has finite components.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static float</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#cosine(byte%5B%5D,byte%5B%5D)" class="member-name-link">cosine</a><wbr>(byte[]&nbsp;a,
 byte[]&nbsp;b)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns the cosine similarity between the two vectors.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static float</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#cosine(float%5B%5D,float%5B%5D)" class="member-name-link">cosine</a><wbr>(float[]&nbsp;a,
 float[]&nbsp;b)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns the cosine similarity between the two vectors.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#dotProduct(byte%5B%5D,byte%5B%5D)" class="member-name-link">dotProduct</a><wbr>(byte[]&nbsp;a,
 byte[]&nbsp;b)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Dot product computed over signed bytes.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static float</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#dotProduct(float%5B%5D,float%5B%5D)" class="member-name-link">dotProduct</a><wbr>(float[]&nbsp;a,
 float[]&nbsp;b)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns the vector dot product of the two vectors.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static float</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#dotProductScore(byte%5B%5D,byte%5B%5D)" class="member-name-link">dotProductScore</a><wbr>(byte[]&nbsp;a,
 byte[]&nbsp;b)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Dot product score computed over signed bytes, scaled to be in [0, 1].</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#findNextGEQ(int%5B%5D,int,int,int)" class="member-name-link">findNextGEQ</a><wbr>(int[]&nbsp;buffer,
 int&nbsp;target,
 int&nbsp;from,
 int&nbsp;to)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Given an array <code>buffer</code> that is sorted between indexes <code>0</code> inclusive and <code>to</code>
 exclusive, find the first array index whose value is greater than or equal to <code>target</code>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#int4BitDotProduct(byte%5B%5D,byte%5B%5D)" class="member-name-link">int4BitDotProduct</a><wbr>(byte[]&nbsp;q,
 byte[]&nbsp;d)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Dot product computed over int4 (values between [0,15]) bytes and a binary vector.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#int4DotProduct(byte%5B%5D,byte%5B%5D)" class="member-name-link">int4DotProduct</a><wbr>(byte[]&nbsp;a,
 byte[]&nbsp;b)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#int4DotProductPacked(byte%5B%5D,byte%5B%5D)" class="member-name-link">int4DotProductPacked</a><wbr>(byte[]&nbsp;unpacked,
 byte[]&nbsp;packed)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Dot product computed over int4 (values between [0,15]) bytes.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#isUnitVector(float%5B%5D)" class="member-name-link">isUnitVector</a><wbr>(float[]&nbsp;v)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static float[]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#l2normalize(float%5B%5D)" class="member-name-link">l2normalize</a><wbr>(float[]&nbsp;v)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Modifies the argument to be unit length, dividing by its l2-norm.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static float[]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#l2normalize(float%5B%5D,boolean)" class="member-name-link">l2normalize</a><wbr>(float[]&nbsp;v,
 boolean&nbsp;throwOnZero)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Modifies the argument to be unit length, dividing by its l2-norm.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static float</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#minMaxScalarQuantize(float%5B%5D,byte%5B%5D,float,float,float,float)" class="member-name-link">minMaxScalarQuantize</a><wbr>(float[]&nbsp;vector,
 byte[]&nbsp;dest,
 float&nbsp;scale,
 float&nbsp;alpha,
 float&nbsp;minQuantile,
 float&nbsp;maxQuantile)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Scalar quantizes <code>vector</code>, putting the result into <code>dest</code>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static float</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#recalculateOffset(byte%5B%5D,float,float,float,float,float,float)" class="member-name-link">recalculateOffset</a><wbr>(byte[]&nbsp;vector,
 float&nbsp;oldAlpha,
 float&nbsp;oldMinQuantile,
 float&nbsp;scale,
 float&nbsp;alpha,
 float&nbsp;minQuantile,
 float&nbsp;maxQuantile)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Recalculates the offset for <code>vector</code>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static float</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#scaleMaxInnerProductScore(float)" class="member-name-link">scaleMaxInnerProductScore</a><wbr>(float&nbsp;vectorDotProductSimilarity)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#squareDistance(byte%5B%5D,byte%5B%5D)" class="member-name-link">squareDistance</a><wbr>(byte[]&nbsp;a,
 byte[]&nbsp;b)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns the sum of squared differences of the two vectors.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static float</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#squareDistance(float%5B%5D,float%5B%5D)" class="member-name-link">squareDistance</a><wbr>(float[]&nbsp;a,
 float[]&nbsp;b)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns the sum of squared differences of the two vectors.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#xorBitCount(byte%5B%5D,byte%5B%5D)" class="member-name-link">xorBitCount</a><wbr>(byte[]&nbsp;a,
 byte[]&nbsp;b)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">XOR bit count computed over signed bytes.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone--" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals-java.lang.Object-" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize--" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass--" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode--" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify--" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll--" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString--" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait--" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait-long-" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait-long-int-" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="dotProduct(float[],float[])">
<h3>dotProduct</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">float</span>&nbsp;<span class="element-name">dotProduct</span><wbr><span class="parameters">(float[]&nbsp;a,
 float[]&nbsp;b)</span></div>
<div class="block">Returns the vector dot product of the two vectors.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if the vectors' dimensions differ.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="cosine(float[],float[])">
<h3>cosine</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">float</span>&nbsp;<span class="element-name">cosine</span><wbr><span class="parameters">(float[]&nbsp;a,
 float[]&nbsp;b)</span></div>
<div class="block">Returns the cosine similarity between the two vectors.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if the vectors' dimensions differ.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="cosine(byte[],byte[])">
<h3>cosine</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">float</span>&nbsp;<span class="element-name">cosine</span><wbr><span class="parameters">(byte[]&nbsp;a,
 byte[]&nbsp;b)</span></div>
<div class="block">Returns the cosine similarity between the two vectors.</div>
</section>
</li>
<li>
<section class="detail" id="squareDistance(float[],float[])">
<h3>squareDistance</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">float</span>&nbsp;<span class="element-name">squareDistance</span><wbr><span class="parameters">(float[]&nbsp;a,
 float[]&nbsp;b)</span></div>
<div class="block">Returns the sum of squared differences of the two vectors.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if the vectors' dimensions differ.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="squareDistance(byte[],byte[])">
<h3>squareDistance</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">squareDistance</span><wbr><span class="parameters">(byte[]&nbsp;a,
 byte[]&nbsp;b)</span></div>
<div class="block">Returns the sum of squared differences of the two vectors.</div>
</section>
</li>
<li>
<section class="detail" id="l2normalize(float[])">
<h3>l2normalize</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">float[]</span>&nbsp;<span class="element-name">l2normalize</span><wbr><span class="parameters">(float[]&nbsp;v)</span></div>
<div class="block">Modifies the argument to be unit length, dividing by its l2-norm. IllegalArgumentException is
 thrown for zero vectors.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the input array after normalization</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isUnitVector(float[])">
<h3>isUnitVector</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isUnitVector</span><wbr><span class="parameters">(float[]&nbsp;v)</span></div>
</section>
</li>
<li>
<section class="detail" id="l2normalize(float[],boolean)">
<h3>l2normalize</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">float[]</span>&nbsp;<span class="element-name">l2normalize</span><wbr><span class="parameters">(float[]&nbsp;v,
 boolean&nbsp;throwOnZero)</span></div>
<div class="block">Modifies the argument to be unit length, dividing by its l2-norm.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>v</code> - the vector to normalize</dd>
<dd><code>throwOnZero</code> - whether to throw an exception when <code>v</code> has all zeros</dd>
<dt>Returns:</dt>
<dd>the input array after normalization</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - when the vector is all zero and throwOnZero is true</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="add(float[],float[])">
<h3>add</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">add</span><wbr><span class="parameters">(float[]&nbsp;u,
 float[]&nbsp;v)</span></div>
<div class="block">Adds the second argument to the first</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>u</code> - the destination</dd>
<dd><code>v</code> - the vector to add to the destination</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="dotProduct(byte[],byte[])">
<h3>dotProduct</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">dotProduct</span><wbr><span class="parameters">(byte[]&nbsp;a,
 byte[]&nbsp;b)</span></div>
<div class="block">Dot product computed over signed bytes.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>a</code> - bytes containing a vector</dd>
<dd><code>b</code> - bytes containing another vector, of the same dimension</dd>
<dt>Returns:</dt>
<dd>the value of the dot product of the two vectors</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="int4DotProduct(byte[],byte[])">
<h3>int4DotProduct</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">int4DotProduct</span><wbr><span class="parameters">(byte[]&nbsp;a,
 byte[]&nbsp;b)</span></div>
</section>
</li>
<li>
<section class="detail" id="int4DotProductPacked(byte[],byte[])">
<h3>int4DotProductPacked</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">int4DotProductPacked</span><wbr><span class="parameters">(byte[]&nbsp;unpacked,
 byte[]&nbsp;packed)</span></div>
<div class="block">Dot product computed over int4 (values between [0,15]) bytes. The second vector is considered
 "packed" (i.e. every byte representing two values). The following packing is assumed:

 <pre class="prettyprint lang-java">
   packed[0] = (raw[0] * 16) | raw[packed.length];
   packed[1] = (raw[1] * 16) | raw[packed.length + 1];
   ...
   packed[packed.length - 1] = (raw[packed.length - 1] * 16) | raw[2 * packed.length - 1];
 </pre></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>unpacked</code> - the unpacked vector, of even length</dd>
<dd><code>packed</code> - the packed vector, of length <code>(unpacked.length + 1) / 2</code></dd>
<dt>Returns:</dt>
<dd>the value of the dot product of the two vectors</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="int4BitDotProduct(byte[],byte[])">
<h3>int4BitDotProduct</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">int4BitDotProduct</span><wbr><span class="parameters">(byte[]&nbsp;q,
 byte[]&nbsp;d)</span></div>
<div class="block">Dot product computed over int4 (values between [0,15]) bytes and a binary vector.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>q</code> - the int4 query vector</dd>
<dd><code>d</code> - the binary document vector</dd>
<dt>Returns:</dt>
<dd>the dot product</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="xorBitCount(byte[],byte[])">
<h3>xorBitCount</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">xorBitCount</span><wbr><span class="parameters">(byte[]&nbsp;a,
 byte[]&nbsp;b)</span></div>
<div class="block">XOR bit count computed over signed bytes.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>a</code> - bytes containing a vector</dd>
<dd><code>b</code> - bytes containing another vector, of the same dimension</dd>
<dt>Returns:</dt>
<dd>the value of the XOR bit count of the two vectors</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="dotProductScore(byte[],byte[])">
<h3>dotProductScore</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">float</span>&nbsp;<span class="element-name">dotProductScore</span><wbr><span class="parameters">(byte[]&nbsp;a,
 byte[]&nbsp;b)</span></div>
<div class="block">Dot product score computed over signed bytes, scaled to be in [0, 1].</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>a</code> - bytes containing a vector</dd>
<dd><code>b</code> - bytes containing another vector, of the same dimension</dd>
<dt>Returns:</dt>
<dd>the value of the similarity function applied to the two vectors</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="scaleMaxInnerProductScore(float)">
<h3>scaleMaxInnerProductScore</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">float</span>&nbsp;<span class="element-name">scaleMaxInnerProductScore</span><wbr><span class="parameters">(float&nbsp;vectorDotProductSimilarity)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>vectorDotProductSimilarity</code> - the raw similarity between two vectors</dd>
<dt>Returns:</dt>
<dd>A scaled score preventing negative scores for maximum-inner-product</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="checkFinite(float[])">
<h3>checkFinite</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">float[]</span>&nbsp;<span class="element-name">checkFinite</span><wbr><span class="parameters">(float[]&nbsp;v)</span></div>
<div class="block">Checks if a float vector only has finite components.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>v</code> - bytes containing a vector</dd>
<dt>Returns:</dt>
<dd>the vector for call-chaining</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if any component of vector is not finite</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="findNextGEQ(int[],int,int,int)">
<h3>findNextGEQ</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">findNextGEQ</span><wbr><span class="parameters">(int[]&nbsp;buffer,
 int&nbsp;target,
 int&nbsp;from,
 int&nbsp;to)</span></div>
<div class="block">Given an array <code>buffer</code> that is sorted between indexes <code>0</code> inclusive and <code>to</code>
 exclusive, find the first array index whose value is greater than or equal to <code>target</code>.
 This index is guaranteed to be at least <code>from</code>. If there is no such array index, <code>
 to</code> is returned.</div>
</section>
</li>
<li>
<section class="detail" id="minMaxScalarQuantize(float[],byte[],float,float,float,float)">
<h3>minMaxScalarQuantize</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">float</span>&nbsp;<span class="element-name">minMaxScalarQuantize</span><wbr><span class="parameters">(float[]&nbsp;vector,
 byte[]&nbsp;dest,
 float&nbsp;scale,
 float&nbsp;alpha,
 float&nbsp;minQuantile,
 float&nbsp;maxQuantile)</span></div>
<div class="block">Scalar quantizes <code>vector</code>, putting the result into <code>dest</code>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>vector</code> - the vector to quantize</dd>
<dd><code>dest</code> - the destination vector</dd>
<dd><code>scale</code> - the scaling factor</dd>
<dd><code>alpha</code> - the alpha value</dd>
<dd><code>minQuantile</code> - the lower quantile of the distribution</dd>
<dd><code>maxQuantile</code> - the upper quantile of the distribution</dd>
<dt>Returns:</dt>
<dd>the corrective offset that needs to be applied to the score</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="recalculateOffset(byte[],float,float,float,float,float,float)">
<h3>recalculateOffset</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">float</span>&nbsp;<span class="element-name">recalculateOffset</span><wbr><span class="parameters">(byte[]&nbsp;vector,
 float&nbsp;oldAlpha,
 float&nbsp;oldMinQuantile,
 float&nbsp;scale,
 float&nbsp;alpha,
 float&nbsp;minQuantile,
 float&nbsp;maxQuantile)</span></div>
<div class="block">Recalculates the offset for <code>vector</code>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>vector</code> - the vector to quantize</dd>
<dd><code>oldAlpha</code> - the previous alpha value</dd>
<dd><code>oldMinQuantile</code> - the previous lower quantile</dd>
<dd><code>scale</code> - the scaling factor</dd>
<dd><code>alpha</code> - the alpha value</dd>
<dd><code>minQuantile</code> - the lower quantile of the distribution</dd>
<dd><code>maxQuantile</code> - the upper quantile of the distribution</dd>
<dt>Returns:</dt>
<dd>the new corrective offset</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><i>Copyright &copy; 2000-2025 Apache Software Foundation. All Rights Reserved.</i></small></p>
</footer>
</div>
</div>
</body>
</html>
