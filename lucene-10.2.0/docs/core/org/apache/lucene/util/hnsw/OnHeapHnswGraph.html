<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) on Fri Apr 04 15:37:21 CEST 2025 -->
<title>OnHeapHnswGraph (Lucene 10.2.0 core API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-04-04">
<meta name="description" content="declaration: package: org.apache.lucene.util.hnsw, class: OnHeapHnswGraph">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/OnHeapHnswGraph.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li><a href="#nested-class-summary">Nested</a></li>
<li><a href="#field-summary">Field</a></li>
<li>Constr</li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.lucene.util.hnsw</a></div>
<h1 title="Class OnHeapHnswGraph" class="title">Class OnHeapHnswGraph</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance"><a href="HnswGraph.html" title="class in org.apache.lucene.util.hnsw">org.apache.lucene.util.hnsw.HnswGraph</a>
<div class="inheritance">org.apache.lucene.util.hnsw.OnHeapHnswGraph</div>
</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../Accountable.html" title="interface in org.apache.lucene.util">Accountable</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public final class </span><span class="element-name type-name-label">OnHeapHnswGraph</span>
<span class="extends-implements">extends <a href="HnswGraph.html" title="class in org.apache.lucene.util.hnsw">HnswGraph</a>
implements <a href="../Accountable.html" title="interface in org.apache.lucene.util">Accountable</a></span></div>
<div class="block">An <a href="HnswGraph.html" title="class in org.apache.lucene.util.hnsw"><code>HnswGraph</code></a> where all nodes and connections are held in memory. This class is used to
 construct the HNSW graph before it's written to the index.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="inherited-list">
<h2 id="nested-classes-inherited-from-class-org.apache.lucene.util.hnsw.HnswGraph">Nested classes/interfaces inherited from class&nbsp;org.apache.lucene.util.hnsw.<a href="HnswGraph.html" title="class in org.apache.lucene.util.hnsw">HnswGraph</a></h2>
<code><a href="HnswGraph.ArrayNodesIterator.html" title="class in org.apache.lucene.util.hnsw">HnswGraph.ArrayNodesIterator</a>, <a href="HnswGraph.CollectionNodesIterator.html" title="class in org.apache.lucene.util.hnsw">HnswGraph.CollectionNodesIterator</a>, <a href="HnswGraph.NodesIterator.html" title="class in org.apache.lucene.util.hnsw">HnswGraph.NodesIterator</a></code></div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-org.apache.lucene.util.hnsw.HnswGraph">Fields inherited from class&nbsp;org.apache.lucene.util.hnsw.<a href="HnswGraph.html" title="class in org.apache.lucene.util.hnsw">HnswGraph</a></h3>
<code><a href="HnswGraph.html#EMPTY">EMPTY</a>, <a href="HnswGraph.html#UNKNOWN_MAX_CONN">UNKNOWN_MAX_CONN</a></code></div>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-org.apache.lucene.util.Accountable">Fields inherited from interface&nbsp;org.apache.lucene.util.<a href="../Accountable.html" title="interface in org.apache.lucene.util">Accountable</a></h3>
<code><a href="../Accountable.html#NULL_ACCOUNTABLE">NULL_ACCOUNTABLE</a></code></div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addNode(int,int)" class="member-name-link">addNode</a><wbr>(int&nbsp;level,
 int&nbsp;node)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Add node on the given level.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#entryNode()" class="member-name-link">entryNode</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the graph's current entry node on the top level shown as ordinals of the nodes on 0th
 level</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="NeighborArray.html" title="class in org.apache.lucene.util.hnsw">NeighborArray</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getNeighbors(int,int)" class="member-name-link">getNeighbors</a><wbr>(int&nbsp;level,
 int&nbsp;node)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the <a href="NeighborQueue.html" title="class in org.apache.lucene.util.hnsw"><code>NeighborQueue</code></a> connected to the given node.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="HnswGraph.NodesIterator.html" title="class in org.apache.lucene.util.hnsw">HnswGraph.NodesIterator</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getNodesOnLevel(int)" class="member-name-link">getNodesOnLevel</a><wbr>(int&nbsp;level)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">WARN: calling this method will essentially iterate through all nodes at level 0 (even if you're
 not getting node at level 0), we have built some caching mechanism such that if graph is not
 changed only the first non-zero level call will pay the cost.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#maxConn()" class="member-name-link">maxConn</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">returns M, the maximum number of connections for a node.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#maxNodeId()" class="member-name-link">maxNodeId</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">When we initialize from another graph, the max node id is different from <a href="#size()"><code>size()</code></a>,
 because we will add nodes out of order, such that we need two method for each</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#neighborCount()" class="member-name-link">neighborCount</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#nextNeighbor()" class="member-name-link">nextNeighbor</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Iterates over the neighbor list.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#numLevels()" class="member-name-link">numLevels</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the current number of levels in the graph</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#ramBytesUsed()" class="member-name-link">ramBytesUsed</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return the memory usage of this object in bytes.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#seek(int,int)" class="member-name-link">seek</a><wbr>(int&nbsp;level,
 int&nbsp;targetNode)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Move the pointer to exactly the given <code>level</code>'s <code>target</code>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#size()" class="member-name-link">size</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the number of nodes in the graph</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toString()" class="member-name-link">toString</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tryPromoteNewEntryNode(int,int,int)" class="member-name-link">tryPromoteNewEntryNode</a><wbr>(int&nbsp;node,
 int&nbsp;level,
 int&nbsp;expectOldLevel)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Try to promote the provided node to the entry node</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#trySetNewEntryNode(int,int)" class="member-name-link">trySetNewEntryNode</a><wbr>(int&nbsp;node,
 int&nbsp;level)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Try to set the entry node if the graph does not have one</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone--" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals-java.lang.Object-" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize--" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass--" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode--" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify--" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll--" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait--" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait-long-" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait-long-int-" title="class or interface in java.lang" class="external-link">wait</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.apache.lucene.util.Accountable">Methods inherited from interface&nbsp;org.apache.lucene.util.<a href="../Accountable.html" title="interface in org.apache.lucene.util">Accountable</a></h3>
<code><a href="../Accountable.html#getChildResources()">getChildResources</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getNeighbors(int,int)">
<h3>getNeighbors</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="NeighborArray.html" title="class in org.apache.lucene.util.hnsw">NeighborArray</a></span>&nbsp;<span class="element-name">getNeighbors</span><wbr><span class="parameters">(int&nbsp;level,
 int&nbsp;node)</span></div>
<div class="block">Returns the <a href="NeighborQueue.html" title="class in org.apache.lucene.util.hnsw"><code>NeighborQueue</code></a> connected to the given node.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>level</code> - level of the graph</dd>
<dd><code>node</code> - the node whose neighbors are returned, represented as an ordinal on the level 0.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="size()">
<h3>size</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">size</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from class:&nbsp;<code><a href="HnswGraph.html#size()">HnswGraph</a></code></span></div>
<div class="block">Returns the number of nodes in the graph</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="HnswGraph.html#size()">size</a></code>&nbsp;in class&nbsp;<code><a href="HnswGraph.html" title="class in org.apache.lucene.util.hnsw">HnswGraph</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="maxNodeId()">
<h3>maxNodeId</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">maxNodeId</span>()</div>
<div class="block">When we initialize from another graph, the max node id is different from <a href="#size()"><code>size()</code></a>,
 because we will add nodes out of order, such that we need two method for each</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="HnswGraph.html#maxNodeId()">maxNodeId</a></code>&nbsp;in class&nbsp;<code><a href="HnswGraph.html" title="class in org.apache.lucene.util.hnsw">HnswGraph</a></code></dd>
<dt>Returns:</dt>
<dd>max node id (inclusive)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addNode(int,int)">
<h3>addNode</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">addNode</span><wbr><span class="parameters">(int&nbsp;level,
 int&nbsp;node)</span></div>
<div class="block">Add node on the given level. Nodes can be inserted out of order, but it requires that the nodes
 preceded by the node inserted out of order are eventually added.

 <p>NOTE: You must add a node starting from the node's top level</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>level</code> - level to add a node on</dd>
<dd><code>node</code> - the node to add, represented as an ordinal on the level 0.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="seek(int,int)">
<h3>seek</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">seek</span><wbr><span class="parameters">(int&nbsp;level,
 int&nbsp;targetNode)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from class:&nbsp;<code><a href="HnswGraph.html#seek(int,int)">HnswGraph</a></code></span></div>
<div class="block">Move the pointer to exactly the given <code>level</code>'s <code>target</code>. After this method
 returns, call <a href="HnswGraph.html#nextNeighbor()"><code>HnswGraph.nextNeighbor()</code></a> to return successive (ordered) connected node ordinals.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="HnswGraph.html#seek(int,int)">seek</a></code>&nbsp;in class&nbsp;<code><a href="HnswGraph.html" title="class in org.apache.lucene.util.hnsw">HnswGraph</a></code></dd>
<dt>Parameters:</dt>
<dd><code>level</code> - level of the graph</dd>
<dd><code>targetNode</code> - ordinal of a node in the graph, must be &ge; 0 and &lt; <a href="../../index/KnnVectorValues.html#size()"><code>KnnVectorValues.size()</code></a>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="neighborCount()">
<h3>neighborCount</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">neighborCount</span>()</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="HnswGraph.html#neighborCount()">neighborCount</a></code>&nbsp;in class&nbsp;<code><a href="HnswGraph.html" title="class in org.apache.lucene.util.hnsw">HnswGraph</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="nextNeighbor()">
<h3>nextNeighbor</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">nextNeighbor</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from class:&nbsp;<code><a href="HnswGraph.html#nextNeighbor()">HnswGraph</a></code></span></div>
<div class="block">Iterates over the neighbor list. It is illegal to call this method after it returns
 NO_MORE_DOCS without calling <a href="HnswGraph.html#seek(int,int)"><code>HnswGraph.seek(int, int)</code></a>, which resets the iterator.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="HnswGraph.html#nextNeighbor()">nextNeighbor</a></code>&nbsp;in class&nbsp;<code><a href="HnswGraph.html" title="class in org.apache.lucene.util.hnsw">HnswGraph</a></code></dd>
<dt>Returns:</dt>
<dd>a node ordinal in the graph, or NO_MORE_DOCS if the iteration is complete.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="numLevels()">
<h3>numLevels</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">numLevels</span>()</div>
<div class="block">Returns the current number of levels in the graph</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="HnswGraph.html#numLevels()">numLevels</a></code>&nbsp;in class&nbsp;<code><a href="HnswGraph.html" title="class in org.apache.lucene.util.hnsw">HnswGraph</a></code></dd>
<dt>Returns:</dt>
<dd>the current number of levels in the graph</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="entryNode()">
<h3>entryNode</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">entryNode</span>()</div>
<div class="block">Returns the graph's current entry node on the top level shown as ordinals of the nodes on 0th
 level</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="HnswGraph.html#entryNode()">entryNode</a></code>&nbsp;in class&nbsp;<code><a href="HnswGraph.html" title="class in org.apache.lucene.util.hnsw">HnswGraph</a></code></dd>
<dt>Returns:</dt>
<dd>the graph's current entry node on the top level</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="maxConn()">
<h3>maxConn</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">maxConn</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from class:&nbsp;<code><a href="HnswGraph.html#maxConn()">HnswGraph</a></code></span></div>
<div class="block">returns M, the maximum number of connections for a node.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="HnswGraph.html#maxConn()">maxConn</a></code>&nbsp;in class&nbsp;<code><a href="HnswGraph.html" title="class in org.apache.lucene.util.hnsw">HnswGraph</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="trySetNewEntryNode(int,int)">
<h3>trySetNewEntryNode</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">trySetNewEntryNode</span><wbr><span class="parameters">(int&nbsp;node,
 int&nbsp;level)</span></div>
<div class="block">Try to set the entry node if the graph does not have one</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>True if the entry node is set to the provided node. False if the entry node already
     exists</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="tryPromoteNewEntryNode(int,int,int)">
<h3>tryPromoteNewEntryNode</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">tryPromoteNewEntryNode</span><wbr><span class="parameters">(int&nbsp;node,
 int&nbsp;level,
 int&nbsp;expectOldLevel)</span></div>
<div class="block">Try to promote the provided node to the entry node</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>level</code> - should be larger than expectedOldLevel</dd>
<dd><code>expectOldLevel</code> - is the old entry node level the caller expect to be, the actual graph
     level can be different due to concurrent modification</dd>
<dt>Returns:</dt>
<dd>True if the entry node is set to the provided node. False if expectOldLevel is not the
     same as the current entry node level. Even if the provided node's level is still higher
     than the current entry node level, the new entry node will not be set and false will be
     returned.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getNodesOnLevel(int)">
<h3>getNodesOnLevel</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="HnswGraph.NodesIterator.html" title="class in org.apache.lucene.util.hnsw">HnswGraph.NodesIterator</a></span>&nbsp;<span class="element-name">getNodesOnLevel</span><wbr><span class="parameters">(int&nbsp;level)</span></div>
<div class="block">WARN: calling this method will essentially iterate through all nodes at level 0 (even if you're
 not getting node at level 0), we have built some caching mechanism such that if graph is not
 changed only the first non-zero level call will pay the cost. So it is highly NOT recommended
 to call this method while the graph is still building.

 <p>NOTE: calling this method while the graph is still building is prohibited</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="HnswGraph.html#getNodesOnLevel(int)">getNodesOnLevel</a></code>&nbsp;in class&nbsp;<code><a href="HnswGraph.html" title="class in org.apache.lucene.util.hnsw">HnswGraph</a></code></dd>
<dt>Parameters:</dt>
<dd><code>level</code> - level for which to get all nodes</dd>
<dt>Returns:</dt>
<dd>an iterator over nodes where <code>nextInt</code> returns a next node on the level</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="ramBytesUsed()">
<h3>ramBytesUsed</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">ramBytesUsed</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="../Accountable.html#ramBytesUsed()">Accountable</a></code></span></div>
<div class="block">Return the memory usage of this object in bytes. Negative values are illegal.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../Accountable.html#ramBytesUsed()">ramBytesUsed</a></code>&nbsp;in interface&nbsp;<code><a href="../Accountable.html" title="interface in org.apache.lucene.util">Accountable</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="toString()">
<h3>toString</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">toString</span>()</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString--" title="class or interface in java.lang" class="external-link">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><i>Copyright &copy; 2000-2025 Apache Software Foundation. All Rights Reserved.</i></small></p>
</footer>
</div>
</div>
</body>
</html>
