<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) on Fri Apr 04 15:37:21 CEST 2025 -->
<title>FSTCompiler (Lucene 10.2.0 core API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-04-04">
<meta name="description" content="declaration: package: org.apache.lucene.util.fst, class: FSTCompiler">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/FSTCompiler.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li><a href="#nested-class-summary">Nested</a></li>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.lucene.util.fst</a></div>
<h1 title="Class FSTCompiler" class="title">Class FSTCompiler&lt;T&gt;</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.lucene.util.fst.FSTCompiler&lt;T&gt;</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">FSTCompiler&lt;T&gt;</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">Builds a minimal FST (maps an IntsRef term to an arbitrary output) from pre-sorted terms with
 outputs. The FST becomes an FSA if you use NoOutputs. The FST is written on-the-fly into a
 compact serialized format byte array, which can be saved to / loaded from a Directory or used
 directly for traversal. The FST is always finite (no cycles).

 <p>NOTE: The algorithm is described at
 http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.24.3698

 <p>The parameterized type T is the output type. See the subclasses of <a href="Outputs.html" title="class in org.apache.lucene.util.fst"><code>Outputs</code></a>.

 <p>FSTs larger than 2.1GB are now possible (as of Lucene 4.2). FSTs containing more than 2.1B
 nodes are also now possible, however they cannot be packed.

 <p>It now supports 3 different workflows:

 <p>- Build FST and use it immediately entirely in RAM and then discard it

 <p>- Build FST and use it immediately entirely in RAM and also save it to other DataOutput, and
 load it later and use it

 <p>- Build FST but stream it immediately to disk (except the FSTMetaData, to be saved at the
 end). In order to use it, you need to construct the corresponding DataInput and use the FST
 constructor to read it.</div>
<dl class="notes">
<dt>WARNING: This API is experimental and might change in incompatible ways in the next release.</dt>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static class&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="FSTCompiler.Builder.html" class="type-name-link" title="class in org.apache.lucene.util.fst">FSTCompiler.Builder</a>&lt;<a href="FSTCompiler.Builder.html" title="type parameter in FSTCompiler.Builder">T</a>&gt;</code></div>
<div class="col-last even-row-color">
<div class="block">Fluent-style constructor for FST <a href="FSTCompiler.html" title="class in org.apache.lucene.util.fst"><code>FSTCompiler</code></a>.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#add(org.apache.lucene.util.IntsRef,T)" class="member-name-link">add</a><wbr>(<a href="../IntsRef.html" title="class in org.apache.lucene.util">IntsRef</a>&nbsp;input,
 <a href="FSTCompiler.html" title="type parameter in FSTCompiler">T</a>&nbsp;output)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Add the next input/output pair.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="FST.FSTMetadata.html" title="class in org.apache.lucene.util.fst">FST.FSTMetadata</a><wbr>&lt;<a href="FSTCompiler.html" title="type parameter in FSTCompiler">T</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#compile()" class="member-name-link">compile</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the metadata of the final FST.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#fstRamBytesUsed()" class="member-name-link">fstRamBytesUsed</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#fstSizeInBytes()" class="member-name-link">fstSizeInBytes</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getArcCount()" class="member-name-link">getArcCount</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>float</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getDirectAddressingMaxOversizingFactor()" class="member-name-link">getDirectAddressingMaxOversizingFactor</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="FSTReader.html" title="interface in org.apache.lucene.util.fst">FSTReader</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getFSTReader()" class="member-name-link">getFSTReader</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the respective <a href="FSTReader.html" title="interface in org.apache.lucene.util.fst"><code>FSTReader</code></a> of the <a href="../../store/DataOutput.html" title="class in org.apache.lucene.store"><code>DataOutput</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getNodeCount()" class="member-name-link">getNodeCount</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="../../store/DataOutput.html" title="class in org.apache.lucene.store">DataOutput</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getOnHeapReaderWriter(int)" class="member-name-link">getOnHeapReaderWriter</a><wbr>(int&nbsp;blockBits)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Get an on-heap DataOutput that allows the FST to be read immediately after writing, and also
 optionally saved to an external DataOutput.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone--" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals-java.lang.Object-" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize--" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass--" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode--" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify--" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll--" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString--" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait--" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait-long-" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait-long-int-" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getOnHeapReaderWriter(int)">
<h3>getOnHeapReaderWriter</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="../../store/DataOutput.html" title="class in org.apache.lucene.store">DataOutput</a></span>&nbsp;<span class="element-name">getOnHeapReaderWriter</span><wbr><span class="parameters">(int&nbsp;blockBits)</span></div>
<div class="block">Get an on-heap DataOutput that allows the FST to be read immediately after writing, and also
 optionally saved to an external DataOutput.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>blockBits</code> - how many bits wide to make each block of the DataOutput</dd>
<dt>Returns:</dt>
<dd>the DataOutput</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getFSTReader()">
<h3>getFSTReader</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="FSTReader.html" title="interface in org.apache.lucene.util.fst">FSTReader</a></span>&nbsp;<span class="element-name">getFSTReader</span>()</div>
<div class="block">Get the respective <a href="FSTReader.html" title="interface in org.apache.lucene.util.fst"><code>FSTReader</code></a> of the <a href="../../store/DataOutput.html" title="class in org.apache.lucene.store"><code>DataOutput</code></a>. To call this method, you need
 to use the default DataOutput or <a href="#getOnHeapReaderWriter(int)"><code>getOnHeapReaderWriter(int)</code></a>, otherwise we will throw
 an exception.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the DataOutput as FSTReader</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if the DataOutput does not implement FSTReader</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getDirectAddressingMaxOversizingFactor()">
<h3>getDirectAddressingMaxOversizingFactor</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">float</span>&nbsp;<span class="element-name">getDirectAddressingMaxOversizingFactor</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getNodeCount()">
<h3>getNodeCount</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getNodeCount</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getArcCount()">
<h3>getArcCount</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getArcCount</span>()</div>
</section>
</li>
<li>
<section class="detail" id="add(org.apache.lucene.util.IntsRef,T)">
<h3 id="add(org.apache.lucene.util.IntsRef,java.lang.Object)">add</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">add</span><wbr><span class="parameters">(<a href="../IntsRef.html" title="class in org.apache.lucene.util">IntsRef</a>&nbsp;input,
 <a href="FSTCompiler.html" title="type parameter in FSTCompiler">T</a>&nbsp;output)</span>
         throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Add the next input/output pair. The provided input must be sorted after the previous one
 according to <a href="../IntsRef.html#compareTo(org.apache.lucene.util.IntsRef)"><code>IntsRef.compareTo(org.apache.lucene.util.IntsRef)</code></a>. It's also OK to add the same input twice in a row with
 different outputs, as long as <a href="Outputs.html" title="class in org.apache.lucene.util.fst"><code>Outputs</code></a> implements the <a href="Outputs.html#merge(T,T)"><code>Outputs.merge(T, T)</code></a> method. Note
 that input is fully consumed after this method is returned (so caller is free to reuse), but
 output is not. So if your outputs are changeable (eg <a href="ByteSequenceOutputs.html" title="class in org.apache.lucene.util.fst"><code>ByteSequenceOutputs</code></a> or <a href="IntSequenceOutputs.html" title="class in org.apache.lucene.util.fst"><code>IntSequenceOutputs</code></a>) then you cannot reuse across calls.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="compile()">
<h3>compile</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="FST.FSTMetadata.html" title="class in org.apache.lucene.util.fst">FST.FSTMetadata</a>&lt;<a href="FSTCompiler.html" title="type parameter in FSTCompiler">T</a>&gt;</span>&nbsp;<span class="element-name">compile</span>()
                           throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Returns the metadata of the final FST. NOTE: this will return null if nothing is accepted by
 the FST themselves.

 <p>To create the FST, you need to:

 <p>- If a FSTReader DataOutput was used, such as the one returned by <a href="#getOnHeapReaderWriter(int)"><code>getOnHeapReaderWriter(int)</code></a>

 <pre class="prettyprint">
     fstMetadata = fstCompiler.compile();
     fst = FST.fromFSTReader(fstMetadata, fstCompiler.getFSTReader());
 </pre>

 <p>- If a non-FSTReader DataOutput was used, such as <a href="../../store/IndexOutput.html" title="class in org.apache.lucene.store"><code>IndexOutput</code></a>, you need to first create the corresponding <a href="../../store/DataInput.html" title="class in org.apache.lucene.store"><code>DataInput</code></a>, such as <a href="../../store/IndexInput.html" title="class in org.apache.lucene.store"><code>IndexInput</code></a> then
 pass it to the FST construct

 <pre class="prettyprint">
     fstMetadata = fstCompiler.compile();
     fst = new FST&lt;&gt;(fstMetadata, dataInput, new OffHeapFSTStore());
 </pre></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="fstRamBytesUsed()">
<h3>fstRamBytesUsed</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">fstRamBytesUsed</span>()</div>
</section>
</li>
<li>
<section class="detail" id="fstSizeInBytes()">
<h3>fstSizeInBytes</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">fstSizeInBytes</span>()</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><i>Copyright &copy; 2000-2025 Apache Software Foundation. All Rights Reserved.</i></small></p>
</footer>
</div>
</div>
</body>
</html>
