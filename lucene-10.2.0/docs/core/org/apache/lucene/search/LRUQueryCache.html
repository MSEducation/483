<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) on Fri Apr 04 15:37:21 CEST 2025 -->
<title>LRUQueryCache (Lucene 10.2.0 core API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-04-04">
<meta name="description" content="declaration: package: org.apache.lucene.search, class: LRUQueryCache">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/LRUQueryCache.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li><a href="#nested-class-summary">Nested</a></li>
<li><a href="#field-summary">Field</a></li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.lucene.search</a></div>
<h1 title="Class LRUQueryCache" class="title">Class LRUQueryCache</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.lucene.search.LRUQueryCache</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="QueryCache.html" title="interface in org.apache.lucene.search">QueryCache</a></code>, <code><a href="../util/Accountable.html" title="interface in org.apache.lucene.util">Accountable</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">LRUQueryCache</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="QueryCache.html" title="interface in org.apache.lucene.search">QueryCache</a>, <a href="../util/Accountable.html" title="interface in org.apache.lucene.util">Accountable</a></span></div>
<div class="block">A <a href="QueryCache.html" title="interface in org.apache.lucene.search"><code>QueryCache</code></a> that evicts queries using a LRU (least-recently-used) eviction policy in
 order to remain under a given maximum size and number of bytes used.

 <p>This class is thread-safe.

 <p>Note that query eviction runs in linear time with the total number of segments that have cache
 entries so this cache works best with <a href="QueryCachingPolicy.html" title="interface in org.apache.lucene.search"><code>caching policies</code></a> that only cache
 on "large" segments, and it is advised to not share this cache across too many indices.

 <p>A default query cache and policy instance is used in IndexSearcher. If you want to replace
 those defaults it is typically done like this:

 <pre class="prettyprint">
   final int maxNumberOfCachedQueries = 256;
   final long maxRamBytesUsed = 50 * 1024L * 1024L; // 50MB
   // these cache and policy instances can be shared across several queries and readers
   // it is fine to eg. store them into static variables
   final QueryCache queryCache = new LRUQueryCache(maxNumberOfCachedQueries, maxRamBytesUsed);
   final QueryCachingPolicy defaultCachingPolicy = new UsageTrackingQueryCachingPolicy();
   indexSearcher.setQueryCache(queryCache);
   indexSearcher.setQueryCachingPolicy(defaultCachingPolicy);
 </pre>

 This cache exposes some global statistics (<a href="#getHitCount()"><code>hit count</code></a>, <a href="#getMissCount()"><code>miss count</code></a>, <a href="#getCacheSize()"><code>number of cache entries</code></a>, <a href="#getCacheCount()"><code>total number of DocIdSets that have ever been cached</code></a>, <a href="#getEvictionCount()"><code>number of evicted entries</code></a>). In case you would like to have more fine-grained
 statistics, such as per-index or per-query-class statistics, it is possible to override various
 callbacks: <a href="#onHit(java.lang.Object,org.apache.lucene.search.Query)"><code>onHit(java.lang.Object, org.apache.lucene.search.Query)</code></a>, <a href="#onMiss(java.lang.Object,org.apache.lucene.search.Query)"><code>onMiss(java.lang.Object, org.apache.lucene.search.Query)</code></a>, <a href="#onQueryCache(org.apache.lucene.search.Query,long)"><code>onQueryCache(org.apache.lucene.search.Query, long)</code></a>, <a href="#onQueryEviction(org.apache.lucene.search.Query,long)"><code>onQueryEviction(org.apache.lucene.search.Query, long)</code></a>,
 <a href="#onDocIdSetCache(java.lang.Object,long)"><code>onDocIdSetCache(java.lang.Object, long)</code></a>, <a href="#onDocIdSetEviction(java.lang.Object,int,long)"><code>onDocIdSetEviction(java.lang.Object, int, long)</code></a> and <a href="#onClear()"><code>onClear()</code></a>. It is better to not
 perform heavy computations in these methods though since they are called synchronously and under
 a lock.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="QueryCachingPolicy.html" title="interface in org.apache.lucene.search"><code>QueryCachingPolicy</code></a></li>
</ul>
</dd>
<dt>WARNING: This API is experimental and might change in incompatible ways in the next release.</dt>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>protected static class&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="LRUQueryCache.CacheAndCount.html" class="type-name-link" title="class in org.apache.lucene.search">LRUQueryCache.CacheAndCount</a></code></div>
<div class="col-last even-row-color">
<div class="block">Cache of doc ids with a count.</div>
</div>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-org.apache.lucene.util.Accountable">Fields inherited from interface&nbsp;org.apache.lucene.util.<a href="../util/Accountable.html" title="interface in org.apache.lucene.util">Accountable</a></h3>
<code><a href="../util/Accountable.html#NULL_ACCOUNTABLE">NULL_ACCOUNTABLE</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(int,long)" class="member-name-link">LRUQueryCache</a><wbr>(int&nbsp;maxSize,
 long&nbsp;maxRamBytesUsed)</code></div>
<div class="col-last even-row-color">
<div class="block">Create a new instance that will cache at most <code>maxSize</code> queries with at most <code>
 maxRamBytesUsed</code> bytes of memory.</div>
</div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(int,long,java.util.function.Predicate,float)" class="member-name-link">LRUQueryCache</a><wbr>(int&nbsp;maxSize,
 long&nbsp;maxRamBytesUsed,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Predicate.html" title="class or interface in java.util.function" class="external-link">Predicate</a>&lt;<a href="../index/LeafReaderContext.html" title="class in org.apache.lucene.index">LeafReaderContext</a>&gt;&nbsp;leavesToCache,
 float&nbsp;skipCacheFactor)</code></div>
<div class="col-last odd-row-color">
<div class="block">Expert: Create a new instance that will cache at most <code>maxSize</code> queries with at most
 <code>maxRamBytesUsed</code> bytes of memory, only on leaves that satisfy <code>
 leavesToCache</code>.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="LRUQueryCache.CacheAndCount.html" title="class in org.apache.lucene.search">LRUQueryCache.CacheAndCount</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#cacheImpl(org.apache.lucene.search.BulkScorer,int)" class="member-name-link">cacheImpl</a><wbr>(<a href="BulkScorer.html" title="class in org.apache.lucene.search">BulkScorer</a>&nbsp;scorer,
 int&nbsp;maxDoc)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Default cache implementation: uses <a href="../util/RoaringDocIdSet.html" title="class in org.apache.lucene.util"><code>RoaringDocIdSet</code></a> for sets that have a density &lt; 1%
 and a <a href="../util/BitDocIdSet.html" title="class in org.apache.lucene.util"><code>BitDocIdSet</code></a> over a <a href="../util/FixedBitSet.html" title="class in org.apache.lucene.util"><code>FixedBitSet</code></a> otherwise.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#clear()" class="member-name-link">clear</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Clear the content of this cache.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#clearCoreCacheKey(java.lang.Object)" class="member-name-link">clearCoreCacheKey</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;coreKey)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Remove all cache entries for the given core cache key.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#clearQuery(org.apache.lucene.search.Query)" class="member-name-link">clearQuery</a><wbr>(<a href="Query.html" title="class in org.apache.lucene.search">Query</a>&nbsp;query)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Remove all cache entries for the given query.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="Weight.html" title="class in org.apache.lucene.search">Weight</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doCache(org.apache.lucene.search.Weight,org.apache.lucene.search.QueryCachingPolicy)" class="member-name-link">doCache</a><wbr>(<a href="Weight.html" title="class in org.apache.lucene.search">Weight</a>&nbsp;weight,
 <a href="QueryCachingPolicy.html" title="interface in org.apache.lucene.search">QueryCachingPolicy</a>&nbsp;policy)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return a wrapper around the provided <code>weight</code> that will cache matching docs
 per-segment accordingly to the given <code>policy</code>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getCacheCount()" class="member-name-link">getCacheCount</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return the total number of cache entries that have been generated and put in the cache.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getCacheSize()" class="member-name-link">getCacheSize</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return the total number of <a href="DocIdSet.html" title="class in org.apache.lucene.search"><code>DocIdSet</code></a>s which are currently stored in the cache.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a><wbr>&lt;<a href="../util/Accountable.html" title="interface in org.apache.lucene.util">Accountable</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getChildResources()" class="member-name-link">getChildResources</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns nested resources of this class.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getEvictionCount()" class="member-name-link">getEvictionCount</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return the number of cache entries that have been removed from the cache either in order to
 stay under the maximum configured size/ram usage, or because a segment has been closed.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getHitCount()" class="member-name-link">getHitCount</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Over the <a href="#getTotalCount()"><code>total</code></a> number of times that a query has been looked up, return
 how many times a cached <a href="DocIdSet.html" title="class in org.apache.lucene.search"><code>DocIdSet</code></a> has been found and returned.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getMissCount()" class="member-name-link">getMissCount</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Over the <a href="#getTotalCount()"><code>total</code></a> number of times that a query has been looked up, return
 how many times this query was not contained in the cache.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>float</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getSkipCacheFactor()" class="member-name-link">getSkipCacheFactor</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the skip cache factor</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getTotalCount()" class="member-name-link">getTotalCount</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return the total number of times that a <a href="Query.html" title="class in org.apache.lucene.search"><code>Query</code></a> has been looked up in this <a href="QueryCache.html" title="interface in org.apache.lucene.search"><code>QueryCache</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#onClear()" class="member-name-link">onClear</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Expert: callback when the cache is completely cleared.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#onDocIdSetCache(java.lang.Object,long)" class="member-name-link">onDocIdSetCache</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;readerCoreKey,
 long&nbsp;ramBytesUsed)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Expert: callback when a <a href="DocIdSet.html" title="class in org.apache.lucene.search"><code>DocIdSet</code></a> is added to this cache.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#onDocIdSetEviction(java.lang.Object,int,long)" class="member-name-link">onDocIdSetEviction</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;readerCoreKey,
 int&nbsp;numEntries,
 long&nbsp;sumRamBytesUsed)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Expert: callback when one or more <a href="DocIdSet.html" title="class in org.apache.lucene.search"><code>DocIdSet</code></a>s are removed from this cache.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#onHit(java.lang.Object,org.apache.lucene.search.Query)" class="member-name-link">onHit</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;readerCoreKey,
 <a href="Query.html" title="class in org.apache.lucene.search">Query</a>&nbsp;query)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Expert: callback when there is a cache hit on a given query.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#onMiss(java.lang.Object,org.apache.lucene.search.Query)" class="member-name-link">onMiss</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;readerCoreKey,
 <a href="Query.html" title="class in org.apache.lucene.search">Query</a>&nbsp;query)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Expert: callback when there is a cache miss on a given query.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#onQueryCache(org.apache.lucene.search.Query,long)" class="member-name-link">onQueryCache</a><wbr>(<a href="Query.html" title="class in org.apache.lucene.search">Query</a>&nbsp;query,
 long&nbsp;ramBytesUsed)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Expert: callback when a query is added to this cache.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#onQueryEviction(org.apache.lucene.search.Query,long)" class="member-name-link">onQueryEviction</a><wbr>(<a href="Query.html" title="class in org.apache.lucene.search">Query</a>&nbsp;query,
 long&nbsp;ramBytesUsed)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Expert: callback when a query is evicted from this cache.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#ramBytesUsed()" class="member-name-link">ramBytesUsed</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return the memory usage of this object in bytes.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setSkipCacheFactor(float)" class="member-name-link">setSkipCacheFactor</a><wbr>(float&nbsp;skipCacheFactor)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This setter enables the skipCacheFactor to be updated dynamically.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone--" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals-java.lang.Object-" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize--" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass--" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode--" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify--" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll--" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString--" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait--" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait-long-" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait-long-int-" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(int,long,java.util.function.Predicate,float)">
<h3>LRUQueryCache</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">LRUQueryCache</span><wbr><span class="parameters">(int&nbsp;maxSize,
 long&nbsp;maxRamBytesUsed,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Predicate.html" title="class or interface in java.util.function" class="external-link">Predicate</a>&lt;<a href="../index/LeafReaderContext.html" title="class in org.apache.lucene.index">LeafReaderContext</a>&gt;&nbsp;leavesToCache,
 float&nbsp;skipCacheFactor)</span></div>
<div class="block">Expert: Create a new instance that will cache at most <code>maxSize</code> queries with at most
 <code>maxRamBytesUsed</code> bytes of memory, only on leaves that satisfy <code>
 leavesToCache</code>.

 <p>Also, clauses whose cost is <code>skipCacheFactor</code> times more than the cost of the
 top-level query will not be cached in order to not slow down queries too much.</div>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(int,long)">
<h3>LRUQueryCache</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">LRUQueryCache</span><wbr><span class="parameters">(int&nbsp;maxSize,
 long&nbsp;maxRamBytesUsed)</span></div>
<div class="block">Create a new instance that will cache at most <code>maxSize</code> queries with at most <code>
 maxRamBytesUsed</code> bytes of memory. Queries will only be cached on leaves that have more
 than 10k documents and have more than half of the average documents per leave of the index.
 This should guarantee that all leaves from the upper <a href="../index/TieredMergePolicy.html" title="class in org.apache.lucene.index"><code>tier</code></a> will be
 cached. Only clauses whose cost is at most 100x the cost of the top-level query will be cached
 in order to not hurt latency too much because of caching.</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getSkipCacheFactor()">
<h3>getSkipCacheFactor</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">float</span>&nbsp;<span class="element-name">getSkipCacheFactor</span>()</div>
<div class="block">Get the skip cache factor</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>#setSkipCacheFactor</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setSkipCacheFactor(float)">
<h3>setSkipCacheFactor</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setSkipCacheFactor</span><wbr><span class="parameters">(float&nbsp;skipCacheFactor)</span></div>
<div class="block">This setter enables the skipCacheFactor to be updated dynamically.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>skipCacheFactor</code> - clauses whose cost is <code>skipCacheFactor</code> times more than the cost
     of the top-level query will not be cached in order to not slow down queries too much.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="onHit(java.lang.Object,org.apache.lucene.search.Query)">
<h3>onHit</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">onHit</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;readerCoreKey,
 <a href="Query.html" title="class in org.apache.lucene.search">Query</a>&nbsp;query)</span></div>
<div class="block">Expert: callback when there is a cache hit on a given query. Implementing this method is
 typically useful in order to compute more fine-grained statistics about the query cache.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="#onMiss(java.lang.Object,org.apache.lucene.search.Query)"><code>onMiss(java.lang.Object, org.apache.lucene.search.Query)</code></a></li>
</ul>
</dd>
<dt>WARNING: This API is experimental and might change in incompatible ways in the next release.</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="onMiss(java.lang.Object,org.apache.lucene.search.Query)">
<h3>onMiss</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">onMiss</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;readerCoreKey,
 <a href="Query.html" title="class in org.apache.lucene.search">Query</a>&nbsp;query)</span></div>
<div class="block">Expert: callback when there is a cache miss on a given query.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="#onHit(java.lang.Object,org.apache.lucene.search.Query)"><code>onHit(java.lang.Object, org.apache.lucene.search.Query)</code></a></li>
</ul>
</dd>
<dt>WARNING: This API is experimental and might change in incompatible ways in the next release.</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="onQueryCache(org.apache.lucene.search.Query,long)">
<h3>onQueryCache</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">onQueryCache</span><wbr><span class="parameters">(<a href="Query.html" title="class in org.apache.lucene.search">Query</a>&nbsp;query,
 long&nbsp;ramBytesUsed)</span></div>
<div class="block">Expert: callback when a query is added to this cache. Implementing this method is typically
 useful in order to compute more fine-grained statistics about the query cache.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="#onQueryEviction(org.apache.lucene.search.Query,long)"><code>onQueryEviction(org.apache.lucene.search.Query, long)</code></a></li>
</ul>
</dd>
<dt>WARNING: This API is experimental and might change in incompatible ways in the next release.</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="onQueryEviction(org.apache.lucene.search.Query,long)">
<h3>onQueryEviction</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">onQueryEviction</span><wbr><span class="parameters">(<a href="Query.html" title="class in org.apache.lucene.search">Query</a>&nbsp;query,
 long&nbsp;ramBytesUsed)</span></div>
<div class="block">Expert: callback when a query is evicted from this cache.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="#onQueryCache(org.apache.lucene.search.Query,long)"><code>onQueryCache(org.apache.lucene.search.Query, long)</code></a></li>
</ul>
</dd>
<dt>WARNING: This API is experimental and might change in incompatible ways in the next release.</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="onDocIdSetCache(java.lang.Object,long)">
<h3>onDocIdSetCache</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">onDocIdSetCache</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;readerCoreKey,
 long&nbsp;ramBytesUsed)</span></div>
<div class="block">Expert: callback when a <a href="DocIdSet.html" title="class in org.apache.lucene.search"><code>DocIdSet</code></a> is added to this cache. Implementing this method is
 typically useful in order to compute more fine-grained statistics about the query cache.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="#onDocIdSetEviction(java.lang.Object,int,long)"><code>onDocIdSetEviction(java.lang.Object, int, long)</code></a></li>
</ul>
</dd>
<dt>WARNING: This API is experimental and might change in incompatible ways in the next release.</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="onDocIdSetEviction(java.lang.Object,int,long)">
<h3>onDocIdSetEviction</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">onDocIdSetEviction</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;readerCoreKey,
 int&nbsp;numEntries,
 long&nbsp;sumRamBytesUsed)</span></div>
<div class="block">Expert: callback when one or more <a href="DocIdSet.html" title="class in org.apache.lucene.search"><code>DocIdSet</code></a>s are removed from this cache.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="#onDocIdSetCache(java.lang.Object,long)"><code>onDocIdSetCache(java.lang.Object, long)</code></a></li>
</ul>
</dd>
<dt>WARNING: This API is experimental and might change in incompatible ways in the next release.</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="onClear()">
<h3>onClear</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">onClear</span>()</div>
<div class="block">Expert: callback when the cache is completely cleared.</div>
<dl class="notes">
<dt>WARNING: This API is experimental and might change in incompatible ways in the next release.</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="clearCoreCacheKey(java.lang.Object)">
<h3>clearCoreCacheKey</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">clearCoreCacheKey</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;coreKey)</span></div>
<div class="block">Remove all cache entries for the given core cache key.</div>
</section>
</li>
<li>
<section class="detail" id="clearQuery(org.apache.lucene.search.Query)">
<h3>clearQuery</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">clearQuery</span><wbr><span class="parameters">(<a href="Query.html" title="class in org.apache.lucene.search">Query</a>&nbsp;query)</span></div>
<div class="block">Remove all cache entries for the given query.</div>
</section>
</li>
<li>
<section class="detail" id="clear()">
<h3>clear</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">clear</span>()</div>
<div class="block">Clear the content of this cache.</div>
</section>
</li>
<li>
<section class="detail" id="doCache(org.apache.lucene.search.Weight,org.apache.lucene.search.QueryCachingPolicy)">
<h3>doCache</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="Weight.html" title="class in org.apache.lucene.search">Weight</a></span>&nbsp;<span class="element-name">doCache</span><wbr><span class="parameters">(<a href="Weight.html" title="class in org.apache.lucene.search">Weight</a>&nbsp;weight,
 <a href="QueryCachingPolicy.html" title="interface in org.apache.lucene.search">QueryCachingPolicy</a>&nbsp;policy)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="QueryCache.html#doCache(org.apache.lucene.search.Weight,org.apache.lucene.search.QueryCachingPolicy)">QueryCache</a></code></span></div>
<div class="block">Return a wrapper around the provided <code>weight</code> that will cache matching docs
 per-segment accordingly to the given <code>policy</code>. NOTE: The returned weight will only
 be equivalent if scores are not needed.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="QueryCache.html#doCache(org.apache.lucene.search.Weight,org.apache.lucene.search.QueryCachingPolicy)">doCache</a></code>&nbsp;in interface&nbsp;<code><a href="QueryCache.html" title="interface in org.apache.lucene.search">QueryCache</a></code></dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="Collector.html#scoreMode()"><code>Collector.scoreMode()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="ramBytesUsed()">
<h3>ramBytesUsed</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">ramBytesUsed</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="../util/Accountable.html#ramBytesUsed()">Accountable</a></code></span></div>
<div class="block">Return the memory usage of this object in bytes. Negative values are illegal.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../util/Accountable.html#ramBytesUsed()">ramBytesUsed</a></code>&nbsp;in interface&nbsp;<code><a href="../util/Accountable.html" title="interface in org.apache.lucene.util">Accountable</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getChildResources()">
<h3>getChildResources</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;<a href="../util/Accountable.html" title="interface in org.apache.lucene.util">Accountable</a>&gt;</span>&nbsp;<span class="element-name">getChildResources</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="../util/Accountable.html#getChildResources()">Accountable</a></code></span></div>
<div class="block">Returns nested resources of this class. The result should be a point-in-time snapshot (to avoid
 race conditions).</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../util/Accountable.html#getChildResources()">getChildResources</a></code>&nbsp;in interface&nbsp;<code><a href="../util/Accountable.html" title="interface in org.apache.lucene.util">Accountable</a></code></dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../util/Accountables.html" title="class in org.apache.lucene.util"><code>Accountables</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="cacheImpl(org.apache.lucene.search.BulkScorer,int)">
<h3>cacheImpl</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="LRUQueryCache.CacheAndCount.html" title="class in org.apache.lucene.search">LRUQueryCache.CacheAndCount</a></span>&nbsp;<span class="element-name">cacheImpl</span><wbr><span class="parameters">(<a href="BulkScorer.html" title="class in org.apache.lucene.search">BulkScorer</a>&nbsp;scorer,
 int&nbsp;maxDoc)</span>
                                         throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Default cache implementation: uses <a href="../util/RoaringDocIdSet.html" title="class in org.apache.lucene.util"><code>RoaringDocIdSet</code></a> for sets that have a density &lt; 1%
 and a <a href="../util/BitDocIdSet.html" title="class in org.apache.lucene.util"><code>BitDocIdSet</code></a> over a <a href="../util/FixedBitSet.html" title="class in org.apache.lucene.util"><code>FixedBitSet</code></a> otherwise.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getTotalCount()">
<h3>getTotalCount</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getTotalCount</span>()</div>
<div class="block">Return the total number of times that a <a href="Query.html" title="class in org.apache.lucene.search"><code>Query</code></a> has been looked up in this <a href="QueryCache.html" title="interface in org.apache.lucene.search"><code>QueryCache</code></a>. Note that this number is incremented once per segment so running a cached query
 only once will increment this counter by the number of segments that are wrapped by the
 searcher. Note that by definition, <a href="#getTotalCount()"><code>getTotalCount()</code></a> is the sum of <a href="#getHitCount()"><code>getHitCount()</code></a> and <a href="#getMissCount()"><code>getMissCount()</code></a>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#getHitCount()"><code>getHitCount()</code></a></li>
<li><a href="#getMissCount()"><code>getMissCount()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getHitCount()">
<h3>getHitCount</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getHitCount</span>()</div>
<div class="block">Over the <a href="#getTotalCount()"><code>total</code></a> number of times that a query has been looked up, return
 how many times a cached <a href="DocIdSet.html" title="class in org.apache.lucene.search"><code>DocIdSet</code></a> has been found and returned.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#getTotalCount()"><code>getTotalCount()</code></a></li>
<li><a href="#getMissCount()"><code>getMissCount()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMissCount()">
<h3>getMissCount</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getMissCount</span>()</div>
<div class="block">Over the <a href="#getTotalCount()"><code>total</code></a> number of times that a query has been looked up, return
 how many times this query was not contained in the cache.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#getTotalCount()"><code>getTotalCount()</code></a></li>
<li><a href="#getHitCount()"><code>getHitCount()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getCacheSize()">
<h3>getCacheSize</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getCacheSize</span>()</div>
<div class="block">Return the total number of <a href="DocIdSet.html" title="class in org.apache.lucene.search"><code>DocIdSet</code></a>s which are currently stored in the cache.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#getCacheCount()"><code>getCacheCount()</code></a></li>
<li><a href="#getEvictionCount()"><code>getEvictionCount()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getCacheCount()">
<h3>getCacheCount</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getCacheCount</span>()</div>
<div class="block">Return the total number of cache entries that have been generated and put in the cache. It is
 highly desirable to have a <a href="#getHitCount()"><code>hit count</code></a> that is much higher than the <a href="#getCacheCount()"><code>cache count</code></a> as the opposite would indicate that the query cache makes efforts
 in order to cache queries but then they do not get reused.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#getCacheSize()"><code>getCacheSize()</code></a></li>
<li><a href="#getEvictionCount()"><code>getEvictionCount()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getEvictionCount()">
<h3>getEvictionCount</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getEvictionCount</span>()</div>
<div class="block">Return the number of cache entries that have been removed from the cache either in order to
 stay under the maximum configured size/ram usage, or because a segment has been closed. High
 numbers of evictions might mean that queries are not reused or that the <a href="QueryCachingPolicy.html" title="interface in org.apache.lucene.search"><code>caching policy</code></a> caches too aggressively on NRT segments which get merged
 early.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#getCacheCount()"><code>getCacheCount()</code></a></li>
<li><a href="#getCacheSize()"><code>getCacheSize()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><i>Copyright &copy; 2000-2025 Apache Software Foundation. All Rights Reserved.</i></small></p>
</footer>
</div>
</div>
</body>
</html>
