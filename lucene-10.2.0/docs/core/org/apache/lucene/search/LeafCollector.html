<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) on Fri Apr 04 15:37:21 CEST 2025 -->
<title>LeafCollector (Lucene 10.2.0 core API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-04-04">
<meta name="description" content="declaration: package: org.apache.lucene.search, interface: LeafCollector">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/LeafCollector.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.lucene.search</a></div>
<h1 title="Interface LeafCollector" class="title">Interface LeafCollector</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="FilterLeafCollector.html" title="class in org.apache.lucene.search">FilterLeafCollector</a></code>, <code><a href="SimpleCollector.html" title="class in org.apache.lucene.search">SimpleCollector</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public interface </span><span class="element-name type-name-label">LeafCollector</span></div>
<div class="block">Collector decouples the score from the collected doc: the score computation is skipped entirely
 if it's not needed. Collectors that do need the score should implement the <a href="#setScorer(org.apache.lucene.search.Scorable)"><code>setScorer(org.apache.lucene.search.Scorable)</code></a>
 method, to hold onto the passed <a href="Scorer.html" title="class in org.apache.lucene.search"><code>Scorer</code></a> instance, and call <a href="Scorable.html#score()"><code>Scorable.score()</code></a> within
 the collect method to compute the current hit's score. If your collector may request the score
 for a single hit multiple times, you should use <a href="ScoreCachingWrappingScorer.html" title="class in org.apache.lucene.search"><code>ScoreCachingWrappingScorer</code></a>.

 <p><b>NOTE:</b> The doc that is passed to the collect method is relative to the current reader.
 If your collector needs to resolve this to the docID space of the Multi*Reader, you must re-base
 it by recording the docBase from the most recent setNextReader call. Here's a simple example
 showing how to collect docIDs into a BitSet:

 <pre class="prettyprint">
 IndexSearcher searcher = new IndexSearcher(indexReader);
 final BitSet bits = new BitSet(indexReader.maxDoc());
 searcher.search(query, new Collector() {

   public LeafCollector getLeafCollector(LeafReaderContext context)
       throws IOException {
     final int docBase = context.docBase;
     return new LeafCollector() {

       <em>// ignore scorer</em>
       public void setScorer(Scorer scorer) throws IOException {
       }

       public void collect(int doc) throws IOException {
         bits.set(docBase + doc);
       }

     };
   }

 });
 </pre>

 <p>Not all collectors will need to rebase the docID. For example, a collector that simply counts
 the total number of hits would skip it.</div>
<dl class="notes">
<dt>WARNING: This API is experimental and might change in incompatible ways in the next release.</dt>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button><button id="method-summary-table-tab5" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab5', 3)" class="table-tab">Default Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#collect(int)" class="member-name-link">collect</a><wbr>(int&nbsp;doc)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Called once for every document matching a query, with the unbased document number.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#collect(org.apache.lucene.search.DocIdStream)" class="member-name-link">collect</a><wbr>(<a href="DocIdStream.html" title="class in org.apache.lucene.search">DocIdStream</a>&nbsp;stream)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Bulk-collect doc IDs.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default <a href="DocIdSetIterator.html" title="class in org.apache.lucene.search">DocIdSetIterator</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#competitiveIterator()" class="member-name-link">competitiveIterator</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Optionally returns an iterator over competitive documents.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#finish()" class="member-name-link">finish</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Hook that gets called once the leaf that is associated with this collector has finished
 collecting successfully, including when a <a href="CollectionTerminatedException.html" title="class in org.apache.lucene.search"><code>CollectionTerminatedException</code></a> is thrown.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#setScorer(org.apache.lucene.search.Scorable)" class="member-name-link">setScorer</a><wbr>(<a href="Scorable.html" title="class in org.apache.lucene.search">Scorable</a>&nbsp;scorer)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Called before successive calls to <a href="#collect(int)"><code>collect(int)</code></a>.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="setScorer(org.apache.lucene.search.Scorable)">
<h3>setScorer</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">setScorer</span><wbr><span class="parameters">(<a href="Scorable.html" title="class in org.apache.lucene.search">Scorable</a>&nbsp;scorer)</span>
        throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Called before successive calls to <a href="#collect(int)"><code>collect(int)</code></a>. Implementations that need the score of
 the current document (passed-in to <a href="#collect(int)"><code>collect(int)</code></a>), should save the passed-in Scorer and
 call scorer.score() when needed.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="collect(int)">
<h3>collect</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">collect</span><wbr><span class="parameters">(int&nbsp;doc)</span>
      throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Called once for every document matching a query, with the unbased document number.

 <p>Note: The collection of the current segment can be terminated by throwing a <a href="CollectionTerminatedException.html" title="class in org.apache.lucene.search"><code>CollectionTerminatedException</code></a>. In this case, the last docs of the current <a href="../index/LeafReaderContext.html" title="class in org.apache.lucene.index"><code>LeafReaderContext</code></a> will be skipped and <a href="IndexSearcher.html" title="class in org.apache.lucene.search"><code>IndexSearcher</code></a> will
 swallow the exception and continue collection with the next leaf.

 <p>Note: This is called in an inner search loop. For good search performance, implementations
 of this method should not call <a href="../index/StoredFields.html#document(int)"><code>StoredFields.document(int)</code></a> on every hit. Doing so can slow
 searches by an order of magnitude or more.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="collect(org.apache.lucene.search.DocIdStream)">
<h3>collect</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">collect</span><wbr><span class="parameters">(<a href="DocIdStream.html" title="class in org.apache.lucene.search">DocIdStream</a>&nbsp;stream)</span>
              throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Bulk-collect doc IDs.

 <p>Note: The provided <a href="DocIdStream.html" title="class in org.apache.lucene.search"><code>DocIdStream</code></a> may be reused across calls and should be consumed
 immediately.

 <p>Note: The provided <a href="DocIdStream.html" title="class in org.apache.lucene.search"><code>DocIdStream</code></a> typically only holds a small subset of query matches.
 This method may be called multiple times per segment.

 <p>Like <a href="#collect(int)"><code>collect(int)</code></a>, it is guaranteed that doc IDs get collected in order, ie. doc
 IDs are collected in order within a <a href="DocIdStream.html" title="class in org.apache.lucene.search"><code>DocIdStream</code></a>, and if called twice, all doc IDs from
 the second <a href="DocIdStream.html" title="class in org.apache.lucene.search"><code>DocIdStream</code></a> will be greater than all doc IDs from the first <a href="DocIdStream.html" title="class in org.apache.lucene.search"><code>DocIdStream</code></a>.

 <p>It is legal for callers to mix calls to <a href="#collect(org.apache.lucene.search.DocIdStream)"><code>collect(DocIdStream)</code></a> and <a href="#collect(int)"><code>collect(int)</code></a>.

 <p>The default implementation calls <code>stream.forEach(this::collect)</code>.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="competitiveIterator()">
<h3>competitiveIterator</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type"><a href="DocIdSetIterator.html" title="class in org.apache.lucene.search">DocIdSetIterator</a></span>&nbsp;<span class="element-name">competitiveIterator</span>()
                                      throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Optionally returns an iterator over competitive documents.

 <p>Collectors should delegate this method to their comparators if their comparators provide the
 skipping functionality over non-competitive docs.

 <p>The default is to return <code>null</code> which is interpreted as the collector provide any
 competitive iterator.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="finish()">
<h3>finish</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">finish</span>()
             throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Hook that gets called once the leaf that is associated with this collector has finished
 collecting successfully, including when a <a href="CollectionTerminatedException.html" title="class in org.apache.lucene.search"><code>CollectionTerminatedException</code></a> is thrown. This
 is typically useful to compile data that has been collected on this leaf, e.g. to convert facet
 counts on leaf ordinals to facet counts on global ordinals. The default implementation does
 nothing.

 <p>Note: It can be assumed that this method will only be called once per LeafCollector
 instance.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><i>Copyright &copy; 2000-2025 Apache Software Foundation. All Rights Reserved.</i></small></p>
</footer>
</div>
</div>
</body>
</html>
