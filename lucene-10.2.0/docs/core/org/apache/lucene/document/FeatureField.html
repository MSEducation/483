<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) on Fri Apr 04 15:37:21 CEST 2025 -->
<title>FeatureField (Lucene 10.2.0 core API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-04-04">
<meta name="description" content="declaration: package: org.apache.lucene.document, class: FeatureField">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/FeatureField.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li><a href="#nested-class-summary">Nested</a></li>
<li><a href="#field-summary">Field</a></li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.lucene.document</a></div>
<h1 title="Class FeatureField" class="title">Class FeatureField</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance"><a href="Field.html" title="class in org.apache.lucene.document">org.apache.lucene.document.Field</a>
<div class="inheritance">org.apache.lucene.document.FeatureField</div>
</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../index/IndexableField.html" title="interface in org.apache.lucene.index">IndexableField</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public final class </span><span class="element-name type-name-label">FeatureField</span>
<span class="extends-implements">extends <a href="Field.html" title="class in org.apache.lucene.document">Field</a></span></div>
<div class="block"><a href="Field.html" title="class in org.apache.lucene.document"><code>Field</code></a> that can be used to store static scoring factors into documents. This is mostly
 inspired from the work from Nick Craswell, Stephen Robertson, Hugo Zaragoza and Michael Taylor.
 Relevance weighting for query independent evidence. Proceedings of the 28th annual international
 ACM SIGIR conference on Research and development in information retrieval. August 15-19, 2005,
 Salvador, Brazil.

 <p>Feature values are internally encoded as term frequencies. Putting feature queries as <a href="../search/BooleanClause.Occur.html#SHOULD"><code>BooleanClause.Occur.SHOULD</code></a> clauses of a <a href="../search/BooleanQuery.html" title="class in org.apache.lucene.search"><code>BooleanQuery</code></a> allows to
 combine query-dependent scores (eg. BM25) with query-independent scores using a linear
 combination. The fact that feature values are stored as frequencies also allows search logic to
 efficiently skip documents that can't be competitive when total hit counts are not requested.
 This makes it a compelling option compared to storing such factors eg. in a doc-value field.

 <p>This field may only store factors that are positively correlated with the final score, like
 pagerank. In case of factors that are inversely correlated with the score like url length, the
 inverse of the scoring factor should be stored, ie. <code>1/urlLength</code>.

 <p>This field only considers the top 9 significant bits for storage efficiency which allows to
 store them on 16 bits internally. In practice this limitation means that values are stored with a
 relative precision of 2<sup>-8</sup> = 0.00390625.

 <p>Given a scoring factor <code>S &gt; 0</code> and its weight <code>w &gt; 0</code>, there are four ways that S
 can be turned into a score:

 <ul>
   <li><a href="#newLogQuery(java.lang.String,java.lang.String,float,float)"><code>w * log(a + S)</code></a>, with a &ge; 1. This function usually makes sense
       because the distribution of scoring factors often follows a power law. This is typically
       the case for pagerank for instance. However the paper suggested that the <code>satu</code> and
       <code>sigm</code> functions give even better results.
   <li><a href="#newSaturationQuery(java.lang.String,java.lang.String,float,float)"><code>satu(S) = w * S / (S + k)</code></a>, with k &gt; 0. This function is
       similar to the one used by <a href="../search/similarities/BM25Similarity.html" title="class in org.apache.lucene.search.similarities"><code>BM25Similarity</code></a> in order to incorporate term frequency
       into the final score and produces values between 0 and 1. A value of 0.5 is obtained when S
       and k are equal.
   <li><a href="#newSigmoidQuery(java.lang.String,java.lang.String,float,float,float)"><code>sigm(S) = w * S<sup>a</sup> / (S<sup>a</sup> + k<sup>a</sup>)</code></a>,
       with k &gt; 0, a &gt; 0. This function provided even better results than the two above but
       is also harder to tune due to the fact it has 2 parameters. Like with <code>satu</code>, values
       are in the 0..1 range and 0.5 is obtained when S and k are equal.
   <li><a href="#newLinearQuery(java.lang.String,java.lang.String,float)"><code>w * S</code></a>. Expert: This function doesn't apply any transformation to an
       indexed feature value, and the indexed value itself, multiplied by weight, determines the
       score. Thus, there is an expectation that a feature value is encoded in the index in a way
       that makes sense for scoring.
 </ul>

 <p>The constants in the above formulas typically need training in order to compute optimal
 values. If you don't know where to start, the <a href="#newSaturationQuery(java.lang.String,java.lang.String)"><code>newSaturationQuery(String, String)</code></a> method
 uses <code>1f</code> as a weight and tries to guess a sensible value for the <code>pivot</code> parameter
 of the saturation function based on index statistics, which shouldn't perform too bad. Here is an
 example, assuming that documents have a <a href="FeatureField.html" title="class in org.apache.lucene.document"><code>FeatureField</code></a> called 'features' with values for
 the 'pagerank' feature.

 <pre class="prettyprint">
 Query query = new BooleanQuery.Builder()
     .add(new TermQuery(new Term("body", "apache")), Occur.SHOULD)
     .add(new TermQuery(new Term("body", "lucene")), Occur.SHOULD)
     .build();
 Query boost = FeatureField.newSaturationQuery("features", "pagerank");
 Query boostedQuery = new BooleanQuery.Builder()
     .add(query, Occur.MUST)
     .add(boost, Occur.SHOULD)
     .build();
 TopDocs topDocs = searcher.search(boostedQuery, 10);
 </pre></div>
<dl class="notes">
<dt>WARNING: This API is experimental and might change in incompatible ways in the next release.</dt>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="inherited-list">
<h2 id="nested-classes-inherited-from-class-org.apache.lucene.document.Field">Nested classes/interfaces inherited from class&nbsp;org.apache.lucene.document.<a href="Field.html" title="class in org.apache.lucene.document">Field</a></h2>
<code><a href="Field.Store.html" title="enum class in org.apache.lucene.document">Field.Store</a></code></div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-org.apache.lucene.document.Field">Fields inherited from class&nbsp;org.apache.lucene.document.<a href="Field.html" title="class in org.apache.lucene.document">Field</a></h3>
<code><a href="Field.html#fieldsData">fieldsData</a>, <a href="Field.html#name">name</a>, <a href="Field.html#type">type</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(java.lang.String,java.lang.String,float)" class="member-name-link">FeatureField</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;fieldName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;featureName,
 float&nbsp;featureValue)</code></div>
<div class="col-last even-row-color">
<div class="block">Create a feature.</div>
</div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(java.lang.String,java.lang.String,float,boolean)" class="member-name-link">FeatureField</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;fieldName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;featureName,
 float&nbsp;featureValue,
 boolean&nbsp;storeTermVectors)</code></div>
<div class="col-last odd-row-color">
<div class="block">Create a feature.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>float</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getFeatureValue()" class="member-name-link">getFeatureValue</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This is useful if you have multiple features sharing a name and you want to take action to
 deduplicate them.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="../search/DoubleValuesSource.html" title="class in org.apache.lucene.search">DoubleValuesSource</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#newDoubleValues(java.lang.String,java.lang.String)" class="member-name-link">newDoubleValues</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;field,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;featureName)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Creates a <a href="../search/DoubleValuesSource.html" title="class in org.apache.lucene.search"><code>DoubleValuesSource</code></a> instance which can be used to read the values of a feature
 from the a <a href="FeatureField.html" title="class in org.apache.lucene.document"><code>FeatureField</code></a> for documents.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="../search/SortField.html" title="class in org.apache.lucene.search">SortField</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#newFeatureSort(java.lang.String,java.lang.String)" class="member-name-link">newFeatureSort</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;field,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;featureName)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Creates a SortField for sorting by the value of a feature.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="../search/Query.html" title="class in org.apache.lucene.search">Query</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#newLinearQuery(java.lang.String,java.lang.String,float)" class="member-name-link">newLinearQuery</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;fieldName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;featureName,
 float&nbsp;weight)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Return a new <a href="../search/Query.html" title="class in org.apache.lucene.search"><code>Query</code></a> that will score documents as <code>weight * S</code> where S is the value
 of the static feature.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="../search/Query.html" title="class in org.apache.lucene.search">Query</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#newLogQuery(java.lang.String,java.lang.String,float,float)" class="member-name-link">newLogQuery</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;fieldName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;featureName,
 float&nbsp;weight,
 float&nbsp;scalingFactor)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Return a new <a href="../search/Query.html" title="class in org.apache.lucene.search"><code>Query</code></a> that will score documents as <code>weight * Math.log(scalingFactor
 + S)</code> where S is the value of the static feature.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="../search/Query.html" title="class in org.apache.lucene.search">Query</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#newSaturationQuery(java.lang.String,java.lang.String)" class="member-name-link">newSaturationQuery</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;fieldName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;featureName)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Same as <a href="#newSaturationQuery(java.lang.String,java.lang.String,float,float)"><code>newSaturationQuery(String, String, float, float)</code></a> but <code>1f</code> is used as a
 weight and a reasonably good default pivot value is computed based on index statistics and is
 approximately equal to the geometric mean of all values that exist in the index.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="../search/Query.html" title="class in org.apache.lucene.search">Query</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#newSaturationQuery(java.lang.String,java.lang.String,float,float)" class="member-name-link">newSaturationQuery</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;fieldName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;featureName,
 float&nbsp;weight,
 float&nbsp;pivot)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Return a new <a href="../search/Query.html" title="class in org.apache.lucene.search"><code>Query</code></a> that will score documents as <code>weight * S / (S + pivot)</code> where
 S is the value of the static feature.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="../search/Query.html" title="class in org.apache.lucene.search">Query</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#newSigmoidQuery(java.lang.String,java.lang.String,float,float,float)" class="member-name-link">newSigmoidQuery</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;fieldName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;featureName,
 float&nbsp;weight,
 float&nbsp;pivot,
 float&nbsp;exp)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Return a new <a href="../search/Query.html" title="class in org.apache.lucene.search"><code>Query</code></a> that will score documents as <code>weight * S^a / (S^a + pivot^a)</code>
 where S is the value of the static feature.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setFeatureValue(float)" class="member-name-link">setFeatureValue</a><wbr>(float&nbsp;featureValue)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Update the feature value of this field.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../analysis/TokenStream.html" title="class in org.apache.lucene.analysis">TokenStream</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tokenStream(org.apache.lucene.analysis.Analyzer,org.apache.lucene.analysis.TokenStream)" class="member-name-link">tokenStream</a><wbr>(<a href="../analysis/Analyzer.html" title="class in org.apache.lucene.analysis">Analyzer</a>&nbsp;analyzer,
 <a href="../analysis/TokenStream.html" title="class in org.apache.lucene.analysis">TokenStream</a>&nbsp;reuse)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Creates the TokenStream used for indexing this field.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.apache.lucene.document.Field">Methods inherited from class&nbsp;org.apache.lucene.document.<a href="Field.html" title="class in org.apache.lucene.document">Field</a></h3>
<code><a href="Field.html#binaryValue()">binaryValue</a>, <a href="Field.html#fieldType()">fieldType</a>, <a href="Field.html#getCharSequenceValue()">getCharSequenceValue</a>, <a href="Field.html#invertableType()">invertableType</a>, <a href="Field.html#name()">name</a>, <a href="Field.html#numericValue()">numericValue</a>, <a href="Field.html#readerValue()">readerValue</a>, <a href="Field.html#setBytesValue(byte%5B%5D)">setBytesValue</a>, <a href="Field.html#setBytesValue(org.apache.lucene.util.BytesRef)">setBytesValue</a>, <a href="Field.html#setByteValue(byte)">setByteValue</a>, <a href="Field.html#setDoubleValue(double)">setDoubleValue</a>, <a href="Field.html#setFloatValue(float)">setFloatValue</a>, <a href="Field.html#setIntValue(int)">setIntValue</a>, <a href="Field.html#setLongValue(long)">setLongValue</a>, <a href="Field.html#setReaderValue(java.io.Reader)">setReaderValue</a>, <a href="Field.html#setShortValue(short)">setShortValue</a>, <a href="Field.html#setStringValue(java.lang.String)">setStringValue</a>, <a href="Field.html#setTokenStream(org.apache.lucene.analysis.TokenStream)">setTokenStream</a>, <a href="Field.html#storedValue()">storedValue</a>, <a href="Field.html#stringValue()">stringValue</a>, <a href="Field.html#tokenStreamValue()">tokenStreamValue</a>, <a href="Field.html#toString()">toString</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone--" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals-java.lang.Object-" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize--" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass--" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode--" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify--" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll--" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait--" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait-long-" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait-long-int-" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(java.lang.String,java.lang.String,float)">
<h3>FeatureField</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">FeatureField</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;fieldName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;featureName,
 float&nbsp;featureValue)</span></div>
<div class="block">Create a feature.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>fieldName</code> - The name of the field to store the information into. All features may be
     stored in the same field.</dd>
<dd><code>featureName</code> - The name of the feature, eg. 'pagerank`. It will be indexed as a term.</dd>
<dd><code>featureValue</code> - The value of the feature, must be a positive, finite, normal float.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(java.lang.String,java.lang.String,float,boolean)">
<h3>FeatureField</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">FeatureField</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;fieldName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;featureName,
 float&nbsp;featureValue,
 boolean&nbsp;storeTermVectors)</span></div>
<div class="block">Create a feature.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>fieldName</code> - The name of the field to store the information into. All features may be
     stored in the same field.</dd>
<dd><code>featureName</code> - The name of the feature, eg. 'pagerank`. It will be indexed as a term.</dd>
<dd><code>featureValue</code> - The value of the feature, must be a positive, finite, normal float.</dd>
<dd><code>storeTermVectors</code> - Whether term vectors should be stored.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="setFeatureValue(float)">
<h3>setFeatureValue</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setFeatureValue</span><wbr><span class="parameters">(float&nbsp;featureValue)</span></div>
<div class="block">Update the feature value of this field.</div>
</section>
</li>
<li>
<section class="detail" id="tokenStream(org.apache.lucene.analysis.Analyzer,org.apache.lucene.analysis.TokenStream)">
<h3>tokenStream</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../analysis/TokenStream.html" title="class in org.apache.lucene.analysis">TokenStream</a></span>&nbsp;<span class="element-name">tokenStream</span><wbr><span class="parameters">(<a href="../analysis/Analyzer.html" title="class in org.apache.lucene.analysis">Analyzer</a>&nbsp;analyzer,
 <a href="../analysis/TokenStream.html" title="class in org.apache.lucene.analysis">TokenStream</a>&nbsp;reuse)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="../index/IndexableField.html#tokenStream(org.apache.lucene.analysis.Analyzer,org.apache.lucene.analysis.TokenStream)">IndexableField</a></code></span></div>
<div class="block">Creates the TokenStream used for indexing this field. If appropriate, implementations should
 use the given Analyzer to create the TokenStreams.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../index/IndexableField.html#tokenStream(org.apache.lucene.analysis.Analyzer,org.apache.lucene.analysis.TokenStream)">tokenStream</a></code>&nbsp;in interface&nbsp;<code><a href="../index/IndexableField.html" title="interface in org.apache.lucene.index">IndexableField</a></code></dd>
<dt>Overrides:</dt>
<dd><code><a href="Field.html#tokenStream(org.apache.lucene.analysis.Analyzer,org.apache.lucene.analysis.TokenStream)">tokenStream</a></code>&nbsp;in class&nbsp;<code><a href="Field.html" title="class in org.apache.lucene.document">Field</a></code></dd>
<dt>Parameters:</dt>
<dd><code>analyzer</code> - Analyzer that should be used to create the TokenStreams from</dd>
<dd><code>reuse</code> - TokenStream for a previous instance of this field <b>name</b>. This allows custom
     field types (like StringField and NumericField) that do not use the analyzer to still have
     good performance. Note: the passed-in type may be inappropriate, for example if you mix up
     different types of Fields for the same field name. So it's the responsibility of the
     implementation to check.</dd>
<dt>Returns:</dt>
<dd>TokenStream value for indexing the document. Should always return a non-null value if
     the field is to be indexed</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getFeatureValue()">
<h3>getFeatureValue</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">float</span>&nbsp;<span class="element-name">getFeatureValue</span>()</div>
<div class="block">This is useful if you have multiple features sharing a name and you want to take action to
 deduplicate them.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the feature value of this field.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="newLinearQuery(java.lang.String,java.lang.String,float)">
<h3>newLinearQuery</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="../search/Query.html" title="class in org.apache.lucene.search">Query</a></span>&nbsp;<span class="element-name">newLinearQuery</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;fieldName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;featureName,
 float&nbsp;weight)</span></div>
<div class="block">Return a new <a href="../search/Query.html" title="class in org.apache.lucene.search"><code>Query</code></a> that will score documents as <code>weight * S</code> where S is the value
 of the static feature.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>fieldName</code> - field that stores features</dd>
<dd><code>featureName</code> - name of the feature</dd>
<dd><code>weight</code> - weight to give to this feature, must be in (0,64]</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if weight is not in (0,64]</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="newLogQuery(java.lang.String,java.lang.String,float,float)">
<h3>newLogQuery</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="../search/Query.html" title="class in org.apache.lucene.search">Query</a></span>&nbsp;<span class="element-name">newLogQuery</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;fieldName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;featureName,
 float&nbsp;weight,
 float&nbsp;scalingFactor)</span></div>
<div class="block">Return a new <a href="../search/Query.html" title="class in org.apache.lucene.search"><code>Query</code></a> that will score documents as <code>weight * Math.log(scalingFactor
 + S)</code> where S is the value of the static feature.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>fieldName</code> - field that stores features</dd>
<dd><code>featureName</code> - name of the feature</dd>
<dd><code>weight</code> - weight to give to this feature, must be in (0,64]</dd>
<dd><code>scalingFactor</code> - scaling factor applied before taking the logarithm, must be in [1,
     +Infinity)</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if weight is not in (0,64] or scalingFactor is not in [1,
     +Infinity)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="newSaturationQuery(java.lang.String,java.lang.String,float,float)">
<h3>newSaturationQuery</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="../search/Query.html" title="class in org.apache.lucene.search">Query</a></span>&nbsp;<span class="element-name">newSaturationQuery</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;fieldName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;featureName,
 float&nbsp;weight,
 float&nbsp;pivot)</span></div>
<div class="block">Return a new <a href="../search/Query.html" title="class in org.apache.lucene.search"><code>Query</code></a> that will score documents as <code>weight * S / (S + pivot)</code> where
 S is the value of the static feature.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>fieldName</code> - field that stores features</dd>
<dd><code>featureName</code> - name of the feature</dd>
<dd><code>weight</code> - weight to give to this feature, must be in (0,64]</dd>
<dd><code>pivot</code> - feature value that would give a score contribution equal to weight/2, must be in
     (0, +Infinity)</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if weight is not in (0,64] or pivot is not in (0, +Infinity)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="newSaturationQuery(java.lang.String,java.lang.String)">
<h3>newSaturationQuery</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="../search/Query.html" title="class in org.apache.lucene.search">Query</a></span>&nbsp;<span class="element-name">newSaturationQuery</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;fieldName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;featureName)</span></div>
<div class="block">Same as <a href="#newSaturationQuery(java.lang.String,java.lang.String,float,float)"><code>newSaturationQuery(String, String, float, float)</code></a> but <code>1f</code> is used as a
 weight and a reasonably good default pivot value is computed based on index statistics and is
 approximately equal to the geometric mean of all values that exist in the index.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>fieldName</code> - field that stores features</dd>
<dd><code>featureName</code> - name of the feature</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if weight is not in (0,64] or pivot is not in (0, +Infinity)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="newSigmoidQuery(java.lang.String,java.lang.String,float,float,float)">
<h3>newSigmoidQuery</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="../search/Query.html" title="class in org.apache.lucene.search">Query</a></span>&nbsp;<span class="element-name">newSigmoidQuery</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;fieldName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;featureName,
 float&nbsp;weight,
 float&nbsp;pivot,
 float&nbsp;exp)</span></div>
<div class="block">Return a new <a href="../search/Query.html" title="class in org.apache.lucene.search"><code>Query</code></a> that will score documents as <code>weight * S^a / (S^a + pivot^a)</code>
 where S is the value of the static feature.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>fieldName</code> - field that stores features</dd>
<dd><code>featureName</code> - name of the feature</dd>
<dd><code>weight</code> - weight to give to this feature, must be in (0,64]</dd>
<dd><code>pivot</code> - feature value that would give a score contribution equal to weight/2, must be in
     (0, +Infinity)</dd>
<dd><code>exp</code> - exponent, higher values make the function grow slower before 'pivot' and faster
     after 'pivot', must be in (0, +Infinity)</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if w is not in (0,64] or either k or a are not in (0,
     +Infinity)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="newFeatureSort(java.lang.String,java.lang.String)">
<h3>newFeatureSort</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="../search/SortField.html" title="class in org.apache.lucene.search">SortField</a></span>&nbsp;<span class="element-name">newFeatureSort</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;field,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;featureName)</span></div>
<div class="block">Creates a SortField for sorting by the value of a feature.

 <p>This sort orders documents by descending value of a feature. The value returned in <a href="../search/FieldDoc.html" title="class in org.apache.lucene.search"><code>FieldDoc</code></a> for the hits contains a Float instance with the feature value.

 <p>If a document is missing the field, then it is treated as having a value of <code>0.0f
 </code>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>field</code> - field name. Must not be null.</dd>
<dd><code>featureName</code> - feature name. Must not be null.</dd>
<dt>Returns:</dt>
<dd>SortField ordering documents by the value of the feature</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/NullPointerException.html" title="class or interface in java.lang" class="external-link">NullPointerException</a></code> - if <code>field</code> or <code>featureName</code> is null.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="newDoubleValues(java.lang.String,java.lang.String)">
<h3>newDoubleValues</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="../search/DoubleValuesSource.html" title="class in org.apache.lucene.search">DoubleValuesSource</a></span>&nbsp;<span class="element-name">newDoubleValues</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;field,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;featureName)</span></div>
<div class="block">Creates a <a href="../search/DoubleValuesSource.html" title="class in org.apache.lucene.search"><code>DoubleValuesSource</code></a> instance which can be used to read the values of a feature
 from the a <a href="FeatureField.html" title="class in org.apache.lucene.document"><code>FeatureField</code></a> for documents.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>field</code> - field name. Must not be null.</dd>
<dd><code>featureName</code> - feature name. Must not be null.</dd>
<dt>Returns:</dt>
<dd>a <a href="../search/DoubleValuesSource.html" title="class in org.apache.lucene.search"><code>DoubleValuesSource</code></a> which can be used to access the values of the feature for
     documents</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/NullPointerException.html" title="class or interface in java.lang" class="external-link">NullPointerException</a></code> - if <code>field</code> or <code>featureName</code> is null.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><i>Copyright &copy; 2000-2025 Apache Software Foundation. All Rights Reserved.</i></small></p>
</footer>
</div>
</div>
</body>
</html>
